!function(t){var e;"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e=(e=(e=(e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).jsforce||(e.jsforce={})).modules||(e.modules={})).api||(e.api={})).Chatter=t()}(function(){return function n(o,i,s){function u(e,t){if(!i[e]){if(!o[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(c)return c(e,!0);throw(r=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",r}r=i[e]={exports:{}},o[e][0].call(r.exports,function(t){return u(o[e][1][t]||t)},r,r.exports,n,o,i,s)}return i[e].exports}for(var c="function"==typeof require&&require,t=0;t<s.length;t++)u(s[t]);return u}({1:[function(t,e,r){"use strict";var n=window.jsforce.require("inherits"),o=window.jsforce.require("lodash/core"),i=window.jsforce.require("./core"),s=window.jsforce.require("./promise"),u=e.exports=function(t){this._conn=t};u.prototype._request=function(t,e){return/^(put|post|patch)$/i.test(t.method)&&o.isObject(t.body)&&(t.headers={"Content-Type":"application/json"},t.body=JSON.stringify(t.body)),t.url=this._normalizeUrl(t.url),this._conn.request(t,e)},u.prototype._normalizeUrl=function(t){return 0===t.indexOf("/chatter/")||0===t.indexOf("/connect/")?"/services/data/v"+this._conn.version+t:/^\/v[\d]+\.[\d]+\//.test(t)?"/services/data"+t:0!==t.indexOf("/services/")&&"/"===t[0]?"/services/data/v"+this._conn.version+"/chatter"+t:t},u.prototype.request=function(t,e){return new c(this,t).thenCall(e)},u.prototype.resource=function(t,e){return new a(this,t,e)},u.prototype.batch=function(t,e){var r=[],n=[];o.forEach(t,function(t){var e=s.defer();t._promise=e.promise,r.push(t.batchParams()),n.push(e)});t={method:"POST",url:this._normalizeUrl("/connect/batch"),body:{batchRequests:r}};return this.request(t).then(function(t){return o.forEach(t.results,function(t,e){e=n[e];400<=t.statusCode?e.reject(t.result):e.resolve(t.result)}),t}).thenCall(e)};var c=function(t,e){this._chatter=t,this._params=e,this._promise=null};c.prototype.batchParams=function(){var t=this._params,t={method:t.method,url:this._chatter._normalizeUrl(t.url)};return this._params.body&&(t.richInput=this._params.body),t},c.prototype.promise=function(){return this._promise||this._chatter._request(this._params)},c.prototype.stream=function(){return this._chatter._request(this._params).stream()},c.prototype.then=function(t,e){return this.promise().then(t,e)},c.prototype.thenCall=function(t){return o.isFunction(t)?this.promise().thenCall(t):this};var a=function(t,e,r){var n;r&&(n=o.map(o.keys(r),function(t){return t+"="+encodeURIComponent(r[t])}).join("&"),e+=(0<e.indexOf("?")?"&":"?")+n),a.super_.call(this,t,{method:"GET",url:e}),this._url=e};n(a,c),a.prototype.create=function(t,e){return this._chatter.request({method:"POST",url:this._url,body:t}).thenCall(e)},a.prototype.retrieve=function(t){return this.thenCall(t)},a.prototype.update=function(t,e){return this._chatter.request({method:"PATCH",url:this._url,body:t}).thenCall(e)},a.prototype.del=a.prototype.delete=function(t){return this._chatter.request({method:"DELETE",url:this._url}).thenCall(t)},i.on("connection:new",function(t){t.chatter=new u(t)})},{}]},{},[1])(1)});
//# sourceMappingURL=jsforce-api-chatter.min.js.map
