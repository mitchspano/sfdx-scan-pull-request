import _Symbol$toPrimitive from "@babel/runtime-corejs3/core-js-stable/symbol/to-primitive";
import _Object$defineProperty from "@babel/runtime-corejs3/core-js-stable/object/define-property";
import _Object$defineProperties from "@babel/runtime-corejs3/core-js-stable/object/define-properties";
import _Object$getOwnPropertyDescriptors from "@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors";
import _forEachInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/for-each";
import _Object$getOwnPropertyDescriptor from "@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor";
import _filterInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/filter";
import _Object$getOwnPropertySymbols from "@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols";
import _Object$keys from "@babel/runtime-corejs3/core-js-stable/object/keys";
import "core-js/modules/es.array.iterator";
import "core-js/modules/es.promise";
import "core-js/modules/es.string.replace";
import _objectWithoutProperties from "@babel/runtime-corejs3/helpers/objectWithoutProperties";
import _mapInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/map";
import _Array$isArray from "@babel/runtime-corejs3/core-js-stable/array/is-array";
import _indexOfInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/index-of";
import _JSON$stringify from "@babel/runtime-corejs3/core-js-stable/json/stringify";
import _parseInt from "@babel/runtime-corejs3/core-js-stable/parse-int";
import _Promise from "@babel/runtime-corejs3/core-js-stable/promise";
import _defineProperty from "@babel/runtime-corejs3/helpers/defineProperty";
import _sliceInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/slice";

function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }

function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[_Symbol$toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }

function ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = _filterInstanceProperty(symbols).call(symbols, function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { var _context6; _forEachInstanceProperty(_context6 = ownKeys(Object(source), true)).call(_context6, function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { var _context7; _forEachInstanceProperty(_context7 = ownKeys(Object(source))).call(_context7, function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }

/**
 *
 */
import { EventEmitter } from 'events';
import jsforce from './jsforce';
import Transport, { CanvasTransport, XdProxyTransport, HttpProxyTransport } from './transport';
import { getLogger } from './util/logger';
import OAuth2 from './oauth2';
import Cache from './cache';
import HttpApi from './http-api';
import SessionRefreshDelegate from './session-refresh-delegate';
import Query from './query';
import SObject from './sobject';
import QuickAction from './quick-action';
import Process from './process';
import { formatDate } from './util/formatter';

/**
 *
 */
const defaultConnectionConfig = {
  loginUrl: 'https://login.salesforce.com',
  instanceUrl: '',
  version: '50.0',
  logLevel: 'NONE',
  maxRequest: 10
};
/**
 *
 */

function esc(str) {
  return String(str || '').replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
}
/**
 *
 */


function parseSignedRequest(sr) {
  if (typeof sr === 'string') {
    if (sr[0] === '{') {
      // might be JSON
      return JSON.parse(sr);
    } // might be original base64-encoded signed request


    const msg = sr.split('.').pop(); // retrieve latter part

    if (!msg) {
      throw new Error('Invalid signed request');
    }

    const json = Buffer.from(msg, 'base64').toString('utf-8');
    return JSON.parse(json);
  }

  return sr;
}
/** @private **/


function parseIdUrl(url) {
  var _context;

  const [organizationId, id] = _sliceInstanceProperty(_context = url.split('/')).call(_context, -2);

  return {
    id,
    organizationId,
    url
  };
}
/**
 * Session Refresh delegate function for OAuth2 authz code flow
 * @private
 */


async function oauthRefreshFn(conn, callback) {
  try {
    if (!conn.refreshToken) {
      throw new Error('No refresh token found in the connection');
    }

    const res = await conn.oauth2.refreshToken(conn.refreshToken);
    const userInfo = parseIdUrl(res.id);

    conn._establish({
      instanceUrl: res.instance_url,
      accessToken: res.access_token,
      userInfo
    });

    callback(undefined, res.access_token, res);
  } catch (err) {
    if (err instanceof Error) {
      callback(err);
    } else {
      throw err;
    }
  }
}
/**
 * Session Refresh delegate function for username/password login
 * @private
 */


function createUsernamePasswordRefreshFn(username, password) {
  return async (conn, callback) => {
    try {
      await conn.login(username, password);

      if (!conn.accessToken) {
        throw new Error('Access token not found after login');
      }

      callback(null, conn.accessToken);
    } catch (err) {
      if (err instanceof Error) {
        callback(err);
      } else {
        throw err;
      }
    }
  };
}
/**
 * @private
 */


function toSaveResult(err) {
  return {
    success: false,
    errors: [err]
  };
}
/**
 *
 */


function raiseNoModuleError(name) {
  throw new Error(`API module '${name}' is not loaded, load 'jsforce/api/${name}' explicitly`);
}
/*
 * Constant of maximum records num in DML operation (update/delete)
 */


const MAX_DML_COUNT = 200;
/**
 *
 */

export class Connection extends EventEmitter {
  // describe: (name: string) => Promise<DescribeSObjectResult>;
  // describeGlobal: () => Promise<DescribeGlobalResult>;
  // API libs are not instantiated here so that core module to remain without dependencies to them
  // It is responsible for developers to import api libs explicitly if they are using 'jsforce/core' instead of 'jsforce'.
  get analytics() {
    return raiseNoModuleError('analytics');
  }

  get apex() {
    return raiseNoModuleError('apex');
  }

  get bulk() {
    return raiseNoModuleError('bulk');
  }

  get chatter() {
    return raiseNoModuleError('chatter');
  }

  get metadata() {
    return raiseNoModuleError('metadata');
  }

  get soap() {
    return raiseNoModuleError('soap');
  }

  get streaming() {
    return raiseNoModuleError('streaming');
  }

  get tooling() {
    return raiseNoModuleError('tooling');
  }
  /**
   *
   */


  constructor(config = {}) {
    super();

    _defineProperty(this, "version", void 0);

    _defineProperty(this, "loginUrl", void 0);

    _defineProperty(this, "instanceUrl", void 0);

    _defineProperty(this, "accessToken", void 0);

    _defineProperty(this, "refreshToken", void 0);

    _defineProperty(this, "userInfo", void 0);

    _defineProperty(this, "limitInfo", {});

    _defineProperty(this, "oauth2", void 0);

    _defineProperty(this, "sobjects", {});

    _defineProperty(this, "cache", void 0);

    _defineProperty(this, "_callOptions", void 0);

    _defineProperty(this, "_maxRequest", void 0);

    _defineProperty(this, "_logger", void 0);

    _defineProperty(this, "_logLevel", void 0);

    _defineProperty(this, "_transport", void 0);

    _defineProperty(this, "_sessionType", void 0);

    _defineProperty(this, "_refreshDelegate", void 0);

    _defineProperty(this, "describe$", void 0);

    _defineProperty(this, "describe$$", void 0);

    _defineProperty(this, "describeSObject", void 0);

    _defineProperty(this, "describeSObject$", void 0);

    _defineProperty(this, "describeSObject$$", void 0);

    _defineProperty(this, "describeGlobal$", void 0);

    _defineProperty(this, "describeGlobal$$", void 0);

    _defineProperty(this, "insert", this.create);

    _defineProperty(this, "delete", this.destroy);

    _defineProperty(this, "del", this.destroy);

    _defineProperty(this, "process", new Process(this));

    const {
      loginUrl,
      instanceUrl,
      version,
      oauth2,
      maxRequest,
      logLevel,
      proxyUrl,
      httpProxy
    } = config;
    this.loginUrl = loginUrl || defaultConnectionConfig.loginUrl;
    this.instanceUrl = instanceUrl || defaultConnectionConfig.instanceUrl;
    this.version = version || defaultConnectionConfig.version;
    this.oauth2 = oauth2 instanceof OAuth2 ? oauth2 : new OAuth2(_objectSpread({
      loginUrl: this.loginUrl,
      proxyUrl,
      httpProxy
    }, oauth2));
    let refreshFn = config.refreshFn;

    if (!refreshFn && this.oauth2.clientId) {
      refreshFn = oauthRefreshFn;
    }

    if (refreshFn) {
      this._refreshDelegate = new SessionRefreshDelegate(this, refreshFn);
    }

    this._maxRequest = maxRequest || defaultConnectionConfig.maxRequest;
    this._logger = logLevel ? Connection._logger.createInstance(logLevel) : Connection._logger;
    this._logLevel = logLevel;
    this._transport = proxyUrl ? new XdProxyTransport(proxyUrl) : httpProxy ? new HttpProxyTransport(httpProxy) : new Transport();
    this._callOptions = config.callOptions;
    this.cache = new Cache();

    const describeCacheKey = type => type ? `describe.${type}` : 'describe';

    const describe = Connection.prototype.describe;
    this.describe = this.cache.createCachedFunction(describe, this, {
      key: describeCacheKey,
      strategy: 'NOCACHE'
    });
    this.describe$ = this.cache.createCachedFunction(describe, this, {
      key: describeCacheKey,
      strategy: 'HIT'
    });
    this.describe$$ = this.cache.createCachedFunction(describe, this, {
      key: describeCacheKey,
      strategy: 'IMMEDIATE'
    });
    this.describeSObject = this.describe;
    this.describeSObject$ = this.describe$;
    this.describeSObject$$ = this.describe$$;
    const describeGlobal = Connection.prototype.describeGlobal;
    this.describeGlobal = this.cache.createCachedFunction(describeGlobal, this, {
      key: 'describeGlobal',
      strategy: 'NOCACHE'
    });
    this.describeGlobal$ = this.cache.createCachedFunction(describeGlobal, this, {
      key: 'describeGlobal',
      strategy: 'HIT'
    });
    this.describeGlobal$$ = this.cache.createCachedFunction(describeGlobal, this, {
      key: 'describeGlobal',
      strategy: 'IMMEDIATE'
    });
    const {
      accessToken,
      refreshToken,
      sessionId,
      serverUrl,
      signedRequest
    } = config;

    this._establish({
      accessToken,
      refreshToken,
      instanceUrl,
      sessionId,
      serverUrl,
      signedRequest
    });

    jsforce.emit('connection:new', this);
  }
  /* @private */


  _establish(options) {
    var _context2;

    const {
      accessToken,
      refreshToken,
      instanceUrl,
      sessionId,
      serverUrl,
      signedRequest,
      userInfo
    } = options;
    this.instanceUrl = serverUrl ? _sliceInstanceProperty(_context2 = serverUrl.split('/')).call(_context2, 0, 3).join('/') : instanceUrl || this.instanceUrl;
    this.accessToken = sessionId || accessToken || this.accessToken;
    this.refreshToken = refreshToken || this.refreshToken;

    if (this.refreshToken && !this._refreshDelegate) {
      throw new Error('Refresh token is specified without oauth2 client information or refresh function');
    }

    const signedRequestObject = signedRequest && parseSignedRequest(signedRequest);

    if (signedRequestObject) {
      this.accessToken = signedRequestObject.client.oauthToken;

      if (CanvasTransport.supported) {
        this._transport = new CanvasTransport(signedRequestObject);
      }
    }

    this.userInfo = userInfo || this.userInfo;
    this._sessionType = sessionId ? 'soap' : 'oauth2';

    this._resetInstance();
  }
  /* @priveate */


  _clearSession() {
    this.accessToken = null;
    this.refreshToken = null;
    this.instanceUrl = defaultConnectionConfig.instanceUrl;
    this.userInfo = null;
    this._sessionType = null;
  }
  /* @priveate */


  _resetInstance() {
    this.limitInfo = {};
    this.sobjects = {}; // TODO impl cache

    this.cache.clear();
    this.cache.get('describeGlobal').removeAllListeners('value');
    this.cache.get('describeGlobal').on('value', ({
      result
    }) => {
      if (result) {
        for (const so of result.sobjects) {
          this.sobject(so.name);
        }
      }
    });
    /*
    if (this.tooling) {
      this.tooling._resetInstance();
    }
    */
  }
  /**
   * Authorize (using oauth2 web server flow)
   */


  async authorize(code, params = {}) {
    const res = await this.oauth2.requestToken(code, params);
    const userInfo = parseIdUrl(res.id);

    this._establish({
      instanceUrl: res.instance_url,
      accessToken: res.access_token,
      refreshToken: res.refresh_token,
      userInfo
    });

    this._logger.debug(`<login> completed. user id = ${userInfo.id}, org id = ${userInfo.organizationId}`);

    return userInfo;
  }
  /**
   *
   */


  async login(username, password) {
    this._refreshDelegate = new SessionRefreshDelegate(this, createUsernamePasswordRefreshFn(username, password));

    if (this.oauth2 && this.oauth2.clientId && this.oauth2.clientSecret) {
      return this.loginByOAuth2(username, password);
    }

    return this.loginBySoap(username, password);
  }
  /**
   * Login by OAuth2 username & password flow
   */


  async loginByOAuth2(username, password) {
    const res = await this.oauth2.authenticate(username, password);
    const userInfo = parseIdUrl(res.id);

    this._establish({
      instanceUrl: res.instance_url,
      accessToken: res.access_token,
      userInfo
    });

    this._logger.info(`<login> completed. user id = ${userInfo.id}, org id = ${userInfo.organizationId}`);

    return userInfo;
  }
  /**
   *
   */


  async loginBySoap(username, password) {
    var _context3;

    if (!username || !password) {
      return _Promise.reject(new Error('no username password given'));
    }

    const body = ['<se:Envelope xmlns:se="http://schemas.xmlsoap.org/soap/envelope/">', '<se:Header/>', '<se:Body>', '<login xmlns="urn:partner.soap.sforce.com">', `<username>${esc(username)}</username>`, `<password>${esc(password)}</password>`, '</login>', '</se:Body>', '</se:Envelope>'].join('');
    const soapLoginEndpoint = [this.loginUrl, 'services/Soap/u', this.version].join('/');
    const response = await this._transport.httpRequest({
      method: 'POST',
      url: soapLoginEndpoint,
      body,
      headers: {
        'Content-Type': 'text/xml',
        SOAPAction: '""'
      }
    });
    let m;

    if (response.statusCode >= 400) {
      m = response.body.match(/<faultstring>([^<]+)<\/faultstring>/);
      const faultstring = m && m[1];
      throw new Error(faultstring || response.body);
    }

    this._logger.debug(`SOAP response = ${response.body}`);

    m = response.body.match(/<serverUrl>([^<]+)<\/serverUrl>/);
    const serverUrl = m && m[1];
    m = response.body.match(/<sessionId>([^<]+)<\/sessionId>/);
    const sessionId = m && m[1];
    m = response.body.match(/<userId>([^<]+)<\/userId>/);
    const userId = m && m[1];
    m = response.body.match(/<organizationId>([^<]+)<\/organizationId>/);
    const organizationId = m && m[1];

    if (!serverUrl || !sessionId || !userId || !organizationId) {
      throw new Error('could not extract session information from login response');
    }

    const idUrl = [this.loginUrl, 'id', organizationId, userId].join('/');
    const userInfo = {
      id: userId,
      organizationId,
      url: idUrl
    };

    this._establish({
      serverUrl: _sliceInstanceProperty(_context3 = serverUrl.split('/')).call(_context3, 0, 3).join('/'),
      sessionId,
      userInfo
    });

    this._logger.info(`<login> completed. user id = ${userId}, org id = ${organizationId}`);

    return userInfo;
  }
  /**
   * Logout the current session
   */


  async logout(revoke) {
    this._refreshDelegate = undefined;

    if (this._sessionType === 'oauth2') {
      return this.logoutByOAuth2(revoke);
    }

    return this.logoutBySoap(revoke);
  }
  /**
   * Logout the current session by revoking access token via OAuth2 session revoke
   */


  async logoutByOAuth2(revoke) {
    const token = revoke ? this.refreshToken : this.accessToken;

    if (token) {
      await this.oauth2.revokeToken(token);
    } // Destroy the session bound to this connection


    this._clearSession();

    this._resetInstance();
  }
  /**
   * Logout the session by using SOAP web service API
   */


  async logoutBySoap(revoke) {
    const body = ['<se:Envelope xmlns:se="http://schemas.xmlsoap.org/soap/envelope/">', '<se:Header>', '<SessionHeader xmlns="urn:partner.soap.sforce.com">', `<sessionId>${esc(revoke ? this.refreshToken : this.accessToken)}</sessionId>`, '</SessionHeader>', '</se:Header>', '<se:Body>', '<logout xmlns="urn:partner.soap.sforce.com"/>', '</se:Body>', '</se:Envelope>'].join('');
    const response = await this._transport.httpRequest({
      method: 'POST',
      url: [this.instanceUrl, 'services/Soap/u', this.version].join('/'),
      body,
      headers: {
        'Content-Type': 'text/xml',
        SOAPAction: '""'
      }
    });

    this._logger.debug(`SOAP statusCode = ${response.statusCode}, response = ${response.body}`);

    if (response.statusCode >= 400) {
      const m = response.body.match(/<faultstring>([^<]+)<\/faultstring>/);
      const faultstring = m && m[1];
      throw new Error(faultstring || response.body);
    } // Destroy the session bound to this connection


    this._clearSession();

    this._resetInstance();
  }
  /**
   * Send REST API request with given HTTP request info, with connected session information.
   *
   * Endpoint URL can be absolute URL ('https://na1.salesforce.com/services/data/v32.0/sobjects/Account/describe')
   * , relative path from root ('/services/data/v32.0/sobjects/Account/describe')
   * , or relative path from version root ('/sobjects/Account/describe').
   */


  request(request, options = {}) {
    // if request is simple string, regard it as url in GET method
    let request_ = typeof request === 'string' ? {
      method: 'GET',
      url: request
    } : request; // if url is given in relative path, prepend base url or instance url before.

    request_ = _objectSpread(_objectSpread({}, request_), {}, {
      url: this._normalizeUrl(request_.url)
    });
    const httpApi = new HttpApi(this, options); // log api usage and its quota

    httpApi.on('response', response => {
      if (response.headers && response.headers['sforce-limit-info']) {
        const apiUsage = response.headers['sforce-limit-info'].match(/api-usage=(\d+)\/(\d+)/);

        if (apiUsage) {
          this.limitInfo = {
            apiUsage: {
              used: _parseInt(apiUsage[1], 10),
              limit: _parseInt(apiUsage[2], 10)
            }
          };
        }
      }
    });
    return httpApi.request(request_);
  }
  /**
   * Send HTTP GET request
   *
   * Endpoint URL can be absolute URL ('https://na1.salesforce.com/services/data/v32.0/sobjects/Account/describe')
   * , relative path from root ('/services/data/v32.0/sobjects/Account/describe')
   * , or relative path from version root ('/sobjects/Account/describe').
   */


  requestGet(url, options) {
    const request = {
      method: 'GET',
      url
    };
    return this.request(request, options);
  }
  /**
   * Send HTTP POST request with JSON body, with connected session information
   *
   * Endpoint URL can be absolute URL ('https://na1.salesforce.com/services/data/v32.0/sobjects/Account/describe')
   * , relative path from root ('/services/data/v32.0/sobjects/Account/describe')
   * , or relative path from version root ('/sobjects/Account/describe').
   */


  requestPost(url, body, options) {
    const request = {
      method: 'POST',
      url,
      body: _JSON$stringify(body),
      headers: {
        'content-type': 'application/json'
      }
    };
    return this.request(request, options);
  }
  /**
   * Send HTTP PUT request with JSON body, with connected session information
   *
   * Endpoint URL can be absolute URL ('https://na1.salesforce.com/services/data/v32.0/sobjects/Account/describe')
   * , relative path from root ('/services/data/v32.0/sobjects/Account/describe')
   * , or relative path from version root ('/sobjects/Account/describe').
   */


  requestPut(url, body, options) {
    const request = {
      method: 'PUT',
      url,
      body: _JSON$stringify(body),
      headers: {
        'content-type': 'application/json'
      }
    };
    return this.request(request, options);
  }
  /**
   * Send HTTP PATCH request with JSON body
   *
   * Endpoint URL can be absolute URL ('https://na1.salesforce.com/services/data/v32.0/sobjects/Account/describe')
   * , relative path from root ('/services/data/v32.0/sobjects/Account/describe')
   * , or relative path from version root ('/sobjects/Account/describe').
   */


  requestPatch(url, body, options) {
    const request = {
      method: 'PATCH',
      url,
      body: _JSON$stringify(body),
      headers: {
        'content-type': 'application/json'
      }
    };
    return this.request(request, options);
  }
  /**
   * Send HTTP DELETE request
   *
   * Endpoint URL can be absolute URL ('https://na1.salesforce.com/services/data/v32.0/sobjects/Account/describe')
   * , relative path from root ('/services/data/v32.0/sobjects/Account/describe')
   * , or relative path from version root ('/sobjects/Account/describe').
   */


  requestDelete(url, options) {
    const request = {
      method: 'DELETE',
      url
    };
    return this.request(request, options);
  }
  /** @private **/


  _baseUrl() {
    return [this.instanceUrl, 'services/data', `v${this.version}`].join('/');
  }
  /**
   * Convert path to absolute url
   * @private
   */


  _normalizeUrl(url) {
    if (url[0] === '/') {
      if (_indexOfInstanceProperty(url).call(url, this.instanceUrl + '/services/') === 0) {
        return url;
      }

      if (_indexOfInstanceProperty(url).call(url, '/services/') === 0) {
        return this.instanceUrl + url;
      }

      return this._baseUrl() + url;
    }

    return url;
  }
  /**
   *
   */


  query(soql, options) {
    return new Query(this, soql, options);
  }
  /**
   * Execute search by SOSL
   *
   * @param {String} sosl - SOSL string
   * @param {Callback.<Array.<RecordResult>>} [callback] - Callback function
   * @returns {Promise.<Array.<RecordResult>>}
   */


  search(sosl) {
    var url = this._baseUrl() + '/search?q=' + encodeURIComponent(sosl);
    return this.request(url);
  }
  /**
   *
   */


  queryMore(locator, options) {
    return new Query(this, {
      locator
    }, options);
  }
  /* */


  _ensureVersion(majorVersion) {
    const versions = this.version.split('.');
    return _parseInt(versions[0], 10) >= majorVersion;
  }
  /* */


  _supports(feature) {
    switch (feature) {
      case 'sobject-collection':
        // sobject collection is available only in API ver 42.0+
        return this._ensureVersion(42);

      default:
        return false;
    }
  }
  /**
   * Retrieve specified records
   */


  async retrieve(type, ids, options = {}) {
    return _Array$isArray(ids) ? // check the version whether SObject collection API is supported (42.0)
    this._ensureVersion(42) ? this._retrieveMany(type, ids, options) : this._retrieveParallel(type, ids, options) : this._retrieveSingle(type, ids, options);
  }
  /** @private */


  async _retrieveSingle(type, id, options) {
    if (!id) {
      throw new Error('Invalid record ID. Specify valid record ID value');
    }

    let url = [this._baseUrl(), 'sobjects', type, id].join('/');
    const {
      fields,
      headers
    } = options;

    if (fields) {
      url += `?fields=${fields.join(',')}`;
    }

    return this.request({
      method: 'GET',
      url,
      headers
    });
  }
  /** @private */


  async _retrieveParallel(type, ids, options) {
    if (ids.length > this._maxRequest) {
      throw new Error('Exceeded max limit of concurrent call');
    }

    return _Promise.all(_mapInstanceProperty(ids).call(ids, id => this._retrieveSingle(type, id, options).catch(err => {
      if (options.allOrNone || err.errorCode !== 'NOT_FOUND') {
        throw err;
      }

      return null;
    })));
  }
  /** @private */


  async _retrieveMany(type, ids, options) {
    var _context4;

    if (ids.length === 0) {
      return [];
    }

    const url = [this._baseUrl(), 'composite', 'sobjects', type].join('/');

    const fields = options.fields || _mapInstanceProperty(_context4 = (await this.describe$(type)).fields).call(_context4, field => field.name);

    return this.request({
      method: 'POST',
      url,
      body: _JSON$stringify({
        ids,
        fields
      }),
      headers: _objectSpread(_objectSpread({}, options.headers || {}), {}, {
        'content-type': 'application/json'
      })
    });
  }
  /**
   * Create records
   */


  /**
   * @param type
   * @param records
   * @param options
   */
  async create(type, records, options = {}) {
    const ret = _Array$isArray(records) ? // check the version whether SObject collection API is supported (42.0)
    this._ensureVersion(42) ? await this._createMany(type, records, options) : await this._createParallel(type, records, options) : await this._createSingle(type, records, options);
    return ret;
  }
  /** @private */


  async _createSingle(type, record, options) {
    const {
      Id,
      type: rtype,
      attributes
    } = record,
          rec = _objectWithoutProperties(record, ["Id", "type", "attributes"]);

    const sobjectType = type || attributes && attributes.type || rtype;

    if (!sobjectType) {
      throw new Error('No SObject Type defined in record');
    }

    const url = [this._baseUrl(), 'sobjects', sobjectType].join('/');
    return this.request({
      method: 'POST',
      url,
      body: _JSON$stringify(rec),
      headers: _objectSpread(_objectSpread({}, options.headers || {}), {}, {
        'content-type': 'application/json'
      })
    });
  }
  /** @private */


  async _createParallel(type, records, options) {
    if (records.length > this._maxRequest) {
      throw new Error('Exceeded max limit of concurrent call');
    }

    return _Promise.all(_mapInstanceProperty(records).call(records, record => this._createSingle(type, record, options).catch(err => {
      // be aware that allOrNone in parallel mode will not revert the other successful requests
      // it only raises error when met at least one failed request.
      if (options.allOrNone || !err.errorCode) {
        throw err;
      }

      return toSaveResult(err);
    })));
  }
  /** @private */


  async _createMany(type, records, options) {
    if (records.length === 0) {
      return _Promise.resolve([]);
    }

    if (records.length > MAX_DML_COUNT && options.allowRecursive) {
      return [...(await this._createMany(type, _sliceInstanceProperty(records).call(records, 0, MAX_DML_COUNT), options)), ...(await this._createMany(type, _sliceInstanceProperty(records).call(records, MAX_DML_COUNT), options))];
    }

    const _records = _mapInstanceProperty(records).call(records, record => {
      const {
        Id,
        type: rtype,
        attributes
      } = record,
            rec = _objectWithoutProperties(record, ["Id", "type", "attributes"]);

      const sobjectType = type || attributes && attributes.type || rtype;

      if (!sobjectType) {
        throw new Error('No SObject Type defined in record');
      }

      return _objectSpread({
        attributes: {
          type: sobjectType
        }
      }, rec);
    });

    const url = [this._baseUrl(), 'composite', 'sobjects'].join('/');
    return this.request({
      method: 'POST',
      url,
      body: _JSON$stringify({
        allOrNone: options.allOrNone || false,
        records: _records
      }),
      headers: _objectSpread(_objectSpread({}, options.headers || {}), {}, {
        'content-type': 'application/json'
      })
    });
  }
  /**
   * Synonym of Connection#create()
   */


  /**
   * @param type
   * @param records
   * @param options
   */
  update(type, records, options = {}) {
    return _Array$isArray(records) ? // check the version whether SObject collection API is supported (42.0)
    this._ensureVersion(42) ? this._updateMany(type, records, options) : this._updateParallel(type, records, options) : this._updateSingle(type, records, options);
  }
  /** @private */


  async _updateSingle(type, record, options) {
    const {
      Id: id,
      type: rtype,
      attributes
    } = record,
          rec = _objectWithoutProperties(record, ["Id", "type", "attributes"]);

    if (!id) {
      throw new Error('Record id is not found in record.');
    }

    const sobjectType = type || attributes && attributes.type || rtype;

    if (!sobjectType) {
      throw new Error('No SObject Type defined in record');
    }

    const url = [this._baseUrl(), 'sobjects', sobjectType, id].join('/');
    return this.request({
      method: 'PATCH',
      url,
      body: _JSON$stringify(rec),
      headers: _objectSpread(_objectSpread({}, options.headers || {}), {}, {
        'content-type': 'application/json'
      })
    }, {
      noContentResponse: {
        id,
        success: true,
        errors: []
      }
    });
  }
  /** @private */


  async _updateParallel(type, records, options) {
    if (records.length > this._maxRequest) {
      throw new Error('Exceeded max limit of concurrent call');
    }

    return _Promise.all(_mapInstanceProperty(records).call(records, record => this._updateSingle(type, record, options).catch(err => {
      // be aware that allOrNone in parallel mode will not revert the other successful requests
      // it only raises error when met at least one failed request.
      if (options.allOrNone || !err.errorCode) {
        throw err;
      }

      return toSaveResult(err);
    })));
  }
  /** @private */


  async _updateMany(type, records, options) {
    if (records.length === 0) {
      return [];
    }

    if (records.length > MAX_DML_COUNT && options.allowRecursive) {
      return [...(await this._updateMany(type, _sliceInstanceProperty(records).call(records, 0, MAX_DML_COUNT), options)), ...(await this._updateMany(type, _sliceInstanceProperty(records).call(records, MAX_DML_COUNT), options))];
    }

    const _records = _mapInstanceProperty(records).call(records, record => {
      const {
        Id: id,
        type: rtype,
        attributes
      } = record,
            rec = _objectWithoutProperties(record, ["Id", "type", "attributes"]);

      if (!id) {
        throw new Error('Record id is not found in record.');
      }

      const sobjectType = type || attributes && attributes.type || rtype;

      if (!sobjectType) {
        throw new Error('No SObject Type defined in record');
      }

      return _objectSpread({
        id,
        attributes: {
          type: sobjectType
        }
      }, rec);
    });

    const url = [this._baseUrl(), 'composite', 'sobjects'].join('/');
    return this.request({
      method: 'PATCH',
      url,
      body: _JSON$stringify({
        allOrNone: options.allOrNone || false,
        records: _records
      }),
      headers: _objectSpread(_objectSpread({}, options.headers || {}), {}, {
        'content-type': 'application/json'
      })
    });
  }
  /**
   * Upsert records
   */


  /**
   *
   * @param type
   * @param records
   * @param extIdField
   * @param options
   */
  async upsert(type, records, extIdField, options = {}) {
    const isArray = _Array$isArray(records);

    const _records = _Array$isArray(records) ? records : [records];

    if (_records.length > this._maxRequest) {
      throw new Error('Exceeded max limit of concurrent call');
    }

    const results = await _Promise.all(_mapInstanceProperty(_records).call(_records, record => {
      var _context5;

      const {
        [extIdField]: extId,
        type: rtype,
        attributes
      } = record,
            rec = _objectWithoutProperties(record, _mapInstanceProperty(_context5 = [extIdField, "type", "attributes"]).call(_context5, _toPropertyKey));

      const url = [this._baseUrl(), 'sobjects', type, extIdField, extId].join('/');
      return this.request({
        method: 'PATCH',
        url,
        body: _JSON$stringify(rec),
        headers: _objectSpread(_objectSpread({}, options.headers || {}), {}, {
          'content-type': 'application/json'
        })
      }, {
        noContentResponse: {
          success: true,
          errors: []
        }
      }).catch(err => {
        // Be aware that `allOrNone` option in upsert method
        // will not revert the other successful requests.
        // It only raises error when met at least one failed request.
        if (!isArray || options.allOrNone || !err.errorCode) {
          throw err;
        }

        return toSaveResult(err);
      });
    }));
    return isArray ? results : results[0];
  }
  /**
   * Delete records
   */


  /**
   * @param type
   * @param ids
   * @param options
   */
  async destroy(type, ids, options = {}) {
    return _Array$isArray(ids) ? // check the version whether SObject collection API is supported (42.0)
    this._ensureVersion(42) ? this._destroyMany(type, ids, options) : this._destroyParallel(type, ids, options) : this._destroySingle(type, ids, options);
  }
  /** @private */


  async _destroySingle(type, id, options) {
    const url = [this._baseUrl(), 'sobjects', type, id].join('/');
    return this.request({
      method: 'DELETE',
      url,
      headers: options.headers || {}
    }, {
      noContentResponse: {
        id,
        success: true,
        errors: []
      }
    });
  }
  /** @private */


  async _destroyParallel(type, ids, options) {
    if (ids.length > this._maxRequest) {
      throw new Error('Exceeded max limit of concurrent call');
    }

    return _Promise.all(_mapInstanceProperty(ids).call(ids, id => this._destroySingle(type, id, options).catch(err => {
      // Be aware that `allOrNone` option in parallel mode
      // will not revert the other successful requests.
      // It only raises error when met at least one failed request.
      if (options.allOrNone || !err.errorCode) {
        throw err;
      }

      return toSaveResult(err);
    })));
  }
  /** @private */


  async _destroyMany(type, ids, options) {
    if (ids.length === 0) {
      return [];
    }

    if (ids.length > MAX_DML_COUNT && options.allowRecursive) {
      return [...(await this._destroyMany(type, _sliceInstanceProperty(ids).call(ids, 0, MAX_DML_COUNT), options)), ...(await this._destroyMany(type, _sliceInstanceProperty(ids).call(ids, MAX_DML_COUNT), options))];
    }

    let url = [this._baseUrl(), 'composite', 'sobjects?ids='].join('/') + ids.join(',');

    if (options.allOrNone) {
      url += '&allOrNone=true';
    }

    return this.request({
      method: 'DELETE',
      url,
      headers: options.headers || {}
    });
  }
  /**
   * Synonym of Connection#destroy()
   */


  /**
   * Describe SObject metadata
   */
  async describe(type) {
    const url = [this._baseUrl(), 'sobjects', type, 'describe'].join('/');
    const body = await this.request(url);
    return body;
  }
  /**
   * Describe global SObjects
   */


  async describeGlobal() {
    const url = `${this._baseUrl()}/sobjects`;
    const body = await this.request(url);
    return body;
  }
  /**
   * Get SObject instance
   */


  sobject(type) {
    const so = this.sobjects[type] || new SObject(this, type);
    this.sobjects[type] = so;
    return so;
  }
  /**
   * Get identity information of current user
   */


  async identity(options = {}) {
    let url = this.userInfo && this.userInfo.url;

    if (!url) {
      const res = await this.request({
        method: 'GET',
        url: this._baseUrl(),
        headers: options.headers
      });
      url = res.identity;
    }

    url += '?format=json';

    if (this.accessToken) {
      url += `&oauth_token=${encodeURIComponent(this.accessToken)}`;
    }

    const res = await this.request({
      method: 'GET',
      url
    });
    this.userInfo = {
      id: res.user_id,
      organizationId: res.organization_id,
      url: res.id
    };
    return res;
  }
  /**
   * List recently viewed records
   */


  async recent(type, limit) {
    /* eslint-disable no-param-reassign */
    if (typeof type === 'number') {
      limit = type;
      type = undefined;
    }

    let url;

    if (type) {
      url = [this._baseUrl(), 'sobjects', type].join('/');
      const {
        recentItems
      } = await this.request(url);
      return limit ? _sliceInstanceProperty(recentItems).call(recentItems, 0, limit) : recentItems;
    }

    url = `${this._baseUrl()}/recent`;

    if (limit) {
      url += `?limit=${limit}`;
    }

    return this.request(url);
  }
  /**
   * Retrieve updated records
   */


  async updated(type, start, end) {
    /* eslint-disable no-param-reassign */
    let url = [this._baseUrl(), 'sobjects', type, 'updated'].join('/');

    if (typeof start === 'string') {
      start = new Date(start);
    }

    start = formatDate(start);
    url += `?start=${encodeURIComponent(start)}`;

    if (typeof end === 'string') {
      end = new Date(end);
    }

    end = formatDate(end);
    url += `&end=${encodeURIComponent(end)}`;
    const body = await this.request(url);
    return body;
  }
  /**
   * Retrieve deleted records
   */


  async deleted(type, start, end) {
    /* eslint-disable no-param-reassign */
    let url = [this._baseUrl(), 'sobjects', type, 'deleted'].join('/');

    if (typeof start === 'string') {
      start = new Date(start);
    }

    start = formatDate(start);
    url += `?start=${encodeURIComponent(start)}`;

    if (typeof end === 'string') {
      end = new Date(end);
    }

    end = formatDate(end);
    url += `&end=${encodeURIComponent(end)}`;
    const body = await this.request(url);
    return body;
  }
  /**
   * Returns a list of all tabs
   */


  async tabs() {
    const url = [this._baseUrl(), 'tabs'].join('/');
    const body = await this.request(url);
    return body;
  }
  /**
   * Returns current system limit in the organization
   */


  async limits() {
    const url = [this._baseUrl(), 'limits'].join('/');
    const body = await this.request(url);
    return body;
  }
  /**
   * Returns a theme info
   */


  async theme() {
    const url = [this._baseUrl(), 'theme'].join('/');
    const body = await this.request(url);
    return body;
  }
  /**
   * Returns all registered global quick actions
   */


  async quickActions() {
    const body = await this.request('/quickActions');
    return body;
  }
  /**
   * Get reference for specified global quick action
   */


  quickAction(actionName) {
    return new QuickAction(this, `/quickActions/${actionName}`);
  }
  /**
   * Module which manages process rules and approval processes
   */


}

_defineProperty(Connection, "_logger", getLogger('connection'));

export default Connection;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jb25uZWN0aW9uLnRzIl0sIm5hbWVzIjpbIkV2ZW50RW1pdHRlciIsImpzZm9yY2UiLCJUcmFuc3BvcnQiLCJDYW52YXNUcmFuc3BvcnQiLCJYZFByb3h5VHJhbnNwb3J0IiwiSHR0cFByb3h5VHJhbnNwb3J0IiwiZ2V0TG9nZ2VyIiwiT0F1dGgyIiwiQ2FjaGUiLCJIdHRwQXBpIiwiU2Vzc2lvblJlZnJlc2hEZWxlZ2F0ZSIsIlF1ZXJ5IiwiU09iamVjdCIsIlF1aWNrQWN0aW9uIiwiUHJvY2VzcyIsImZvcm1hdERhdGUiLCJkZWZhdWx0Q29ubmVjdGlvbkNvbmZpZyIsImxvZ2luVXJsIiwiaW5zdGFuY2VVcmwiLCJ2ZXJzaW9uIiwibG9nTGV2ZWwiLCJtYXhSZXF1ZXN0IiwiZXNjIiwic3RyIiwiU3RyaW5nIiwicmVwbGFjZSIsInBhcnNlU2lnbmVkUmVxdWVzdCIsInNyIiwiSlNPTiIsInBhcnNlIiwibXNnIiwic3BsaXQiLCJwb3AiLCJFcnJvciIsImpzb24iLCJCdWZmZXIiLCJmcm9tIiwidG9TdHJpbmciLCJwYXJzZUlkVXJsIiwidXJsIiwib3JnYW5pemF0aW9uSWQiLCJpZCIsIm9hdXRoUmVmcmVzaEZuIiwiY29ubiIsImNhbGxiYWNrIiwicmVmcmVzaFRva2VuIiwicmVzIiwib2F1dGgyIiwidXNlckluZm8iLCJfZXN0YWJsaXNoIiwiaW5zdGFuY2VfdXJsIiwiYWNjZXNzVG9rZW4iLCJhY2Nlc3NfdG9rZW4iLCJ1bmRlZmluZWQiLCJlcnIiLCJjcmVhdGVVc2VybmFtZVBhc3N3b3JkUmVmcmVzaEZuIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImxvZ2luIiwidG9TYXZlUmVzdWx0Iiwic3VjY2VzcyIsImVycm9ycyIsInJhaXNlTm9Nb2R1bGVFcnJvciIsIm5hbWUiLCJNQVhfRE1MX0NPVU5UIiwiQ29ubmVjdGlvbiIsImFuYWx5dGljcyIsImFwZXgiLCJidWxrIiwiY2hhdHRlciIsIm1ldGFkYXRhIiwic29hcCIsInN0cmVhbWluZyIsInRvb2xpbmciLCJjb25zdHJ1Y3RvciIsImNvbmZpZyIsImNyZWF0ZSIsImRlc3Ryb3kiLCJwcm94eVVybCIsImh0dHBQcm94eSIsInJlZnJlc2hGbiIsImNsaWVudElkIiwiX3JlZnJlc2hEZWxlZ2F0ZSIsIl9tYXhSZXF1ZXN0IiwiX2xvZ2dlciIsImNyZWF0ZUluc3RhbmNlIiwiX2xvZ0xldmVsIiwiX3RyYW5zcG9ydCIsIl9jYWxsT3B0aW9ucyIsImNhbGxPcHRpb25zIiwiY2FjaGUiLCJkZXNjcmliZUNhY2hlS2V5IiwidHlwZSIsImRlc2NyaWJlIiwicHJvdG90eXBlIiwiY3JlYXRlQ2FjaGVkRnVuY3Rpb24iLCJrZXkiLCJzdHJhdGVneSIsImRlc2NyaWJlJCIsImRlc2NyaWJlJCQiLCJkZXNjcmliZVNPYmplY3QiLCJkZXNjcmliZVNPYmplY3QkIiwiZGVzY3JpYmVTT2JqZWN0JCQiLCJkZXNjcmliZUdsb2JhbCIsImRlc2NyaWJlR2xvYmFsJCIsImRlc2NyaWJlR2xvYmFsJCQiLCJzZXNzaW9uSWQiLCJzZXJ2ZXJVcmwiLCJzaWduZWRSZXF1ZXN0IiwiZW1pdCIsIm9wdGlvbnMiLCJqb2luIiwic2lnbmVkUmVxdWVzdE9iamVjdCIsImNsaWVudCIsIm9hdXRoVG9rZW4iLCJzdXBwb3J0ZWQiLCJfc2Vzc2lvblR5cGUiLCJfcmVzZXRJbnN0YW5jZSIsIl9jbGVhclNlc3Npb24iLCJsaW1pdEluZm8iLCJzb2JqZWN0cyIsImNsZWFyIiwiZ2V0IiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwib24iLCJyZXN1bHQiLCJzbyIsInNvYmplY3QiLCJhdXRob3JpemUiLCJjb2RlIiwicGFyYW1zIiwicmVxdWVzdFRva2VuIiwicmVmcmVzaF90b2tlbiIsImRlYnVnIiwiY2xpZW50U2VjcmV0IiwibG9naW5CeU9BdXRoMiIsImxvZ2luQnlTb2FwIiwiYXV0aGVudGljYXRlIiwiaW5mbyIsInJlamVjdCIsImJvZHkiLCJzb2FwTG9naW5FbmRwb2ludCIsInJlc3BvbnNlIiwiaHR0cFJlcXVlc3QiLCJtZXRob2QiLCJoZWFkZXJzIiwiU09BUEFjdGlvbiIsIm0iLCJzdGF0dXNDb2RlIiwibWF0Y2giLCJmYXVsdHN0cmluZyIsInVzZXJJZCIsImlkVXJsIiwibG9nb3V0IiwicmV2b2tlIiwibG9nb3V0QnlPQXV0aDIiLCJsb2dvdXRCeVNvYXAiLCJ0b2tlbiIsInJldm9rZVRva2VuIiwicmVxdWVzdCIsInJlcXVlc3RfIiwiX25vcm1hbGl6ZVVybCIsImh0dHBBcGkiLCJhcGlVc2FnZSIsInVzZWQiLCJsaW1pdCIsInJlcXVlc3RHZXQiLCJyZXF1ZXN0UG9zdCIsInJlcXVlc3RQdXQiLCJyZXF1ZXN0UGF0Y2giLCJyZXF1ZXN0RGVsZXRlIiwiX2Jhc2VVcmwiLCJxdWVyeSIsInNvcWwiLCJzZWFyY2giLCJzb3NsIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicXVlcnlNb3JlIiwibG9jYXRvciIsIl9lbnN1cmVWZXJzaW9uIiwibWFqb3JWZXJzaW9uIiwidmVyc2lvbnMiLCJfc3VwcG9ydHMiLCJmZWF0dXJlIiwicmV0cmlldmUiLCJpZHMiLCJfcmV0cmlldmVNYW55IiwiX3JldHJpZXZlUGFyYWxsZWwiLCJfcmV0cmlldmVTaW5nbGUiLCJmaWVsZHMiLCJsZW5ndGgiLCJhbGwiLCJjYXRjaCIsImFsbE9yTm9uZSIsImVycm9yQ29kZSIsImZpZWxkIiwicmVjb3JkcyIsInJldCIsIl9jcmVhdGVNYW55IiwiX2NyZWF0ZVBhcmFsbGVsIiwiX2NyZWF0ZVNpbmdsZSIsInJlY29yZCIsIklkIiwicnR5cGUiLCJhdHRyaWJ1dGVzIiwicmVjIiwic29iamVjdFR5cGUiLCJyZXNvbHZlIiwiYWxsb3dSZWN1cnNpdmUiLCJfcmVjb3JkcyIsInVwZGF0ZSIsIl91cGRhdGVNYW55IiwiX3VwZGF0ZVBhcmFsbGVsIiwiX3VwZGF0ZVNpbmdsZSIsIm5vQ29udGVudFJlc3BvbnNlIiwidXBzZXJ0IiwiZXh0SWRGaWVsZCIsImlzQXJyYXkiLCJyZXN1bHRzIiwiZXh0SWQiLCJfZGVzdHJveU1hbnkiLCJfZGVzdHJveVBhcmFsbGVsIiwiX2Rlc3Ryb3lTaW5nbGUiLCJpZGVudGl0eSIsInVzZXJfaWQiLCJvcmdhbml6YXRpb25faWQiLCJyZWNlbnQiLCJyZWNlbnRJdGVtcyIsInVwZGF0ZWQiLCJzdGFydCIsImVuZCIsIkRhdGUiLCJkZWxldGVkIiwidGFicyIsImxpbWl0cyIsInRoZW1lIiwicXVpY2tBY3Rpb25zIiwicXVpY2tBY3Rpb24iLCJhY3Rpb25OYW1lIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQSxTQUFTQSxZQUFULFFBQTZCLFFBQTdCO0FBQ0EsT0FBT0MsT0FBUCxNQUFvQixXQUFwQjtBQWdDQSxPQUFPQyxTQUFQLElBQ0VDLGVBREYsRUFFRUMsZ0JBRkYsRUFHRUMsa0JBSEYsUUFJTyxhQUpQO0FBS0EsU0FBaUJDLFNBQWpCLFFBQWtDLGVBQWxDO0FBRUEsT0FBT0MsTUFBUCxNQUFzQyxVQUF0QztBQUVBLE9BQU9DLEtBQVAsTUFBc0MsU0FBdEM7QUFDQSxPQUFPQyxPQUFQLE1BQW9CLFlBQXBCO0FBQ0EsT0FBT0Msc0JBQVAsTUFFTyw0QkFGUDtBQUdBLE9BQU9DLEtBQVAsTUFBa0IsU0FBbEI7QUFFQSxPQUFPQyxPQUFQLE1BQW9CLFdBQXBCO0FBQ0EsT0FBT0MsV0FBUCxNQUF3QixnQkFBeEI7QUFDQSxPQUFPQyxPQUFQLE1BQW9CLFdBQXBCO0FBQ0EsU0FBU0MsVUFBVCxRQUEyQixrQkFBM0I7O0FBeUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU1DLHVCQU1MLEdBQUc7QUFDRkMsRUFBQUEsUUFBUSxFQUFFLDhCQURSO0FBRUZDLEVBQUFBLFdBQVcsRUFBRSxFQUZYO0FBR0ZDLEVBQUFBLE9BQU8sRUFBRSxNQUhQO0FBSUZDLEVBQUFBLFFBQVEsRUFBRSxNQUpSO0FBS0ZDLEVBQUFBLFVBQVUsRUFBRTtBQUxWLENBTko7QUFjQTtBQUNBO0FBQ0E7O0FBQ0EsU0FBU0MsR0FBVCxDQUFhQyxHQUFiLEVBQTRDO0FBQzFDLFNBQU9DLE1BQU0sQ0FB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RDtBQUNGO0FBQ0E7OztBQUNFaUcsRUFBQUEsV0FBVyxDQUFDQyxVQUFELEVBQXFDO0FBQzlDLFdBQU8sSUFBSWpPLFdBQUosQ0FBZ0IsSUFBaEIsRUFBdUIsaUJBQWdCaU8sVUFBVyxFQUFsRCxDQUFQO0FBQ0Q7QUFFRDtBQUNGO0FBQ0E7OztBQS95Q3dFOztnQkFBM0Q3SyxVLGFBQ00zRCxTQUFTLENBQUMsWUFBRCxDOztBQWt6QzVCLGVBQWUyRCxVQUFmIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKlxuICovXG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdldmVudHMnO1xuaW1wb3J0IGpzZm9yY2UgZnJvbSAnLi9qc2ZvcmNlJztcbmltcG9ydCB7XG4gIEh0dHBSZXF1ZXN0LFxuICBIdHRwUmVzcG9uc2UsXG4gIENhbGxiYWNrLFxuICBSZWNvcmQsXG4gIFNhdmVSZXN1bHQsXG4gIFVwc2VydFJlc3VsdCxcbiAgRGVzY3JpYmVHbG9iYWxSZXN1bHQsXG4gIERlc2NyaWJlU09iamVjdFJlc3VsdCxcbiAgRGVzY3JpYmVUYWIsXG4gIERlc2NyaWJlVGhlbWUsXG4gIERlc2NyaWJlUXVpY2tBY3Rpb25SZXN1bHQsXG4gIFVwZGF0ZWRSZXN1bHQsXG4gIERlbGV0ZWRSZXN1bHQsXG4gIFNlYXJjaFJlc3VsdCxcbiAgT3JnYW5pemF0aW9uTGltaXRzSW5mbyxcbiAgT3B0aW9uYWwsXG4gIFNpZ25lZFJlcXVlc3RPYmplY3QsXG4gIFNhdmVFcnJvcixcbiAgRG1sT3B0aW9ucyxcbiAgUmV0cmlldmVPcHRpb25zLFxuICBTY2hlbWEsXG4gIFNPYmplY3ROYW1lcyxcbiAgU09iamVjdElucHV0UmVjb3JkLFxuICBTT2JqZWN0VXBkYXRlUmVjb3JkLFxuICBTT2JqZWN0RmllbGROYW1lcyxcbiAgVXNlckluZm8sXG4gIElkZW50aXR5SW5mbyxcbiAgTGltaXRJbmZvLFxufSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IFN0cmVhbVByb21pc2UgfSBmcm9tICcuL3V0aWwvcHJvbWlzZSc7XG5pbXBvcnQgVHJhbnNwb3J0LCB7XG4gIENhbnZhc1RyYW5zcG9ydCxcbiAgWGRQcm94eVRyYW5zcG9ydCxcbiAgSHR0cFByb3h5VHJhbnNwb3J0LFxufSBmcm9tICcuL3RyYW5zcG9ydCc7XG5pbXBvcnQgeyBMb2dnZXIsIGdldExvZ2dlciB9IGZyb20gJy4vdXRpbC9sb2dnZXInO1xuaW1wb3J0IHsgTG9nTGV2ZWxDb25maWcgfSBmcm9tICcuL3V0aWwvbG9nZ2VyJztcbmltcG9ydCBPQXV0aDIsIHsgVG9rZW5SZXNwb25zZSB9IGZyb20gJy4vb2F1dGgyJztcbmltcG9ydCB7IE9BdXRoMkNvbmZpZyB9IGZyb20gJy4vb2F1dGgyJztcbmltcG9ydCBDYWNoZSwgeyBDYWNoZWRGdW5jdGlvbiB9IGZyb20gJy4vY2FjaGUnO1xuaW1wb3J0IEh0dHBBcGkgZnJvbSAnLi9odHRwLWFwaSc7XG5pbXBvcnQgU2Vzc2lvblJlZnJlc2hEZWxlZ2F0ZSwge1xuICBTZXNzaW9uUmVmcmVzaEZ1bmMsXG59IGZyb20gJy4vc2Vzc2lvbi1yZWZyZXNoLWRlbGVnYXRlJztcbmltcG9ydCBRdWVyeSBmcm9tICcuL3F1ZXJ5JztcbmltcG9ydCB7IFF1ZXJ5T3B0aW9ucyB9IGZyb20gJy4vcXVlcnknO1xuaW1wb3J0IFNPYmplY3QgZnJvbSAnLi9zb2JqZWN0JztcbmltcG9ydCBRdWlja0FjdGlvbiBmcm9tICcuL3F1aWNrLWFjdGlvbic7XG5pbXBvcnQgUHJvY2VzcyBmcm9tICcuL3Byb2Nlc3MnO1xuaW1wb3J0IHsgZm9ybWF0RGF0ZSB9IGZyb20gJy4vdXRpbC9mb3JtYXR0ZXInO1xuaW1wb3J0IEFuYWx5dGljcyBmcm9tICcuL2FwaS9hbmFseXRpY3MnO1xuaW1wb3J0IEFwZXggZnJvbSAnLi9hcGkvYXBleCc7XG5pbXBvcnQgQnVsayBmcm9tICcuL2FwaS9idWxrJztcbmltcG9ydCBDaGF0dGVyIGZyb20gJy4vYXBpL2NoYXR0ZXInO1xuaW1wb3J0IE1ldGFkYXRhIGZyb20gJy4vYXBpL21ldGFkYXRhJztcbmltcG9ydCBTb2FwQXBpIGZyb20gJy4vYXBpL3NvYXAnO1xuaW1wb3J0IFN0cmVhbWluZyBmcm9tICcuL2FwaS9zdHJlYW1pbmcnO1xuaW1wb3J0IFRvb2xpbmcgZnJvbSAnLi9hcGkvdG9vbGluZyc7XG5cbi8qKlxuICogdHlwZSBkZWZpbml0aW9uc1xuICovXG5leHBvcnQgdHlwZSBDb25uZWN0aW9uQ29uZmlnPFMgZXh0ZW5kcyBTY2hlbWEgPSBTY2hlbWE+ID0ge1xuICB2ZXJzaW9uPzogc3RyaW5nO1xuICBsb2dpblVybD86IHN0cmluZztcbiAgYWNjZXNzVG9rZW4/OiBzdHJpbmc7XG4gIHJlZnJlc2hUb2tlbj86IHN0cmluZztcbiAgaW5zdGFuY2VVcmw/OiBzdHJpbmc7XG4gIHNlc3Npb25JZD86IHN0cmluZztcbiAgc2VydmVyVXJsPzogc3RyaW5nO1xuICBzaWduZWRSZXF1ZXN0Pzogc3RyaW5nO1xuICBvYXV0aDI/OiBPQXV0aDIgfCBPQXV0aDJDb25maWc7XG4gIG1heFJlcXVlc3Q/OiBudW1iZXI7XG4gIHByb3h5VXJsPzogc3RyaW5nO1xuICBodHRwUHJveHk/OiBzdHJpbmc7XG4gIGxvZ0xldmVsPzogTG9nTGV2ZWxDb25maWc7XG4gIGNhbGxPcHRpb25zPzogeyBbbmFtZTogc3RyaW5nXTogc3RyaW5nIH07XG4gIHJlZnJlc2hGbj86IFNlc3Npb25SZWZyZXNoRnVuYzxTPjtcbn07XG5cbmV4cG9ydCB0eXBlIENvbm5lY3Rpb25Fc3RhYmxpc2hPcHRpb25zID0ge1xuICBhY2Nlc3NUb2tlbj86IE9wdGlvbmFsPHN0cmluZz47XG4gIHJlZnJlc2hUb2tlbj86IE9wdGlvbmFsPHN0cmluZz47XG4gIGluc3RhbmNlVXJsPzogT3B0aW9uYWw8c3RyaW5nPjtcbiAgc2Vzc2lvbklkPzogT3B0aW9uYWw8c3RyaW5nPjtcbiAgc2VydmVyVXJsPzogT3B0aW9uYWw8c3RyaW5nPjtcbiAgc2lnbmVkUmVxdWVzdD86IE9wdGlvbmFsPHN0cmluZyB8IFNpZ25lZFJlcXVlc3RPYmplY3Q+O1xuICB1c2VySW5mbz86IE9wdGlvbmFsPFVzZXJJbmZvPjtcbn07XG5cbi8qKlxuICpcbiAqL1xuY29uc3QgZGVmYXVsdENvbm5lY3Rpb25Db25maWc6IHtcbiAgbG9naW5Vcmw6IHN0cmluZztcbiAgaW5zdGFuY2VVcmw6IHN0cmluZztcbiAgdmVyc2lvbjogc3RyaW5nO1xuICBsb2dMZXZlbDogTG9nTGV2ZWxDb25maWc7XG4gIG1heFJlcXVlc3Q6IG51bWJlcjtcbn0gPSB7XG4gIGxvZ2luVXJsOiAnaHR0cHM6Ly9sb2dpbi5zYWxlc2ZvcmNlLmNvbScsXG4gIGluc3RhbmNlVXJsOiAnJyxcbiAgdmVyc2lvbjogJzUwLjAnLFxuICBsb2dMZXZlbDogJ05PTkUnLFxuICBtYXhSZXF1ZXN0OiAxMCxcbn07XG5cbi8qKlxuICpcbiAqL1xuZnVuY3Rpb24gZXNjKHN0cjogT3B0aW9uYWw8c3RyaW5nPik6IHN0cmluZyB7XG4gIHJldHVybiBTdHJpbmcoc3RyIHx8ICcnKVxuICAgIC5yZXBsYWNlKC8mL2csICcmYW1wOycpXG4gICAgLnJlcGxhY2UoLzwvZywgJyZsdDsnKVxuICAgIC5yZXBsYWNlKC8+L2csICcmZ3Q7JylcbiAgICAucmVwbGFjZSgvXCIvZywgJyZxdW90OycpO1xufVxuXG4vKipcbiAqXG4gKi9cbmZ1bmN0aW9uIHBhcnNlU2lnbmVkUmVxdWVzdChzcjogc3RyaW5nIHwgT2JqZWN0KTogU2lnbmVkUmVxdWVzdE9iamVjdCB7XG4gIGlmICh0eXBlb2Ygc3IgPT09ICdzdHJpbmcnKSB7XG4gICAgaWYgKHNyWzBdID09PSAneycpIHtcbiAgICAgIC8vIG1pZ2h0IGJlIEpTT05cbiAgICAgIHJldHVybiBKU09OLnBhcnNlKHNyKTtcbiAgICB9IC8vIG1pZ2h0IGJlIG9yaWdpbmFsIGJhc2U2NC1lbmNvZGVkIHNpZ25lZCByZXF1ZXN0XG4gICAgY29uc3QgbXNnID0gc3Iuc3BsaXQoJy4nKS5wb3AoKTsgLy8gcmV0cmlldmUgbGF0dGVyIHBhcnRcbiAgICBpZiAoIW1zZykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHNpZ25lZCByZXF1ZXN0Jyk7XG4gICAgfVxuICAgIGNvbnN0IGpzb24gPSBCdWZmZXIuZnJvbShtc2csICdiYXNlNjQnKS50b1N0cmluZygndXRmLTgnKTtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShqc29uKTtcbiAgfVxuICByZXR1cm4gc3IgYXMgU2lnbmVkUmVxdWVzdE9iamVjdDtcbn1cblxuLyoqIEBwcml2YXRlICoqL1xuZnVuY3Rpb24gcGFyc2VJZFVybCh1cmw6IHN0cmluZykge1xuICBjb25zdCBbb3JnYW5pemF0aW9uSWQsIGlkXSA9IHVybC5zcGxpdCgnLycpLnNsaWNlKC0yKTtcbiAgcmV0dXJuIHsgaWQsIG9yZ2FuaXphdGlvbklkLCB1cmwgfTtcbn1cblxuLyoqXG4gKiBTZXNzaW9uIFJlZnJlc2ggZGVsZWdhdGUgZnVuY3Rpb24gZm9yIE9BdXRoMiBhdXRoeiBjb2RlIGZsb3dcbiAqIEBwcml2YXRlXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIG9hdXRoUmVmcmVzaEZuPFMgZXh0ZW5kcyBTY2hlbWE+KFxuICBjb25uOiBDb25uZWN0aW9uPFM+LFxuICBjYWxsYmFjazogQ2FsbGJhY2s8c3RyaW5nLCBUb2tlblJlc3BvbnNlPixcbikge1xuICB0cnkge1xuICAgIGlmICghY29ubi5yZWZyZXNoVG9rZW4pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gcmVmcmVzaCB0b2tlbiBmb3VuZCBpbiB0aGUgY29ubmVjdGlvbicpO1xuICAgIH1cbiAgICBjb25zdCByZXMgPSBhd2FpdCBjb25uLm9hdXRoMi5yZWZyZXNoVG9rZW4oY29ubi5yZWZyZXNoVG9rZW4pO1xuICAgIGNvbnN0IHVzZXJJbmZvID0gcGFyc2VJZFVybChyZXMuaWQpO1xuICAgIGNvbm4uX2VzdGFibGlzaCh7XG4gICAgICBpbnN0YW5jZVVybDogcmVzLmluc3RhbmNlX3VybCxcbiAgICAgIGFjY2Vzc1Rva2VuOiByZXMuYWNjZXNzX3Rva2VuLFxuICAgICAgdXNlckluZm8sXG4gICAgfSk7XG4gICAgY2FsbGJhY2sodW5kZWZpbmVkLCByZXMuYWNjZXNzX3Rva2VuLCByZXMpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBTZXNzaW9uIFJlZnJlc2ggZGVsZWdhdGUgZnVuY3Rpb24gZm9yIHVzZXJuYW1lL3Bhc3N3b3JkIGxvZ2luXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjcmVhdGVVc2VybmFtZVBhc3N3b3JkUmVmcmVzaEZuPFMgZXh0ZW5kcyBTY2hlbWE+KFxuICB1c2VybmFtZTogc3RyaW5nLFxuICBwYXNzd29yZDogc3RyaW5nLFxuKSB7XG4gIHJldHVybiBhc3luYyAoXG4gICAgY29ubjogQ29ubmVjdGlvbjxTPixcbiAgICBjYWxsYmFjazogQ2FsbGJhY2s8c3RyaW5nLCBUb2tlblJlc3BvbnNlPixcbiAgKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGNvbm4ubG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKTtcbiAgICAgIGlmICghY29ubi5hY2Nlc3NUb2tlbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FjY2VzcyB0b2tlbiBub3QgZm91bmQgYWZ0ZXIgbG9naW4nKTtcbiAgICAgIH1cbiAgICAgIGNhbGxiYWNrKG51bGwsIGNvbm4uYWNjZXNzVG9rZW4pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBlcnI7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHRvU2F2ZVJlc3VsdChlcnI6IFNhdmVFcnJvcik6IFNhdmVSZXN1bHQge1xuICByZXR1cm4ge1xuICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgIGVycm9yczogW2Vycl0sXG4gIH07XG59XG5cbi8qKlxuICpcbiAqL1xuZnVuY3Rpb24gcmFpc2VOb01vZHVsZUVycm9yKG5hbWU6IHN0cmluZyk6IG5ldmVyIHtcbiAgdGhyb3cgbmV3IEVycm9yKFxuICAgIGBBUEkgbW9kdWxlICcke25hbWV9JyBpcyBub3QgbG9hZGVkLCBsb2FkICdqc2ZvcmNlL2FwaS8ke25hbWV9JyBleHBsaWNpdGx5YCxcbiAgKTtcbn1cblxuLypcbiAqIENvbnN0YW50IG9mIG1heGltdW0gcmVjb3JkcyBudW0gaW4gRE1MIG9wZXJhdGlvbiAodXBkYXRlL2RlbGV0ZSlcbiAqL1xuY29uc3QgTUFYX0RNTF9DT1VOVCA9IDIwMDtcblxuLyoqXG4gKlxuICovXG5leHBvcnQgY2xhc3MgQ29ubmVjdGlvbjxTIGV4dGVuZHMgU2NoZW1hID0gU2NoZW1hPiBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIHN0YXRpYyBfbG9nZ2VyID0gZ2V0TG9nZ2VyKCdjb25uZWN0aW9uJyk7XG5cbiAgdmVyc2lvbjogc3RyaW5nO1xuICBsb2dpblVybDogc3RyaW5nO1xuICBpbnN0YW5jZVVybDogc3RyaW5nO1xuICBhY2Nlc3NUb2tlbjogT3B0aW9uYWw8c3RyaW5nPjtcbiAgcmVmcmVzaFRva2VuOiBPcHRpb25hbDxzdHJpbmc+O1xuICB1c2VySW5mbzogT3B0aW9uYWw8VXNlckluZm8+O1xuICBsaW1pdEluZm86IExpbWl0SW5mbyA9IHt9O1xuICBvYXV0aDI6IE9BdXRoMjtcbiAgc29iamVjdHM6IHsgW04gaW4gU09iamVjdE5hbWVzPFM+XT86IFNPYmplY3Q8UywgTj4gfSA9IHt9O1xuICBjYWNoZTogQ2FjaGU7XG4gIF9jYWxsT3B0aW9uczogT3B0aW9uYWw8eyBbbmFtZTogc3RyaW5nXTogc3RyaW5nIH0+O1xuICBfbWF4UmVxdWVzdDogbnVtYmVyO1xuICBfbG9nZ2VyOiBMb2dnZXI7XG4gIF9sb2dMZXZlbDogT3B0aW9uYWw8TG9nTGV2ZWxDb25maWc+O1xuICBfdHJhbnNwb3J0OiBUcmFuc3BvcnQ7XG4gIF9zZXNzaW9uVHlwZTogT3B0aW9uYWw8J3NvYXAnIHwgJ29hdXRoMic+O1xuICBfcmVmcmVzaERlbGVnYXRlOiBPcHRpb25hbDxTZXNzaW9uUmVmcmVzaERlbGVnYXRlPFM+PjtcblxuICAvLyBkZXNjcmliZTogKG5hbWU6IHN0cmluZykgPT4gUHJvbWlzZTxEZXNjcmliZVNPYmplY3RSZXN1bHQ+O1xuICBkZXNjcmliZSQ6IENhY2hlZEZ1bmN0aW9uPChuYW1lOiBzdHJpbmcpID0+IFByb21pc2U8RGVzY3JpYmVTT2JqZWN0UmVzdWx0Pj47XG4gIGRlc2NyaWJlJCQ6IENhY2hlZEZ1bmN0aW9uPChuYW1lOiBzdHJpbmcpID0+IERlc2NyaWJlU09iamVjdFJlc3VsdD47XG4gIGRlc2NyaWJlU09iamVjdDogKG5hbWU6IHN0cmluZykgPT4gUHJvbWlzZTxEZXNjcmliZVNPYmplY3RSZXN1bHQ+O1xuICBkZXNjcmliZVNPYmplY3QkOiBDYWNoZWRGdW5jdGlvbjxcbiAgICAobmFtZTogc3RyaW5nKSA9PiBQcm9taXNlPERlc2NyaWJlU09iamVjdFJlc3VsdD5cbiAgPjtcbiAgZGVzY3JpYmVTT2JqZWN0JCQ6IENhY2hlZEZ1bmN0aW9uPChuYW1lOiBzdHJpbmcpID0+IERlc2NyaWJlU09iamVjdFJlc3VsdD47XG4gIC8vIGRlc2NyaWJlR2xvYmFsOiAoKSA9PiBQcm9taXNlPERlc2NyaWJlR2xvYmFsUmVzdWx0PjtcbiAgZGVzY3JpYmVHbG9iYWwkOiBDYWNoZWRGdW5jdGlvbjwoKSA9PiBQcm9taXNlPERlc2NyaWJlR2xvYmFsUmVzdWx0Pj47XG4gIGRlc2NyaWJlR2xvYmFsJCQ6IENhY2hlZEZ1bmN0aW9uPCgpID0+IERlc2NyaWJlR2xvYmFsUmVzdWx0PjtcblxuICAvLyBBUEkgbGlicyBhcmUgbm90IGluc3RhbnRpYXRlZCBoZXJlIHNvIHRoYXQgY29yZSBtb2R1bGUgdG8gcmVtYWluIHdpdGhvdXQgZGVwZW5kZW5jaWVzIHRvIHRoZW1cbiAgLy8gSXQgaXMgcmVzcG9uc2libGUgZm9yIGRldmVsb3BlcnMgdG8gaW1wb3J0IGFwaSBsaWJzIGV4cGxpY2l0bHkgaWYgdGhleSBhcmUgdXNpbmcgJ2pzZm9yY2UvY29yZScgaW5zdGVhZCBvZiAnanNmb3JjZScuXG4gIGdldCBhbmFseXRpY3MoKTogQW5hbHl0aWNzPFM+IHtcbiAgICByZXR1cm4gcmFpc2VOb01vZHVsZUVycm9yKCdhbmFseXRpY3MnKTtcbiAgfVxuXG4gIGdldCBhcGV4KCk6IEFwZXg8Uz4ge1xuICAgIHJldHVybiByYWlzZU5vTW9kdWxlRXJyb3IoJ2FwZXgnKTtcbiAgfVxuXG4gIGdldCBidWxrKCk6IEJ1bGs8Uz4ge1xuICAgIHJldHVybiByYWlzZU5vTW9kdWxlRXJyb3IoJ2J1bGsnKTtcbiAgfVxuXG4gIGdldCBjaGF0dGVyKCk6IENoYXR0ZXI8Uz4ge1xuICAgIHJldHVybiByYWlzZU5vTW9kdWxlRXJyb3IoJ2NoYXR0ZXInKTtcbiAgfVxuXG4gIGdldCBtZXRhZGF0YSgpOiBNZXRhZGF0YTxTPiB7XG4gICAgcmV0dXJuIHJhaXNlTm9Nb2R1bGVFcnJvcignbWV0YWRhdGEnKTtcbiAgfVxuXG4gIGdldCBzb2FwKCk6IFNvYXBBcGk8Uz4ge1xuICAgIHJldHVybiByYWlzZU5vTW9kdWxlRXJyb3IoJ3NvYXAnKTtcbiAgfVxuXG4gIGdldCBzdHJlYW1pbmcoKTogU3RyZWFtaW5nPFM+IHtcbiAgICByZXR1cm4gcmFpc2VOb01vZHVsZUVycm9yKCdzdHJlYW1pbmcnKTtcbiAgfVxuXG4gIGdldCB0b29saW5nKCk6IFRvb2xpbmc8Uz4ge1xuICAgIHJldHVybiByYWlzZU5vTW9kdWxlRXJyb3IoJ3Rvb2xpbmcnKTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKi9cbiAgY29uc3RydWN0b3IoY29uZmlnOiBDb25uZWN0aW9uQ29uZmlnPFM+ID0ge30pIHtcbiAgICBzdXBlcigpO1xuICAgIGNvbnN0IHtcbiAgICAgIGxvZ2luVXJsLFxuICAgICAgaW5zdGFuY2VVcmwsXG4gICAgICB2ZXJzaW9uLFxuICAgICAgb2F1dGgyLFxuICAgICAgbWF4UmVxdWVzdCxcbiAgICAgIGxvZ0xldmVsLFxuICAgICAgcHJveHlVcmwsXG4gICAgICBodHRwUHJveHksXG4gICAgfSA9IGNvbmZpZztcbiAgICB0aGlzLmxvZ2luVXJsID0gbG9naW5VcmwgfHwgZGVmYXVsdENvbm5lY3Rpb25Db25maWcubG9naW5Vcmw7XG4gICAgdGhpcy5pbnN0YW5jZVVybCA9IGluc3RhbmNlVXJsIHx8IGRlZmF1bHRDb25uZWN0aW9uQ29uZmlnLmluc3RhbmNlVXJsO1xuICAgIHRoaXMudmVyc2lvbiA9IHZlcnNpb24gfHwgZGVmYXVsdENvbm5lY3Rpb25Db25maWcudmVyc2lvbjtcbiAgICB0aGlzLm9hdXRoMiA9XG4gICAgICBvYXV0aDIgaW5zdGFuY2VvZiBPQXV0aDJcbiAgICAgICAgPyBvYXV0aDJcbiAgICAgICAgOiBuZXcgT0F1dGgyKHtcbiAgICAgICAgICAgIGxvZ2luVXJsOiB0aGlzLmxvZ2luVXJsLFxuICAgICAgICAgICAgcHJveHlVcmwsXG4gICAgICAgICAgICBodHRwUHJveHksXG4gICAgICAgICAgICAuLi5vYXV0aDIsXG4gICAgICAgICAgfSk7XG4gICAgbGV0IHJlZnJlc2hGbiA9IGNvbmZpZy5yZWZyZXNoRm47XG4gICAgaWYgKCFyZWZyZXNoRm4gJiYgdGhpcy5vYXV0aDIuY2xpZW50SWQpIHtcbiAgICAgIHJlZnJlc2hGbiA9IG9hdXRoUmVmcmVzaEZuO1xuICAgIH1cbiAgICBpZiAocmVmcmVzaEZuKSB7XG4gICAgICB0aGlzLl9yZWZyZXNoRGVsZWdhdGUgPSBuZXcgU2Vzc2lvblJlZnJlc2hEZWxlZ2F0ZSh0aGlzLCByZWZyZXNoRm4pO1xuICAgIH1cbiAgICB0aGlzLl9tYXhSZXF1ZXN0ID0gbWF4UmVxdWVzdCB8fCBkZWZhdWx0Q29ubmVjdGlvbkNvbmZpZy5tYXhSZXF1ZXN0O1xuICAgIHRoaXMuX2xvZ2dlciA9IGxvZ0xldmVsXG4gICAgICA/IENvbm5lY3Rpb24uX2xvZ2dlci5jcmVhdGVJbnN0YW5jZShsb2dMZXZlbClcbiAgICAgIDogQ29ubmVjdGlvbi5fbG9nZ2VyO1xuICAgIHRoaXMuX2xvZ0xldmVsID0gbG9nTGV2ZWw7XG4gICAgdGhpcy5fdHJhbnNwb3J0ID0gcHJveHlVcmxcbiAgICAgID8gbmV3IFhkUHJveHlUcmFuc3BvcnQocHJveHlVcmwpXG4gICAgICA6IGh0dHBQcm94eVxuICAgICAgPyBuZXcgSHR0cFByb3h5VHJhbnNwb3J0KGh0dHBQcm94eSlcbiAgICAgIDogbmV3IFRyYW5zcG9ydCgpO1xuICAgIHRoaXMuX2NhbGxPcHRpb25zID0gY29uZmlnLmNhbGxPcHRpb25zO1xuICAgIHRoaXMuY2FjaGUgPSBuZXcgQ2FjaGUoKTtcbiAgICBjb25zdCBkZXNjcmliZUNhY2hlS2V5ID0gKHR5cGU/OiBzdHJpbmcpID0+XG4gICAgICB0eXBlID8gYGRlc2NyaWJlLiR7dHlwZX1gIDogJ2Rlc2NyaWJlJztcbiAgICBjb25zdCBkZXNjcmliZSA9IENvbm5lY3Rpb24ucHJvdG90eXBlLmRlc2NyaWJlO1xuICAgIHRoaXMuZGVzY3JpYmUgPSB0aGlzLmNhY2hlLmNyZWF0ZUNhY2hlZEZ1bmN0aW9uKGRlc2NyaWJlLCB0aGlzLCB7XG4gICAgICBrZXk6IGRlc2NyaWJlQ2FjaGVLZXksXG4gICAgICBzdHJhdGVneTogJ05PQ0FDSEUnLFxuICAgIH0pO1xuICAgIHRoaXMuZGVzY3JpYmUkID0gdGhpcy5jYWNoZS5jcmVhdGVDYWNoZWRGdW5jdGlvbihkZXNjcmliZSwgdGhpcywge1xuICAgICAga2V5OiBkZXNjcmliZUNhY2hlS2V5LFxuICAgICAgc3RyYXRlZ3k6ICdISVQnLFxuICAgIH0pO1xuICAgIHRoaXMuZGVzY3JpYmUkJCA9IHRoaXMuY2FjaGUuY3JlYXRlQ2FjaGVkRnVuY3Rpb24oZGVzY3JpYmUsIHRoaXMsIHtcbiAgICAgIGtleTogZGVzY3JpYmVDYWNoZUtleSxcbiAgICAgIHN0cmF0ZWd5OiAnSU1NRURJQVRFJyxcbiAgICB9KSBhcyBhbnk7XG4gICAgdGhpcy5kZXNjcmliZVNPYmplY3QgPSB0aGlzLmRlc2NyaWJlO1xuICAgIHRoaXMuZGVzY3JpYmVTT2JqZWN0JCA9IHRoaXMuZGVzY3JpYmUkO1xuICAgIHRoaXMuZGVzY3JpYmVTT2JqZWN0JCQgPSB0aGlzLmRlc2NyaWJlJCQ7XG4gICAgY29uc3QgZGVzY3JpYmVHbG9iYWwgPSBDb25uZWN0aW9uLnByb3RvdHlwZS5kZXNjcmliZUdsb2JhbDtcbiAgICB0aGlzLmRlc2NyaWJlR2xvYmFsID0gdGhpcy5jYWNoZS5jcmVhdGVDYWNoZWRGdW5jdGlvbihcbiAgICAgIGRlc2NyaWJlR2xvYmFsLFxuICAgICAgdGhpcyxcbiAgICAgIHsga2V5OiAnZGVzY3JpYmVHbG9iYWwnLCBzdHJhdGVneTogJ05PQ0FDSEUnIH0sXG4gICAgKTtcbiAgICB0aGlzLmRlc2NyaWJlR2xvYmFsJCA9IHRoaXMuY2FjaGUuY3JlYXRlQ2FjaGVkRnVuY3Rpb24oXG4gICAgICBkZXNjcmliZUdsb2JhbCxcbiAgICAgIHRoaXMsXG4gICAgICB7IGtleTogJ2Rlc2NyaWJlR2xvYmFsJywgc3RyYXRlZ3k6ICdISVQnIH0sXG4gICAgKTtcbiAgICB0aGlzLmRlc2NyaWJlR2xvYmFsJCQgPSB0aGlzLmNhY2hlLmNyZWF0ZUNhY2hlZEZ1bmN0aW9uKFxuICAgICAgZGVzY3JpYmVHbG9iYWwsXG4gICAgICB0aGlzLFxuICAgICAgeyBrZXk6ICdkZXNjcmliZUdsb2JhbCcsIHN0cmF0ZWd5OiAnSU1NRURJQVRFJyB9LFxuICAgICkgYXMgYW55O1xuICAgIGNvbnN0IHtcbiAgICAgIGFjY2Vzc1Rva2VuLFxuICAgICAgcmVmcmVzaFRva2VuLFxuICAgICAgc2Vzc2lvbklkLFxuICAgICAgc2VydmVyVXJsLFxuICAgICAgc2lnbmVkUmVxdWVzdCxcbiAgICB9ID0gY29uZmlnO1xuICAgIHRoaXMuX2VzdGFibGlzaCh7XG4gICAgICBhY2Nlc3NUb2tlbixcbiAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgIGluc3RhbmNlVXJsLFxuICAgICAgc2Vzc2lvbklkLFxuICAgICAgc2VydmVyVXJsLFxuICAgICAgc2lnbmVkUmVxdWVzdCxcbiAgICB9KTtcblxuICAgIGpzZm9yY2UuZW1pdCgnY29ubmVjdGlvbjpuZXcnLCB0aGlzKTtcbiAgfVxuXG4gIC8qIEBwcml2YXRlICovXG4gIF9lc3RhYmxpc2gob3B0aW9uczogQ29ubmVjdGlvbkVzdGFibGlzaE9wdGlvbnMpIHtcbiAgICBjb25zdCB7XG4gICAgICBhY2Nlc3NUb2tlbixcbiAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgIGluc3RhbmNlVXJsLFxuICAgICAgc2Vzc2lvbklkLFxuICAgICAgc2VydmVyVXJsLFxuICAgICAgc2lnbmVkUmVxdWVzdCxcbiAgICAgIHVzZXJJbmZvLFxuICAgIH0gPSBvcHRpb25zO1xuICAgIHRoaXMuaW5zdGFuY2VVcmwgPSBzZXJ2ZXJVcmxcbiAgICAgID8gc2VydmVyVXJsLnNwbGl0KCcvJykuc2xpY2UoMCwgMykuam9pbignLycpXG4gICAgICA6IGluc3RhbmNlVXJsIHx8IHRoaXMuaW5zdGFuY2VVcmw7XG4gICAgdGhpcy5hY2Nlc3NUb2tlbiA9IHNlc3Npb25JZCB8fCBhY2Nlc3NUb2tlbiB8fCB0aGlzLmFjY2Vzc1Rva2VuO1xuICAgIHRoaXMucmVmcmVzaFRva2VuID0gcmVmcmVzaFRva2VuIHx8IHRoaXMucmVmcmVzaFRva2VuO1xuICAgIGlmICh0aGlzLnJlZnJlc2hUb2tlbiAmJiAhdGhpcy5fcmVmcmVzaERlbGVnYXRlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdSZWZyZXNoIHRva2VuIGlzIHNwZWNpZmllZCB3aXRob3V0IG9hdXRoMiBjbGllbnQgaW5mb3JtYXRpb24gb3IgcmVmcmVzaCBmdW5jdGlvbicsXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCBzaWduZWRSZXF1ZXN0T2JqZWN0ID1cbiAgICAgIHNpZ25lZFJlcXVlc3QgJiYgcGFyc2VTaWduZWRSZXF1ZXN0KHNpZ25lZFJlcXVlc3QpO1xuICAgIGlmIChzaWduZWRSZXF1ZXN0T2JqZWN0KSB7XG4gICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gc2lnbmVkUmVxdWVzdE9iamVjdC5jbGllbnQub2F1dGhUb2tlbjtcbiAgICAgIGlmIChDYW52YXNUcmFuc3BvcnQuc3VwcG9ydGVkKSB7XG4gICAgICAgIHRoaXMuX3RyYW5zcG9ydCA9IG5ldyBDYW52YXNUcmFuc3BvcnQoc2lnbmVkUmVxdWVzdE9iamVjdCk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMudXNlckluZm8gPSB1c2VySW5mbyB8fCB0aGlzLnVzZXJJbmZvO1xuICAgIHRoaXMuX3Nlc3Npb25UeXBlID0gc2Vzc2lvbklkID8gJ3NvYXAnIDogJ29hdXRoMic7XG4gICAgdGhpcy5fcmVzZXRJbnN0YW5jZSgpO1xuICB9XG5cbiAgLyogQHByaXZlYXRlICovXG4gIF9jbGVhclNlc3Npb24oKSB7XG4gICAgdGhpcy5hY2Nlc3NUb2tlbiA9IG51bGw7XG4gICAgdGhpcy5yZWZyZXNoVG9rZW4gPSBudWxsO1xuICAgIHRoaXMuaW5zdGFuY2VVcmwgPSBkZWZhdWx0Q29ubmVjdGlvbkNvbmZpZy5pbnN0YW5jZVVybDtcbiAgICB0aGlzLnVzZXJJbmZvID0gbnVsbDtcbiAgICB0aGlzLl9zZXNzaW9uVHlwZSA9IG51bGw7XG4gIH1cblxuICAvKiBAcHJpdmVhdGUgKi9cbiAgX3Jlc2V0SW5zdGFuY2UoKSB7XG4gICAgdGhpcy5saW1pdEluZm8gPSB7fTtcbiAgICB0aGlzLnNvYmplY3RzID0ge307XG4gICAgLy8gVE9ETyBpbXBsIGNhY2hlXG4gICAgdGhpcy5jYWNoZS5jbGVhcigpO1xuICAgIHRoaXMuY2FjaGUuZ2V0KCdkZXNjcmliZUdsb2JhbCcpLnJlbW92ZUFsbExpc3RlbmVycygndmFsdWUnKTtcbiAgICB0aGlzLmNhY2hlLmdldCgnZGVzY3JpYmVHbG9iYWwnKS5vbigndmFsdWUnLCAoeyByZXN1bHQgfSkgPT4ge1xuICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICBmb3IgKGNvbnN0IHNvIG9mIHJlc3VsdC5zb2JqZWN0cykge1xuICAgICAgICAgIHRoaXMuc29iamVjdChzby5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIC8qXG4gICAgaWYgKHRoaXMudG9vbGluZykge1xuICAgICAgdGhpcy50b29saW5nLl9yZXNldEluc3RhbmNlKCk7XG4gICAgfVxuICAgICovXG4gIH1cblxuICAvKipcbiAgICogQXV0aG9yaXplICh1c2luZyBvYXV0aDIgd2ViIHNlcnZlciBmbG93KVxuICAgKi9cbiAgYXN5bmMgYXV0aG9yaXplKFxuICAgIGNvZGU6IHN0cmluZyxcbiAgICBwYXJhbXM6IHsgW25hbWU6IHN0cmluZ106IHN0cmluZyB9ID0ge30sXG4gICk6IFByb21pc2U8VXNlckluZm8+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLm9hdXRoMi5yZXF1ZXN0VG9rZW4oY29kZSwgcGFyYW1zKTtcbiAgICBjb25zdCB1c2VySW5mbyA9IHBhcnNlSWRVcmwocmVzLmlkKTtcbiAgICB0aGlzLl9lc3RhYmxpc2goe1xuICAgICAgaW5zdGFuY2VVcmw6IHJlcy5pbnN0YW5jZV91cmwsXG4gICAgICBhY2Nlc3NUb2tlbjogcmVzLmFjY2Vzc190b2tlbixcbiAgICAgIHJlZnJlc2hUb2tlbjogcmVzLnJlZnJlc2hfdG9rZW4sXG4gICAgICB1c2VySW5mbyxcbiAgICB9KTtcbiAgICB0aGlzLl9sb2dnZXIuZGVidWcoXG4gICAgICBgPGxvZ2luPiBjb21wbGV0ZWQuIHVzZXIgaWQgPSAke3VzZXJJbmZvLmlkfSwgb3JnIGlkID0gJHt1c2VySW5mby5vcmdhbml6YXRpb25JZH1gLFxuICAgICk7XG4gICAgcmV0dXJuIHVzZXJJbmZvO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqL1xuICBhc3luYyBsb2dpbih1c2VybmFtZTogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTxVc2VySW5mbz4ge1xuICAgIHRoaXMuX3JlZnJlc2hEZWxlZ2F0ZSA9IG5ldyBTZXNzaW9uUmVmcmVzaERlbGVnYXRlKFxuICAgICAgdGhpcyxcbiAgICAgIGNyZWF0ZVVzZXJuYW1lUGFzc3dvcmRSZWZyZXNoRm4odXNlcm5hbWUsIHBhc3N3b3JkKSxcbiAgICApO1xuICAgIGlmICh0aGlzLm9hdXRoMiAmJiB0aGlzLm9hdXRoMi5jbGllbnRJZCAmJiB0aGlzLm9hdXRoMi5jbGllbnRTZWNyZXQpIHtcbiAgICAgIHJldHVybiB0aGlzLmxvZ2luQnlPQXV0aDIodXNlcm5hbWUsIHBhc3N3b3JkKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMubG9naW5CeVNvYXAodXNlcm5hbWUsIHBhc3N3b3JkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2dpbiBieSBPQXV0aDIgdXNlcm5hbWUgJiBwYXNzd29yZCBmbG93XG4gICAqL1xuICBhc3luYyBsb2dpbkJ5T0F1dGgyKHVzZXJuYW1lOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXJJbmZvPiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5vYXV0aDIuYXV0aGVudGljYXRlKHVzZXJuYW1lLCBwYXNzd29yZCk7XG4gICAgY29uc3QgdXNlckluZm8gPSBwYXJzZUlkVXJsKHJlcy5pZCk7XG4gICAgdGhpcy5fZXN0YWJsaXNoKHtcbiAgICAgIGluc3RhbmNlVXJsOiByZXMuaW5zdGFuY2VfdXJsLFxuICAgICAgYWNjZXNzVG9rZW46IHJlcy5hY2Nlc3NfdG9rZW4sXG4gICAgICB1c2VySW5mbyxcbiAgICB9KTtcbiAgICB0aGlzLl9sb2dnZXIuaW5mbyhcbiAgICAgIGA8bG9naW4+IGNvbXBsZXRlZC4gdXNlciBpZCA9ICR7dXNlckluZm8uaWR9LCBvcmcgaWQgPSAke3VzZXJJbmZvLm9yZ2FuaXphdGlvbklkfWAsXG4gICAgKTtcbiAgICByZXR1cm4gdXNlckluZm87XG4gIH1cblxuICAvKipcbiAgICpcbiAgICovXG4gIGFzeW5jIGxvZ2luQnlTb2FwKHVzZXJuYW1lOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXJJbmZvPiB7XG4gICAgaWYgKCF1c2VybmFtZSB8fCAhcGFzc3dvcmQpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ25vIHVzZXJuYW1lIHBhc3N3b3JkIGdpdmVuJykpO1xuICAgIH1cbiAgICBjb25zdCBib2R5ID0gW1xuICAgICAgJzxzZTpFbnZlbG9wZSB4bWxuczpzZT1cImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3NvYXAvZW52ZWxvcGUvXCI+JyxcbiAgICAgICc8c2U6SGVhZGVyLz4nLFxuICAgICAgJzxzZTpCb2R5PicsXG4gICAgICAnPGxvZ2luIHhtbG5zPVwidXJuOnBhcnRuZXIuc29hcC5zZm9yY2UuY29tXCI+JyxcbiAgICAgIGA8dXNlcm5hbWU+JHtlc2ModXNlcm5hbWUpfTwvdXNlcm5hbWU+YCxcbiAgICAgIGA8cGFzc3dvcmQ+JHtlc2MocGFzc3dvcmQpfTwvcGFzc3dvcmQ+YCxcbiAgICAgICc8L2xvZ2luPicsXG4gICAgICAnPC9zZTpCb2R5PicsXG4gICAgICAnPC9zZTpFbnZlbG9wZT4nLFxuICAgIF0uam9pbignJyk7XG5cbiAgICBjb25zdCBzb2FwTG9naW5FbmRwb2ludCA9IFtcbiAgICAgIHRoaXMubG9naW5VcmwsXG4gICAgICAnc2VydmljZXMvU29hcC91JyxcbiAgICAgIHRoaXMudmVyc2lvbixcbiAgICBdLmpvaW4oJy8nKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuX3RyYW5zcG9ydC5odHRwUmVxdWVzdCh7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIHVybDogc29hcExvZ2luRW5kcG9pbnQsXG4gICAgICBib2R5LFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ3RleHQveG1sJyxcbiAgICAgICAgU09BUEFjdGlvbjogJ1wiXCInLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICBsZXQgbTtcbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzQ29kZSA+PSA0MDApIHtcbiAgICAgIG0gPSByZXNwb25zZS5ib2R5Lm1hdGNoKC88ZmF1bHRzdHJpbmc+KFtePF0rKTxcXC9mYXVsdHN0cmluZz4vKTtcbiAgICAgIGNvbnN0IGZhdWx0c3RyaW5nID0gbSAmJiBtWzFdO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGZhdWx0c3RyaW5nIHx8IHJlc3BvbnNlLmJvZHkpO1xuICAgIH1cbiAgICB0aGlzLl9sb2dnZXIuZGVidWcoYFNPQVAgcmVzcG9uc2UgPSAke3Jlc3BvbnNlLmJvZHl9YCk7XG4gICAgbSA9IHJlc3BvbnNlLmJvZHkubWF0Y2goLzxzZXJ2ZXJVcmw+KFtePF0rKTxcXC9zZXJ2ZXJVcmw+Lyk7XG4gICAgY29uc3Qgc2VydmVyVXJsID0gbSAmJiBtWzFdO1xuICAgIG0gPSByZXNwb25zZS5ib2R5Lm1hdGNoKC88c2Vzc2lvbklkPihbXjxdKyk8XFwvc2Vzc2lvbklkPi8pO1xuICAgIGNvbnN0IHNlc3Npb25JZCA9IG0gJiYgbVsxXTtcbiAgICBtID0gcmVzcG9uc2UuYm9keS5tYXRjaCgvPHVzZXJJZD4oW148XSspPFxcL3VzZXJJZD4vKTtcbiAgICBjb25zdCB1c2VySWQgPSBtICYmIG1bMV07XG4gICAgbSA9IHJlc3BvbnNlLmJvZHkubWF0Y2goLzxvcmdhbml6YXRpb25JZD4oW148XSspPFxcL29yZ2FuaXphdGlvbklkPi8pO1xuICAgIGNvbnN0IG9yZ2FuaXphdGlvbklkID0gbSAmJiBtWzFdO1xuICAgIGlmICghc2VydmVyVXJsIHx8ICFzZXNzaW9uSWQgfHwgIXVzZXJJZCB8fCAhb3JnYW5pemF0aW9uSWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ2NvdWxkIG5vdCBleHRyYWN0IHNlc3Npb24gaW5mb3JtYXRpb24gZnJvbSBsb2dpbiByZXNwb25zZScsXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCBpZFVybCA9IFt0aGlzLmxvZ2luVXJsLCAnaWQnLCBvcmdhbml6YXRpb25JZCwgdXNlcklkXS5qb2luKCcvJyk7XG4gICAgY29uc3QgdXNlckluZm8gPSB7IGlkOiB1c2VySWQsIG9yZ2FuaXphdGlvbklkLCB1cmw6IGlkVXJsIH07XG4gICAgdGhpcy5fZXN0YWJsaXNoKHtcbiAgICAgIHNlcnZlclVybDogc2VydmVyVXJsLnNwbGl0KCcvJykuc2xpY2UoMCwgMykuam9pbignLycpLFxuICAgICAgc2Vzc2lvbklkLFxuICAgICAgdXNlckluZm8sXG4gICAgfSk7XG4gICAgdGhpcy5fbG9nZ2VyLmluZm8oXG4gICAgICBgPGxvZ2luPiBjb21wbGV0ZWQuIHVzZXIgaWQgPSAke3VzZXJJZH0sIG9yZyBpZCA9ICR7b3JnYW5pemF0aW9uSWR9YCxcbiAgICApO1xuICAgIHJldHVybiB1c2VySW5mbztcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2dvdXQgdGhlIGN1cnJlbnQgc2Vzc2lvblxuICAgKi9cbiAgYXN5bmMgbG9nb3V0KHJldm9rZT86IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLl9yZWZyZXNoRGVsZWdhdGUgPSB1bmRlZmluZWQ7XG4gICAgaWYgKHRoaXMuX3Nlc3Npb25UeXBlID09PSAnb2F1dGgyJykge1xuICAgICAgcmV0dXJuIHRoaXMubG9nb3V0QnlPQXV0aDIocmV2b2tlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMubG9nb3V0QnlTb2FwKHJldm9rZSk7XG4gIH1cblxuICAvKipcbiAgICogTG9nb3V0IHRoZSBjdXJyZW50IHNlc3Npb24gYnkgcmV2b2tpbmcgYWNjZXNzIHRva2VuIHZpYSBPQXV0aDIgc2Vzc2lvbiByZXZva2VcbiAgICovXG4gIGFzeW5jIGxvZ291dEJ5T0F1dGgyKHJldm9rZT86IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCB0b2tlbiA9IHJldm9rZSA/IHRoaXMucmVmcmVzaFRva2VuIDogdGhpcy5hY2Nlc3NUb2tlbjtcbiAgICBpZiAodG9rZW4pIHtcbiAgICAgIGF3YWl0IHRoaXMub2F1dGgyLnJldm9rZVRva2VuKHRva2VuKTtcbiAgICB9XG4gICAgLy8gRGVzdHJveSB0aGUgc2Vzc2lvbiBib3VuZCB0byB0aGlzIGNvbm5lY3Rpb25cbiAgICB0aGlzLl9jbGVhclNlc3Npb24oKTtcbiAgICB0aGlzLl9yZXNldEluc3RhbmNlKCk7XG4gIH1cblxuICAvKipcbiAgICogTG9nb3V0IHRoZSBzZXNzaW9uIGJ5IHVzaW5nIFNPQVAgd2ViIHNlcnZpY2UgQVBJXG4gICAqL1xuICBhc3luYyBsb2dvdXRCeVNvYXAocmV2b2tlPzogYm9vbGVhbik6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGJvZHkgPSBbXG4gICAgICAnPHNlOkVudmVsb3BlIHhtbG5zOnNlPVwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS9cIj4nLFxuICAgICAgJzxzZTpIZWFkZXI+JyxcbiAgICAgICc8U2Vzc2lvbkhlYWRlciB4bWxucz1cInVybjpwYXJ0bmVyLnNvYXAuc2ZvcmNlLmNvbVwiPicsXG4gICAgICBgPHNlc3Npb25JZD4ke2VzYyhcbiAgICAgICAgcmV2b2tlID8gdGhpcy5yZWZyZXNoVG9rZW4gOiB0aGlzLmFjY2Vzc1Rva2VuLFxuICAgICAgKX08L3Nlc3Npb25JZD5gLFxuICAgICAgJzwvU2Vzc2lvbkhlYWRlcj4nLFxuICAgICAgJzwvc2U6SGVhZGVyPicsXG4gICAgICAnPHNlOkJvZHk+JyxcbiAgICAgICc8bG9nb3V0IHhtbG5zPVwidXJuOnBhcnRuZXIuc29hcC5zZm9yY2UuY29tXCIvPicsXG4gICAgICAnPC9zZTpCb2R5PicsXG4gICAgICAnPC9zZTpFbnZlbG9wZT4nLFxuICAgIF0uam9pbignJyk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLl90cmFuc3BvcnQuaHR0cFJlcXVlc3Qoe1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICB1cmw6IFt0aGlzLmluc3RhbmNlVXJsLCAnc2VydmljZXMvU29hcC91JywgdGhpcy52ZXJzaW9uXS5qb2luKCcvJyksXG4gICAgICBib2R5LFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ3RleHQveG1sJyxcbiAgICAgICAgU09BUEFjdGlvbjogJ1wiXCInLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICB0aGlzLl9sb2dnZXIuZGVidWcoXG4gICAgICBgU09BUCBzdGF0dXNDb2RlID0gJHtyZXNwb25zZS5zdGF0dXNDb2RlfSwgcmVzcG9uc2UgPSAke3Jlc3BvbnNlLmJvZHl9YCxcbiAgICApO1xuICAgIGlmIChyZXNwb25zZS5zdGF0dXNDb2RlID49IDQwMCkge1xuICAgICAgY29uc3QgbSA9IHJlc3BvbnNlLmJvZHkubWF0Y2goLzxmYXVsdHN0cmluZz4oW148XSspPFxcL2ZhdWx0c3RyaW5nPi8pO1xuICAgICAgY29uc3QgZmF1bHRzdHJpbmcgPSBtICYmIG1bMV07XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZmF1bHRzdHJpbmcgfHwgcmVzcG9uc2UuYm9keSk7XG4gICAgfVxuICAgIC8vIERlc3Ryb3kgdGhlIHNlc3Npb24gYm91bmQgdG8gdGhpcyBjb25uZWN0aW9uXG4gICAgdGhpcy5fY2xlYXJTZXNzaW9uKCk7XG4gICAgdGhpcy5fcmVzZXRJbnN0YW5jZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmQgUkVTVCBBUEkgcmVxdWVzdCB3aXRoIGdpdmVuIEhUVFAgcmVxdWVzdCBpbmZvLCB3aXRoIGNvbm5lY3RlZCBzZXNzaW9uIGluZm9ybWF0aW9uLlxuICAgKlxuICAgKiBFbmRwb2ludCBVUkwgY2FuIGJlIGFic29sdXRlIFVSTCAoJ2h0dHBzOi8vbmExLnNhbGVzZm9yY2UuY29tL3NlcnZpY2VzL2RhdGEvdjMyLjAvc29iamVjdHMvQWNjb3VudC9kZXNjcmliZScpXG4gICAqICwgcmVsYXRpdmUgcGF0aCBmcm9tIHJvb3QgKCcvc2VydmljZXMvZGF0YS92MzIuMC9zb2JqZWN0cy9BY2NvdW50L2Rlc2NyaWJlJylcbiAgICogLCBvciByZWxhdGl2ZSBwYXRoIGZyb20gdmVyc2lvbiByb290ICgnL3NvYmplY3RzL0FjY291bnQvZGVzY3JpYmUnKS5cbiAgICovXG4gIHJlcXVlc3Q8UiA9IHVua25vd24+KFxuICAgIHJlcXVlc3Q6IHN0cmluZyB8IEh0dHBSZXF1ZXN0LFxuICAgIG9wdGlvbnM6IE9iamVjdCA9IHt9LFxuICApOiBTdHJlYW1Qcm9taXNlPFI+IHtcbiAgICAvLyBpZiByZXF1ZXN0IGlzIHNpbXBsZSBzdHJpbmcsIHJlZ2FyZCBpdCBhcyB1cmwgaW4gR0VUIG1ldGhvZFxuICAgIGxldCByZXF1ZXN0XzogSHR0cFJlcXVlc3QgPVxuICAgICAgdHlwZW9mIHJlcXVlc3QgPT09ICdzdHJpbmcnID8geyBtZXRob2Q6ICdHRVQnLCB1cmw6IHJlcXVlc3QgfSA6IHJlcXVlc3Q7XG4gICAgLy8gaWYgdXJsIGlzIGdpdmVuIGluIHJlbGF0aXZlIHBhdGgsIHByZXBlbmQgYmFzZSB1cmwgb3IgaW5zdGFuY2UgdXJsIGJlZm9yZS5cbiAgICByZXF1ZXN0XyA9IHtcbiAgICAgIC4uLnJlcXVlc3RfLFxuICAgICAgdXJsOiB0aGlzLl9ub3JtYWxpemVVcmwocmVxdWVzdF8udXJsKSxcbiAgICB9O1xuICAgIGNvbnN0IGh0dHBBcGkgPSBuZXcgSHR0cEFwaSh0aGlzLCBvcHRpb25zKTtcbiAgICAvLyBsb2cgYXBpIHVzYWdlIGFuZCBpdHMgcXVvdGFcbiAgICBodHRwQXBpLm9uKCdyZXNwb25zZScsIChyZXNwb25zZTogSHR0cFJlc3BvbnNlKSA9PiB7XG4gICAgICBpZiAocmVzcG9uc2UuaGVhZGVycyAmJiByZXNwb25zZS5oZWFkZXJzWydzZm9yY2UtbGltaXQtaW5mbyddKSB7XG4gICAgICAgIGNvbnN0IGFwaVVzYWdlID0gcmVzcG9uc2UuaGVhZGVyc1snc2ZvcmNlLWxpbWl0LWluZm8nXS5tYXRjaChcbiAgICAgICAgICAvYXBpLXVzYWdlPShcXGQrKVxcLyhcXGQrKS8sXG4gICAgICAgICk7XG4gICAgICAgIGlmIChhcGlVc2FnZSkge1xuICAgICAgICAgIHRoaXMubGltaXRJbmZvID0ge1xuICAgICAgICAgICAgYXBpVXNhZ2U6IHtcbiAgICAgICAgICAgICAgdXNlZDogcGFyc2VJbnQoYXBpVXNhZ2VbMV0sIDEwKSxcbiAgICAgICAgICAgICAgbGltaXQ6IHBhcnNlSW50KGFwaVVzYWdlWzJdLCAxMCksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gaHR0cEFwaS5yZXF1ZXN0PFI+KHJlcXVlc3RfKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kIEhUVFAgR0VUIHJlcXVlc3RcbiAgICpcbiAgICogRW5kcG9pbnQgVVJMIGNhbiBiZSBhYnNvbHV0ZSBVUkwgKCdodHRwczovL25hMS5zYWxlc2ZvcmNlLmNvbS9zZXJ2aWNlcy9kYXRhL3YzMi4wL3NvYmplY3RzL0FjY291bnQvZGVzY3JpYmUnKVxuICAgKiAsIHJlbGF0aXZlIHBhdGggZnJvbSByb290ICgnL3NlcnZpY2VzL2RhdGEvdjMyLjAvc29iamVjdHMvQWNjb3VudC9kZXNjcmliZScpXG4gICAqICwgb3IgcmVsYXRpdmUgcGF0aCBmcm9tIHZlcnNpb24gcm9vdCAoJy9zb2JqZWN0cy9BY2NvdW50L2Rlc2NyaWJlJykuXG4gICAqL1xuICByZXF1ZXN0R2V0PFIgPSB1bmtub3duPih1cmw6IHN0cmluZywgb3B0aW9ucz86IE9iamVjdCkge1xuICAgIGNvbnN0IHJlcXVlc3Q6IEh0dHBSZXF1ZXN0ID0geyBtZXRob2Q6ICdHRVQnLCB1cmwgfTtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0PFI+KHJlcXVlc3QsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmQgSFRUUCBQT1NUIHJlcXVlc3Qgd2l0aCBKU09OIGJvZHksIHdpdGggY29ubmVjdGVkIHNlc3Npb24gaW5mb3JtYXRpb25cbiAgICpcbiAgICogRW5kcG9pbnQgVVJMIGNhbiBiZSBhYnNvbHV0ZSBVUkwgKCdodHRwczovL25hMS5zYWxlc2ZvcmNlLmNvbS9zZXJ2aWNlcy9kYXRhL3YzMi4wL3NvYmplY3RzL0FjY291bnQvZGVzY3JpYmUnKVxuICAgKiAsIHJlbGF0aXZlIHBhdGggZnJvbSByb290ICgnL3NlcnZpY2VzL2RhdGEvdjMyLjAvc29iamVjdHMvQWNjb3VudC9kZXNjcmliZScpXG4gICAqICwgb3IgcmVsYXRpdmUgcGF0aCBmcm9tIHZlcnNpb24gcm9vdCAoJy9zb2JqZWN0cy9BY2NvdW50L2Rlc2NyaWJlJykuXG4gICAqL1xuICByZXF1ZXN0UG9zdDxSID0gdW5rbm93bj4odXJsOiBzdHJpbmcsIGJvZHk6IE9iamVjdCwgb3B0aW9ucz86IE9iamVjdCkge1xuICAgIGNvbnN0IHJlcXVlc3Q6IEh0dHBSZXF1ZXN0ID0ge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICB1cmwsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICAgIGhlYWRlcnM6IHsgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgIH07XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdDxSPihyZXF1ZXN0LCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kIEhUVFAgUFVUIHJlcXVlc3Qgd2l0aCBKU09OIGJvZHksIHdpdGggY29ubmVjdGVkIHNlc3Npb24gaW5mb3JtYXRpb25cbiAgICpcbiAgICogRW5kcG9pbnQgVVJMIGNhbiBiZSBhYnNvbHV0ZSBVUkwgKCdodHRwczovL25hMS5zYWxlc2ZvcmNlLmNvbS9zZXJ2aWNlcy9kYXRhL3YzMi4wL3NvYmplY3RzL0FjY291bnQvZGVzY3JpYmUnKVxuICAgKiAsIHJlbGF0aXZlIHBhdGggZnJvbSByb290ICgnL3NlcnZpY2VzL2RhdGEvdjMyLjAvc29iamVjdHMvQWNjb3VudC9kZXNjcmliZScpXG4gICAqICwgb3IgcmVsYXRpdmUgcGF0aCBmcm9tIHZlcnNpb24gcm9vdCAoJy9zb2JqZWN0cy9BY2NvdW50L2Rlc2NyaWJlJykuXG4gICAqL1xuICByZXF1ZXN0UHV0PFI+KHVybDogc3RyaW5nLCBib2R5OiBPYmplY3QsIG9wdGlvbnM/OiBPYmplY3QpIHtcbiAgICBjb25zdCByZXF1ZXN0OiBIdHRwUmVxdWVzdCA9IHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICB1cmwsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICAgIGhlYWRlcnM6IHsgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgIH07XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdDxSPihyZXF1ZXN0LCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kIEhUVFAgUEFUQ0ggcmVxdWVzdCB3aXRoIEpTT04gYm9keVxuICAgKlxuICAgKiBFbmRwb2ludCBVUkwgY2FuIGJlIGFic29sdXRlIFVSTCAoJ2h0dHBzOi8vbmExLnNhbGVzZm9yY2UuY29tL3NlcnZpY2VzL2RhdGEvdjMyLjAvc29iamVjdHMvQWNjb3VudC9kZXNjcmliZScpXG4gICAqICwgcmVsYXRpdmUgcGF0aCBmcm9tIHJvb3QgKCcvc2VydmljZXMvZGF0YS92MzIuMC9zb2JqZWN0cy9BY2NvdW50L2Rlc2NyaWJlJylcbiAgICogLCBvciByZWxhdGl2ZSBwYXRoIGZyb20gdmVyc2lvbiByb290ICgnL3NvYmplY3RzL0FjY291bnQvZGVzY3JpYmUnKS5cbiAgICovXG4gIHJlcXVlc3RQYXRjaDxSID0gdW5rbm93bj4odXJsOiBzdHJpbmcsIGJvZHk6IE9iamVjdCwgb3B0aW9ucz86IE9iamVjdCkge1xuICAgIGNvbnN0IHJlcXVlc3Q6IEh0dHBSZXF1ZXN0ID0ge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgdXJsLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSksXG4gICAgICBoZWFkZXJzOiB7ICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICB9O1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3Q8Uj4ocmVxdWVzdCwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogU2VuZCBIVFRQIERFTEVURSByZXF1ZXN0XG4gICAqXG4gICAqIEVuZHBvaW50IFVSTCBjYW4gYmUgYWJzb2x1dGUgVVJMICgnaHR0cHM6Ly9uYTEuc2FsZXNmb3JjZS5jb20vc2VydmljZXMvZGF0YS92MzIuMC9zb2JqZWN0cy9BY2NvdW50L2Rlc2NyaWJlJylcbiAgICogLCByZWxhdGl2ZSBwYXRoIGZyb20gcm9vdCAoJy9zZXJ2aWNlcy9kYXRhL3YzMi4wL3NvYmplY3RzL0FjY291bnQvZGVzY3JpYmUnKVxuICAgKiAsIG9yIHJlbGF0aXZlIHBhdGggZnJvbSB2ZXJzaW9uIHJvb3QgKCcvc29iamVjdHMvQWNjb3VudC9kZXNjcmliZScpLlxuICAgKi9cbiAgcmVxdWVzdERlbGV0ZTxSPih1cmw6IHN0cmluZywgb3B0aW9ucz86IE9iamVjdCkge1xuICAgIGNvbnN0IHJlcXVlc3Q6IEh0dHBSZXF1ZXN0ID0geyBtZXRob2Q6ICdERUxFVEUnLCB1cmwgfTtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0PFI+KHJlcXVlc3QsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqIEBwcml2YXRlICoqL1xuICBfYmFzZVVybCgpIHtcbiAgICByZXR1cm4gW3RoaXMuaW5zdGFuY2VVcmwsICdzZXJ2aWNlcy9kYXRhJywgYHYke3RoaXMudmVyc2lvbn1gXS5qb2luKCcvJyk7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCBwYXRoIHRvIGFic29sdXRlIHVybFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX25vcm1hbGl6ZVVybCh1cmw6IHN0cmluZykge1xuICAgIGlmICh1cmxbMF0gPT09ICcvJykge1xuICAgICAgaWYgKHVybC5pbmRleE9mKHRoaXMuaW5zdGFuY2VVcmwgKyAnL3NlcnZpY2VzLycpID09PSAwKSB7XG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgICB9XG4gICAgICBpZiAodXJsLmluZGV4T2YoJy9zZXJ2aWNlcy8nKSA9PT0gMCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZVVybCArIHVybDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLl9iYXNlVXJsKCkgKyB1cmw7XG4gICAgfVxuICAgIHJldHVybiB1cmw7XG4gIH1cblxuICAvKipcbiAgICpcbiAgICovXG4gIHF1ZXJ5PFQgZXh0ZW5kcyBSZWNvcmQ+KFxuICAgIHNvcWw6IHN0cmluZyxcbiAgICBvcHRpb25zPzogUGFydGlhbDxRdWVyeU9wdGlvbnM+LFxuICApOiBRdWVyeTxTLCBTT2JqZWN0TmFtZXM8Uz4sIFQsICdRdWVyeVJlc3VsdCc+IHtcbiAgICByZXR1cm4gbmV3IFF1ZXJ5PFMsIFNPYmplY3ROYW1lczxTPiwgVCwgJ1F1ZXJ5UmVzdWx0Jz4odGhpcywgc29xbCwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBzZWFyY2ggYnkgU09TTFxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gc29zbCAtIFNPU0wgc3RyaW5nXG4gICAqIEBwYXJhbSB7Q2FsbGJhY2suPEFycmF5LjxSZWNvcmRSZXN1bHQ+Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gICAqIEByZXR1cm5zIHtQcm9taXNlLjxBcnJheS48UmVjb3JkUmVzdWx0Pj59XG4gICAqL1xuICBzZWFyY2goc29zbDogc3RyaW5nKSB7XG4gICAgdmFyIHVybCA9IHRoaXMuX2Jhc2VVcmwoKSArICcvc2VhcmNoP3E9JyArIGVuY29kZVVSSUNvbXBvbmVudChzb3NsKTtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0PFNlYXJjaFJlc3VsdD4odXJsKTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKi9cbiAgcXVlcnlNb3JlKGxvY2F0b3I6IHN0cmluZywgb3B0aW9ucz86IFF1ZXJ5T3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgUXVlcnk8UywgU09iamVjdE5hbWVzPFM+LCBSZWNvcmQsICdRdWVyeVJlc3VsdCc+KFxuICAgICAgdGhpcyxcbiAgICAgIHsgbG9jYXRvciB9LFxuICAgICAgb3B0aW9ucyxcbiAgICApO1xuICB9XG5cbiAgLyogKi9cbiAgX2Vuc3VyZVZlcnNpb24obWFqb3JWZXJzaW9uOiBudW1iZXIpIHtcbiAgICBjb25zdCB2ZXJzaW9ucyA9IHRoaXMudmVyc2lvbi5zcGxpdCgnLicpO1xuICAgIHJldHVybiBwYXJzZUludCh2ZXJzaW9uc1swXSwgMTApID49IG1ham9yVmVyc2lvbjtcbiAgfVxuXG4gIC8qICovXG4gIF9zdXBwb3J0cyhmZWF0dXJlOiBzdHJpbmcpIHtcbiAgICBzd2l0Y2ggKGZlYXR1cmUpIHtcbiAgICAgIGNhc2UgJ3NvYmplY3QtY29sbGVjdGlvbic6IC8vIHNvYmplY3QgY29sbGVjdGlvbiBpcyBhdmFpbGFibGUgb25seSBpbiBBUEkgdmVyIDQyLjArXG4gICAgICAgIHJldHVybiB0aGlzLl9lbnN1cmVWZXJzaW9uKDQyKTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmUgc3BlY2lmaWVkIHJlY29yZHNcbiAgICovXG4gIHJldHJpZXZlPE4gZXh0ZW5kcyBTT2JqZWN0TmFtZXM8Uz4+KFxuICAgIHR5cGU6IE4sXG4gICAgaWRzOiBzdHJpbmcsXG4gICAgb3B0aW9ucz86IFJldHJpZXZlT3B0aW9ucyxcbiAgKTogUHJvbWlzZTxSZWNvcmQ+O1xuICByZXRyaWV2ZTxOIGV4dGVuZHMgU09iamVjdE5hbWVzPFM+PihcbiAgICB0eXBlOiBOLFxuICAgIGlkczogc3RyaW5nW10sXG4gICAgb3B0aW9ucz86IFJldHJpZXZlT3B0aW9ucyxcbiAgKTogUHJvbWlzZTxSZWNvcmRbXT47XG4gIHJldHJpZXZlPE4gZXh0ZW5kcyBTT2JqZWN0TmFtZXM8Uz4+KFxuICAgIHR5cGU6IE4sXG4gICAgaWRzOiBzdHJpbmcgfCBzdHJpbmdbXSxcbiAgICBvcHRpb25zPzogUmV0cmlldmVPcHRpb25zLFxuICApOiBQcm9taXNlPFJlY29yZCB8IFJlY29yZFtdPjtcbiAgYXN5bmMgcmV0cmlldmUoXG4gICAgdHlwZTogc3RyaW5nLFxuICAgIGlkczogc3RyaW5nIHwgc3RyaW5nW10sXG4gICAgb3B0aW9uczogUmV0cmlldmVPcHRpb25zID0ge30sXG4gICkge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KGlkcylcbiAgICAgID8gLy8gY2hlY2sgdGhlIHZlcnNpb24gd2hldGhlciBTT2JqZWN0IGNvbGxlY3Rpb24gQVBJIGlzIHN1cHBvcnRlZCAoNDIuMClcbiAgICAgICAgdGhpcy5fZW5zdXJlVmVyc2lvbig0MilcbiAgICAgICAgPyB0aGlzLl9yZXRyaWV2ZU1hbnkodHlwZSwgaWRzLCBvcHRpb25zKVxuICAgICAgICA6IHRoaXMuX3JldHJpZXZlUGFyYWxsZWwodHlwZSwgaWRzLCBvcHRpb25zKVxuICAgICAgOiB0aGlzLl9yZXRyaWV2ZVNpbmdsZSh0eXBlLCBpZHMsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqIEBwcml2YXRlICovXG4gIGFzeW5jIF9yZXRyaWV2ZVNpbmdsZSh0eXBlOiBzdHJpbmcsIGlkOiBzdHJpbmcsIG9wdGlvbnM6IFJldHJpZXZlT3B0aW9ucykge1xuICAgIGlmICghaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCByZWNvcmQgSUQuIFNwZWNpZnkgdmFsaWQgcmVjb3JkIElEIHZhbHVlJyk7XG4gICAgfVxuICAgIGxldCB1cmwgPSBbdGhpcy5fYmFzZVVybCgpLCAnc29iamVjdHMnLCB0eXBlLCBpZF0uam9pbignLycpO1xuICAgIGNvbnN0IHsgZmllbGRzLCBoZWFkZXJzIH0gPSBvcHRpb25zO1xuICAgIGlmIChmaWVsZHMpIHtcbiAgICAgIHVybCArPSBgP2ZpZWxkcz0ke2ZpZWxkcy5qb2luKCcsJyl9YDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdCh7IG1ldGhvZDogJ0dFVCcsIHVybCwgaGVhZGVycyB9KTtcbiAgfVxuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICBhc3luYyBfcmV0cmlldmVQYXJhbGxlbChcbiAgICB0eXBlOiBzdHJpbmcsXG4gICAgaWRzOiBzdHJpbmdbXSxcbiAgICBvcHRpb25zOiBSZXRyaWV2ZU9wdGlvbnMsXG4gICkge1xuICAgIGlmIChpZHMubGVuZ3RoID4gdGhpcy5fbWF4UmVxdWVzdCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFeGNlZWRlZCBtYXggbGltaXQgb2YgY29uY3VycmVudCBjYWxsJyk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLmFsbChcbiAgICAgIGlkcy5tYXAoKGlkKSA9PlxuICAgICAgICB0aGlzLl9yZXRyaWV2ZVNpbmdsZSh0eXBlLCBpZCwgb3B0aW9ucykuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgIGlmIChvcHRpb25zLmFsbE9yTm9uZSB8fCBlcnIuZXJyb3JDb2RlICE9PSAnTk9UX0ZPVU5EJykge1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSksXG4gICAgICApLFxuICAgICk7XG4gIH1cblxuICAvKiogQHByaXZhdGUgKi9cbiAgYXN5bmMgX3JldHJpZXZlTWFueSh0eXBlOiBzdHJpbmcsIGlkczogc3RyaW5nW10sIG9wdGlvbnM6IFJldHJpZXZlT3B0aW9ucykge1xuICAgIGlmIChpZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGNvbnN0IHVybCA9IFt0aGlzLl9iYXNlVXJsKCksICdjb21wb3NpdGUnLCAnc29iamVjdHMnLCB0eXBlXS5qb2luKCcvJyk7XG4gICAgY29uc3QgZmllbGRzID1cbiAgICAgIG9wdGlvbnMuZmllbGRzIHx8XG4gICAgICAoYXdhaXQgdGhpcy5kZXNjcmliZSQodHlwZSkpLmZpZWxkcy5tYXAoKGZpZWxkKSA9PiBmaWVsZC5uYW1lKTtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgdXJsLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBpZHMsIGZpZWxkcyB9KSxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgLi4uKG9wdGlvbnMuaGVhZGVycyB8fCB7fSksXG4gICAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSByZWNvcmRzXG4gICAqL1xuICBjcmVhdGU8XG4gICAgTiBleHRlbmRzIFNPYmplY3ROYW1lczxTPixcbiAgICBJbnB1dFJlY29yZCBleHRlbmRzIFNPYmplY3RJbnB1dFJlY29yZDxTLCBOPiA9IFNPYmplY3RJbnB1dFJlY29yZDxTLCBOPlxuICA+KFxuICAgIHR5cGU6IE4sXG4gICAgcmVjb3JkczogSW5wdXRSZWNvcmRbXSxcbiAgICBvcHRpb25zPzogRG1sT3B0aW9ucyxcbiAgKTogUHJvbWlzZTxTYXZlUmVzdWx0W10+O1xuICBjcmVhdGU8XG4gICAgTiBleHRlbmRzIFNPYmplY3ROYW1lczxTPixcbiAgICBJbnB1dFJlY29yZCBleHRlbmRzIFNPYmplY3RJbnB1dFJlY29yZDxTLCBOPiA9IFNPYmplY3RJbnB1dFJlY29yZDxTLCBOPlxuICA+KHR5cGU6IE4sIHJlY29yZDogSW5wdXRSZWNvcmQsIG9wdGlvbnM/OiBEbWxPcHRpb25zKTogUHJvbWlzZTxTYXZlUmVzdWx0PjtcbiAgY3JlYXRlPFxuICAgIE4gZXh0ZW5kcyBTT2JqZWN0TmFtZXM8Uz4sXG4gICAgSW5wdXRSZWNvcmQgZXh0ZW5kcyBTT2JqZWN0SW5wdXRSZWNvcmQ8UywgTj4gPSBTT2JqZWN0SW5wdXRSZWNvcmQ8UywgTj5cbiAgPihcbiAgICB0eXBlOiBOLFxuICAgIHJlY29yZHM6IElucHV0UmVjb3JkIHwgSW5wdXRSZWNvcmRbXSxcbiAgICBvcHRpb25zPzogRG1sT3B0aW9ucyxcbiAgKTogUHJvbWlzZTxTYXZlUmVzdWx0IHwgU2F2ZVJlc3VsdFtdPjtcbiAgLyoqXG4gICAqIEBwYXJhbSB0eXBlXG4gICAqIEBwYXJhbSByZWNvcmRzXG4gICAqIEBwYXJhbSBvcHRpb25zXG4gICAqL1xuICBhc3luYyBjcmVhdGUoXG4gICAgdHlwZTogc3RyaW5nLFxuICAgIHJlY29yZHM6IFJlY29yZCB8IFJlY29yZFtdLFxuICAgIG9wdGlvbnM6IERtbE9wdGlvbnMgPSB7fSxcbiAgKSB7XG4gICAgY29uc3QgcmV0ID0gQXJyYXkuaXNBcnJheShyZWNvcmRzKVxuICAgICAgPyAvLyBjaGVjayB0aGUgdmVyc2lvbiB3aGV0aGVyIFNPYmplY3QgY29sbGVjdGlvbiBBUEkgaXMgc3VwcG9ydGVkICg0Mi4wKVxuICAgICAgICB0aGlzLl9lbnN1cmVWZXJzaW9uKDQyKVxuICAgICAgICA/IGF3YWl0IHRoaXMuX2NyZWF0ZU1hbnkodHlwZSwgcmVjb3Jkcywgb3B0aW9ucylcbiAgICAgICAgOiBhd2FpdCB0aGlzLl9jcmVhdGVQYXJhbGxlbCh0eXBlLCByZWNvcmRzLCBvcHRpb25zKVxuICAgICAgOiBhd2FpdCB0aGlzLl9jcmVhdGVTaW5nbGUodHlwZSwgcmVjb3Jkcywgb3B0aW9ucyk7XG4gICAgcmV0dXJuIHJldDtcbiAgfVxuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICBhc3luYyBfY3JlYXRlU2luZ2xlKHR5cGU6IHN0cmluZywgcmVjb3JkOiBSZWNvcmQsIG9wdGlvbnM6IERtbE9wdGlvbnMpIHtcbiAgICBjb25zdCB7IElkLCB0eXBlOiBydHlwZSwgYXR0cmlidXRlcywgLi4ucmVjIH0gPSByZWNvcmQ7XG4gICAgY29uc3Qgc29iamVjdFR5cGUgPSB0eXBlIHx8IChhdHRyaWJ1dGVzICYmIGF0dHJpYnV0ZXMudHlwZSkgfHwgcnR5cGU7XG4gICAgaWYgKCFzb2JqZWN0VHlwZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBTT2JqZWN0IFR5cGUgZGVmaW5lZCBpbiByZWNvcmQnKTtcbiAgICB9XG4gICAgY29uc3QgdXJsID0gW3RoaXMuX2Jhc2VVcmwoKSwgJ3NvYmplY3RzJywgc29iamVjdFR5cGVdLmpvaW4oJy8nKTtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgdXJsLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVjKSxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgLi4uKG9wdGlvbnMuaGVhZGVycyB8fCB7fSksXG4gICAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBwcml2YXRlICovXG4gIGFzeW5jIF9jcmVhdGVQYXJhbGxlbCh0eXBlOiBzdHJpbmcsIHJlY29yZHM6IFJlY29yZFtdLCBvcHRpb25zOiBEbWxPcHRpb25zKSB7XG4gICAgaWYgKHJlY29yZHMubGVuZ3RoID4gdGhpcy5fbWF4UmVxdWVzdCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFeGNlZWRlZCBtYXggbGltaXQgb2YgY29uY3VycmVudCBjYWxsJyk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLmFsbChcbiAgICAgIHJlY29yZHMubWFwKChyZWNvcmQpID0+XG4gICAgICAgIHRoaXMuX2NyZWF0ZVNpbmdsZSh0eXBlLCByZWNvcmQsIG9wdGlvbnMpLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAvLyBiZSBhd2FyZSB0aGF0IGFsbE9yTm9uZSBpbiBwYXJhbGxlbCBtb2RlIHdpbGwgbm90IHJldmVydCB0aGUgb3RoZXIgc3VjY2Vzc2Z1bCByZXF1ZXN0c1xuICAgICAgICAgIC8vIGl0IG9ubHkgcmFpc2VzIGVycm9yIHdoZW4gbWV0IGF0IGxlYXN0IG9uZSBmYWlsZWQgcmVxdWVzdC5cbiAgICAgICAgICBpZiAob3B0aW9ucy5hbGxPck5vbmUgfHwgIWVyci5lcnJvckNvZGUpIHtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRvU2F2ZVJlc3VsdChlcnIpO1xuICAgICAgICB9KSxcbiAgICAgICksXG4gICAgKTtcbiAgfVxuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICBhc3luYyBfY3JlYXRlTWFueShcbiAgICB0eXBlOiBzdHJpbmcsXG4gICAgcmVjb3JkczogUmVjb3JkW10sXG4gICAgb3B0aW9uczogRG1sT3B0aW9ucyxcbiAgKTogUHJvbWlzZTxTYXZlUmVzdWx0W10+IHtcbiAgICBpZiAocmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xuICAgIH1cbiAgICBpZiAocmVjb3Jkcy5sZW5ndGggPiBNQVhfRE1MX0NPVU5UICYmIG9wdGlvbnMuYWxsb3dSZWN1cnNpdmUpIHtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIC4uLihhd2FpdCB0aGlzLl9jcmVhdGVNYW55KFxuICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgcmVjb3Jkcy5zbGljZSgwLCBNQVhfRE1MX0NPVU5UKSxcbiAgICAgICAgICBvcHRpb25zLFxuICAgICAgICApKSxcbiAgICAgICAgLi4uKGF3YWl0IHRoaXMuX2NyZWF0ZU1hbnkoXG4gICAgICAgICAgdHlwZSxcbiAgICAgICAgICByZWNvcmRzLnNsaWNlKE1BWF9ETUxfQ09VTlQpLFxuICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICkpLFxuICAgICAgXTtcbiAgICB9XG4gICAgY29uc3QgX3JlY29yZHMgPSByZWNvcmRzLm1hcCgocmVjb3JkKSA9PiB7XG4gICAgICBjb25zdCB7IElkLCB0eXBlOiBydHlwZSwgYXR0cmlidXRlcywgLi4ucmVjIH0gPSByZWNvcmQ7XG4gICAgICBjb25zdCBzb2JqZWN0VHlwZSA9IHR5cGUgfHwgKGF0dHJpYnV0ZXMgJiYgYXR0cmlidXRlcy50eXBlKSB8fCBydHlwZTtcbiAgICAgIGlmICghc29iamVjdFR5cGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBTT2JqZWN0IFR5cGUgZGVmaW5lZCBpbiByZWNvcmQnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7IGF0dHJpYnV0ZXM6IHsgdHlwZTogc29iamVjdFR5cGUgfSwgLi4ucmVjIH07XG4gICAgfSk7XG4gICAgY29uc3QgdXJsID0gW3RoaXMuX2Jhc2VVcmwoKSwgJ2NvbXBvc2l0ZScsICdzb2JqZWN0cyddLmpvaW4oJy8nKTtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgdXJsLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhbGxPck5vbmU6IG9wdGlvbnMuYWxsT3JOb25lIHx8IGZhbHNlLFxuICAgICAgICByZWNvcmRzOiBfcmVjb3JkcyxcbiAgICAgIH0pLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAuLi4ob3B0aW9ucy5oZWFkZXJzIHx8IHt9KSxcbiAgICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU3lub255bSBvZiBDb25uZWN0aW9uI2NyZWF0ZSgpXG4gICAqL1xuICBpbnNlcnQgPSB0aGlzLmNyZWF0ZTtcblxuICAvKipcbiAgICogVXBkYXRlIHJlY29yZHNcbiAgICovXG4gIHVwZGF0ZTxcbiAgICBOIGV4dGVuZHMgU09iamVjdE5hbWVzPFM+LFxuICAgIFVwZGF0ZVJlY29yZCBleHRlbmRzIFNPYmplY3RVcGRhdGVSZWNvcmQ8UywgTj4gPSBTT2JqZWN0VXBkYXRlUmVjb3JkPFMsIE4+XG4gID4oXG4gICAgdHlwZTogTixcbiAgICByZWNvcmRzOiBVcGRhdGVSZWNvcmRbXSxcbiAgICBvcHRpb25zPzogRG1sT3B0aW9ucyxcbiAgKTogUHJvbWlzZTxTYXZlUmVzdWx0W10+O1xuICB1cGRhdGU8XG4gICAgTiBleHRlbmRzIFNPYmplY3ROYW1lczxTPixcbiAgICBVcGRhdGVSZWNvcmQgZXh0ZW5kcyBTT2JqZWN0VXBkYXRlUmVjb3JkPFMsIE4+ID0gU09iamVjdFVwZGF0ZVJlY29yZDxTLCBOPlxuICA+KHR5cGU6IE4sIHJlY29yZDogVXBkYXRlUmVjb3JkLCBvcHRpb25zPzogRG1sT3B0aW9ucyk6IFByb21pc2U8U2F2ZVJlc3VsdD47XG4gIHVwZGF0ZTxcbiAgICBOIGV4dGVuZHMgU09iamVjdE5hbWVzPFM+LFxuICAgIFVwZGF0ZVJlY29yZCBleHRlbmRzIFNPYmplY3RVcGRhdGVSZWNvcmQ8UywgTj4gPSBTT2JqZWN0VXBkYXRlUmVjb3JkPFMsIE4+XG4gID4oXG4gICAgdHlwZTogTixcbiAgICByZWNvcmRzOiBVcGRhdGVSZWNvcmQgfCBVcGRhdGVSZWNvcmRbXSxcbiAgICBvcHRpb25zPzogRG1sT3B0aW9ucyxcbiAgKTogUHJvbWlzZTxTYXZlUmVzdWx0IHwgU2F2ZVJlc3VsdFtdPjtcbiAgLyoqXG4gICAqIEBwYXJhbSB0eXBlXG4gICAqIEBwYXJhbSByZWNvcmRzXG4gICAqIEBwYXJhbSBvcHRpb25zXG4gICAqL1xuICB1cGRhdGU8TiBleHRlbmRzIFNPYmplY3ROYW1lczxTPj4oXG4gICAgdHlwZTogTixcbiAgICByZWNvcmRzOiBSZWNvcmQgfCBSZWNvcmRbXSxcbiAgICBvcHRpb25zOiBEbWxPcHRpb25zID0ge30sXG4gICk6IFByb21pc2U8U2F2ZVJlc3VsdCB8IFNhdmVSZXN1bHRbXT4ge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KHJlY29yZHMpXG4gICAgICA/IC8vIGNoZWNrIHRoZSB2ZXJzaW9uIHdoZXRoZXIgU09iamVjdCBjb2xsZWN0aW9uIEFQSSBpcyBzdXBwb3J0ZWQgKDQyLjApXG4gICAgICAgIHRoaXMuX2Vuc3VyZVZlcnNpb24oNDIpXG4gICAgICAgID8gdGhpcy5fdXBkYXRlTWFueSh0eXBlLCByZWNvcmRzLCBvcHRpb25zKVxuICAgICAgICA6IHRoaXMuX3VwZGF0ZVBhcmFsbGVsKHR5cGUsIHJlY29yZHMsIG9wdGlvbnMpXG4gICAgICA6IHRoaXMuX3VwZGF0ZVNpbmdsZSh0eXBlLCByZWNvcmRzLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICBhc3luYyBfdXBkYXRlU2luZ2xlKFxuICAgIHR5cGU6IHN0cmluZyxcbiAgICByZWNvcmQ6IFJlY29yZCxcbiAgICBvcHRpb25zOiBEbWxPcHRpb25zLFxuICApOiBQcm9taXNlPFNhdmVSZXN1bHQ+IHtcbiAgICBjb25zdCB7IElkOiBpZCwgdHlwZTogcnR5cGUsIGF0dHJpYnV0ZXMsIC4uLnJlYyB9ID0gcmVjb3JkO1xuICAgIGlmICghaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUmVjb3JkIGlkIGlzIG5vdCBmb3VuZCBpbiByZWNvcmQuJyk7XG4gICAgfVxuICAgIGNvbnN0IHNvYmplY3RUeXBlID0gdHlwZSB8fCAoYXR0cmlidXRlcyAmJiBhdHRyaWJ1dGVzLnR5cGUpIHx8IHJ0eXBlO1xuICAgIGlmICghc29iamVjdFR5cGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gU09iamVjdCBUeXBlIGRlZmluZWQgaW4gcmVjb3JkJyk7XG4gICAgfVxuICAgIGNvbnN0IHVybCA9IFt0aGlzLl9iYXNlVXJsKCksICdzb2JqZWN0cycsIHNvYmplY3RUeXBlLCBpZF0uam9pbignLycpO1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QoXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgICAgdXJsLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZWMpLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgLi4uKG9wdGlvbnMuaGVhZGVycyB8fCB7fSksXG4gICAgICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vQ29udGVudFJlc3BvbnNlOiB7IGlkLCBzdWNjZXNzOiB0cnVlLCBlcnJvcnM6IFtdIH0sXG4gICAgICB9LFxuICAgICk7XG4gIH1cblxuICAvKiogQHByaXZhdGUgKi9cbiAgYXN5bmMgX3VwZGF0ZVBhcmFsbGVsKHR5cGU6IHN0cmluZywgcmVjb3JkczogUmVjb3JkW10sIG9wdGlvbnM6IERtbE9wdGlvbnMpIHtcbiAgICBpZiAocmVjb3Jkcy5sZW5ndGggPiB0aGlzLl9tYXhSZXF1ZXN0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4Y2VlZGVkIG1heCBsaW1pdCBvZiBjb25jdXJyZW50IGNhbGwnKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFxuICAgICAgcmVjb3Jkcy5tYXAoKHJlY29yZCkgPT5cbiAgICAgICAgdGhpcy5fdXBkYXRlU2luZ2xlKHR5cGUsIHJlY29yZCwgb3B0aW9ucykuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgIC8vIGJlIGF3YXJlIHRoYXQgYWxsT3JOb25lIGluIHBhcmFsbGVsIG1vZGUgd2lsbCBub3QgcmV2ZXJ0IHRoZSBvdGhlciBzdWNjZXNzZnVsIHJlcXVlc3RzXG4gICAgICAgICAgLy8gaXQgb25seSByYWlzZXMgZXJyb3Igd2hlbiBtZXQgYXQgbGVhc3Qgb25lIGZhaWxlZCByZXF1ZXN0LlxuICAgICAgICAgIGlmIChvcHRpb25zLmFsbE9yTm9uZSB8fCAhZXJyLmVycm9yQ29kZSkge1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdG9TYXZlUmVzdWx0KGVycik7XG4gICAgICAgIH0pLFxuICAgICAgKSxcbiAgICApO1xuICB9XG5cbiAgLyoqIEBwcml2YXRlICovXG4gIGFzeW5jIF91cGRhdGVNYW55KFxuICAgIHR5cGU6IHN0cmluZyxcbiAgICByZWNvcmRzOiBSZWNvcmRbXSxcbiAgICBvcHRpb25zOiBEbWxPcHRpb25zLFxuICApOiBQcm9taXNlPFNhdmVSZXN1bHRbXT4ge1xuICAgIGlmIChyZWNvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBpZiAocmVjb3Jkcy5sZW5ndGggPiBNQVhfRE1MX0NPVU5UICYmIG9wdGlvbnMuYWxsb3dSZWN1cnNpdmUpIHtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIC4uLihhd2FpdCB0aGlzLl91cGRhdGVNYW55KFxuICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgcmVjb3Jkcy5zbGljZSgwLCBNQVhfRE1MX0NPVU5UKSxcbiAgICAgICAgICBvcHRpb25zLFxuICAgICAgICApKSxcbiAgICAgICAgLi4uKGF3YWl0IHRoaXMuX3VwZGF0ZU1hbnkoXG4gICAgICAgICAgdHlwZSxcbiAgICAgICAgICByZWNvcmRzLnNsaWNlKE1BWF9ETUxfQ09VTlQpLFxuICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICkpLFxuICAgICAgXTtcbiAgICB9XG4gICAgY29uc3QgX3JlY29yZHMgPSByZWNvcmRzLm1hcCgocmVjb3JkKSA9PiB7XG4gICAgICBjb25zdCB7IElkOiBpZCwgdHlwZTogcnR5cGUsIGF0dHJpYnV0ZXMsIC4uLnJlYyB9ID0gcmVjb3JkO1xuICAgICAgaWYgKCFpZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlY29yZCBpZCBpcyBub3QgZm91bmQgaW4gcmVjb3JkLicpO1xuICAgICAgfVxuICAgICAgY29uc3Qgc29iamVjdFR5cGUgPSB0eXBlIHx8IChhdHRyaWJ1dGVzICYmIGF0dHJpYnV0ZXMudHlwZSkgfHwgcnR5cGU7XG4gICAgICBpZiAoIXNvYmplY3RUeXBlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gU09iamVjdCBUeXBlIGRlZmluZWQgaW4gcmVjb3JkJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4geyBpZCwgYXR0cmlidXRlczogeyB0eXBlOiBzb2JqZWN0VHlwZSB9LCAuLi5yZWMgfTtcbiAgICB9KTtcbiAgICBjb25zdCB1cmwgPSBbdGhpcy5fYmFzZVVybCgpLCAnY29tcG9zaXRlJywgJ3NvYmplY3RzJ10uam9pbignLycpO1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3Qoe1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgdXJsLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhbGxPck5vbmU6IG9wdGlvbnMuYWxsT3JOb25lIHx8IGZhbHNlLFxuICAgICAgICByZWNvcmRzOiBfcmVjb3JkcyxcbiAgICAgIH0pLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAuLi4ob3B0aW9ucy5oZWFkZXJzIHx8IHt9KSxcbiAgICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVXBzZXJ0IHJlY29yZHNcbiAgICovXG4gIHVwc2VydDxcbiAgICBOIGV4dGVuZHMgU09iamVjdE5hbWVzPFM+LFxuICAgIElucHV0UmVjb3JkIGV4dGVuZHMgU09iamVjdElucHV0UmVjb3JkPFMsIE4+ID0gU09iamVjdElucHV0UmVjb3JkPFMsIE4+LFxuICAgIEZpZWxkTmFtZXMgZXh0ZW5kcyBTT2JqZWN0RmllbGROYW1lczxTLCBOPiA9IFNPYmplY3RGaWVsZE5hbWVzPFMsIE4+XG4gID4oXG4gICAgdHlwZTogTixcbiAgICByZWNvcmRzOiBJbnB1dFJlY29yZFtdLFxuICAgIGV4dElkRmllbGQ6IEZpZWxkTmFtZXMsXG4gICAgb3B0aW9ucz86IERtbE9wdGlvbnMsXG4gICk6IFByb21pc2U8VXBzZXJ0UmVzdWx0W10+O1xuICB1cHNlcnQ8XG4gICAgTiBleHRlbmRzIFNPYmplY3ROYW1lczxTPixcbiAgICBJbnB1dFJlY29yZCBleHRlbmRzIFNPYmplY3RJbnB1dFJlY29yZDxTLCBOPiA9IFNPYmplY3RJbnB1dFJlY29yZDxTLCBOPixcbiAgICBGaWVsZE5hbWVzIGV4dGVuZHMgU09iamVjdEZpZWxkTmFtZXM8UywgTj4gPSBTT2JqZWN0RmllbGROYW1lczxTLCBOPlxuICA+KFxuICAgIHR5cGU6IE4sXG4gICAgcmVjb3JkOiBJbnB1dFJlY29yZCxcbiAgICBleHRJZEZpZWxkOiBGaWVsZE5hbWVzLFxuICAgIG9wdGlvbnM/OiBEbWxPcHRpb25zLFxuICApOiBQcm9taXNlPFVwc2VydFJlc3VsdD47XG4gIHVwc2VydDxcbiAgICBOIGV4dGVuZHMgU09iamVjdE5hbWVzPFM+LFxuICAgIElucHV0UmVjb3JkIGV4dGVuZHMgU09iamVjdElucHV0UmVjb3JkPFMsIE4+ID0gU09iamVjdElucHV0UmVjb3JkPFMsIE4+LFxuICAgIEZpZWxkTmFtZXMgZXh0ZW5kcyBTT2JqZWN0RmllbGROYW1lczxTLCBOPiA9IFNPYmplY3RGaWVsZE5hbWVzPFMsIE4+XG4gID4oXG4gICAgdHlwZTogTixcbiAgICByZWNvcmRzOiBJbnB1dFJlY29yZCB8IElucHV0UmVjb3JkW10sXG4gICAgZXh0SWRGaWVsZDogRmllbGROYW1lcyxcbiAgICBvcHRpb25zPzogRG1sT3B0aW9ucyxcbiAgKTogUHJvbWlzZTxVcHNlcnRSZXN1bHQgfCBVcHNlcnRSZXN1bHRbXT47XG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gdHlwZVxuICAgKiBAcGFyYW0gcmVjb3Jkc1xuICAgKiBAcGFyYW0gZXh0SWRGaWVsZFxuICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgKi9cbiAgYXN5bmMgdXBzZXJ0KFxuICAgIHR5cGU6IHN0cmluZyxcbiAgICByZWNvcmRzOiBSZWNvcmQgfCBSZWNvcmRbXSxcbiAgICBleHRJZEZpZWxkOiBzdHJpbmcsXG4gICAgb3B0aW9uczogRG1sT3B0aW9ucyA9IHt9LFxuICApOiBQcm9taXNlPFNhdmVSZXN1bHQgfCBTYXZlUmVzdWx0W10+IHtcbiAgICBjb25zdCBpc0FycmF5ID0gQXJyYXkuaXNBcnJheShyZWNvcmRzKTtcbiAgICBjb25zdCBfcmVjb3JkcyA9IEFycmF5LmlzQXJyYXkocmVjb3JkcykgPyByZWNvcmRzIDogW3JlY29yZHNdO1xuICAgIGlmIChfcmVjb3Jkcy5sZW5ndGggPiB0aGlzLl9tYXhSZXF1ZXN0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4Y2VlZGVkIG1heCBsaW1pdCBvZiBjb25jdXJyZW50IGNhbGwnKTtcbiAgICB9XG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgX3JlY29yZHMubWFwKChyZWNvcmQpID0+IHtcbiAgICAgICAgY29uc3QgeyBbZXh0SWRGaWVsZF06IGV4dElkLCB0eXBlOiBydHlwZSwgYXR0cmlidXRlcywgLi4ucmVjIH0gPSByZWNvcmQ7XG4gICAgICAgIGNvbnN0IHVybCA9IFt0aGlzLl9iYXNlVXJsKCksICdzb2JqZWN0cycsIHR5cGUsIGV4dElkRmllbGQsIGV4dElkXS5qb2luKFxuICAgICAgICAgICcvJyxcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdDxTYXZlUmVzdWx0PihcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICAgICAgICB1cmwsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZWMpLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAuLi4ob3B0aW9ucy5oZWFkZXJzIHx8IHt9KSxcbiAgICAgICAgICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBub0NvbnRlbnRSZXNwb25zZTogeyBzdWNjZXNzOiB0cnVlLCBlcnJvcnM6IFtdIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgKS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgLy8gQmUgYXdhcmUgdGhhdCBgYWxsT3JOb25lYCBvcHRpb24gaW4gdXBzZXJ0IG1ldGhvZFxuICAgICAgICAgIC8vIHdpbGwgbm90IHJldmVydCB0aGUgb3RoZXIgc3VjY2Vzc2Z1bCByZXF1ZXN0cy5cbiAgICAgICAgICAvLyBJdCBvbmx5IHJhaXNlcyBlcnJvciB3aGVuIG1ldCBhdCBsZWFzdCBvbmUgZmFpbGVkIHJlcXVlc3QuXG4gICAgICAgICAgaWYgKCFpc0FycmF5IHx8IG9wdGlvbnMuYWxsT3JOb25lIHx8ICFlcnIuZXJyb3JDb2RlKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0b1NhdmVSZXN1bHQoZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICB9KSxcbiAgICApO1xuICAgIHJldHVybiBpc0FycmF5ID8gcmVzdWx0cyA6IHJlc3VsdHNbMF07XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlIHJlY29yZHNcbiAgICovXG4gIGRlc3Ryb3k8TiBleHRlbmRzIFNPYmplY3ROYW1lczxTPj4oXG4gICAgdHlwZTogTixcbiAgICBpZHM6IHN0cmluZ1tdLFxuICAgIG9wdGlvbnM/OiBEbWxPcHRpb25zLFxuICApOiBQcm9taXNlPFNhdmVSZXN1bHRbXT47XG4gIGRlc3Ryb3k8TiBleHRlbmRzIFNPYmplY3ROYW1lczxTPj4oXG4gICAgdHlwZTogTixcbiAgICBpZDogc3RyaW5nLFxuICAgIG9wdGlvbnM/OiBEbWxPcHRpb25zLFxuICApOiBQcm9taXNlPFNhdmVSZXN1bHQ+O1xuICBkZXN0cm95PE4gZXh0ZW5kcyBTT2JqZWN0TmFtZXM8Uz4+KFxuICAgIHR5cGU6IE4sXG4gICAgaWRzOiBzdHJpbmcgfCBzdHJpbmdbXSxcbiAgICBvcHRpb25zPzogRG1sT3B0aW9ucyxcbiAgKTogUHJvbWlzZTxTYXZlUmVzdWx0IHwgU2F2ZVJlc3VsdFtdPjtcbiAgLyoqXG4gICAqIEBwYXJhbSB0eXBlXG4gICAqIEBwYXJhbSBpZHNcbiAgICogQHBhcmFtIG9wdGlvbnNcbiAgICovXG4gIGFzeW5jIGRlc3Ryb3koXG4gICAgdHlwZTogc3RyaW5nLFxuICAgIGlkczogc3RyaW5nIHwgc3RyaW5nW10sXG4gICAgb3B0aW9uczogRG1sT3B0aW9ucyA9IHt9LFxuICApOiBQcm9taXNlPFNhdmVSZXN1bHQgfCBTYXZlUmVzdWx0W10+IHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShpZHMpXG4gICAgICA/IC8vIGNoZWNrIHRoZSB2ZXJzaW9uIHdoZXRoZXIgU09iamVjdCBjb2xsZWN0aW9uIEFQSSBpcyBzdXBwb3J0ZWQgKDQyLjApXG4gICAgICAgIHRoaXMuX2Vuc3VyZVZlcnNpb24oNDIpXG4gICAgICAgID8gdGhpcy5fZGVzdHJveU1hbnkodHlwZSwgaWRzLCBvcHRpb25zKVxuICAgICAgICA6IHRoaXMuX2Rlc3Ryb3lQYXJhbGxlbCh0eXBlLCBpZHMsIG9wdGlvbnMpXG4gICAgICA6IHRoaXMuX2Rlc3Ryb3lTaW5nbGUodHlwZSwgaWRzLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICBhc3luYyBfZGVzdHJveVNpbmdsZShcbiAgICB0eXBlOiBzdHJpbmcsXG4gICAgaWQ6IHN0cmluZyxcbiAgICBvcHRpb25zOiBEbWxPcHRpb25zLFxuICApOiBQcm9taXNlPFNhdmVSZXN1bHQ+IHtcbiAgICBjb25zdCB1cmwgPSBbdGhpcy5fYmFzZVVybCgpLCAnc29iamVjdHMnLCB0eXBlLCBpZF0uam9pbignLycpO1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QoXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgIHVybCxcbiAgICAgICAgaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzIHx8IHt9LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm9Db250ZW50UmVzcG9uc2U6IHsgaWQsIHN1Y2Nlc3M6IHRydWUsIGVycm9yczogW10gfSxcbiAgICAgIH0sXG4gICAgKTtcbiAgfVxuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICBhc3luYyBfZGVzdHJveVBhcmFsbGVsKHR5cGU6IHN0cmluZywgaWRzOiBzdHJpbmdbXSwgb3B0aW9uczogRG1sT3B0aW9ucykge1xuICAgIGlmIChpZHMubGVuZ3RoID4gdGhpcy5fbWF4UmVxdWVzdCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFeGNlZWRlZCBtYXggbGltaXQgb2YgY29uY3VycmVudCBjYWxsJyk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLmFsbChcbiAgICAgIGlkcy5tYXAoKGlkKSA9PlxuICAgICAgICB0aGlzLl9kZXN0cm95U2luZ2xlKHR5cGUsIGlkLCBvcHRpb25zKS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgLy8gQmUgYXdhcmUgdGhhdCBgYWxsT3JOb25lYCBvcHRpb24gaW4gcGFyYWxsZWwgbW9kZVxuICAgICAgICAgIC8vIHdpbGwgbm90IHJldmVydCB0aGUgb3RoZXIgc3VjY2Vzc2Z1bCByZXF1ZXN0cy5cbiAgICAgICAgICAvLyBJdCBvbmx5IHJhaXNlcyBlcnJvciB3aGVuIG1ldCBhdCBsZWFzdCBvbmUgZmFpbGVkIHJlcXVlc3QuXG4gICAgICAgICAgaWYgKG9wdGlvbnMuYWxsT3JOb25lIHx8ICFlcnIuZXJyb3JDb2RlKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0b1NhdmVSZXN1bHQoZXJyKTtcbiAgICAgICAgfSksXG4gICAgICApLFxuICAgICk7XG4gIH1cblxuICAvKiogQHByaXZhdGUgKi9cbiAgYXN5bmMgX2Rlc3Ryb3lNYW55KFxuICAgIHR5cGU6IHN0cmluZyxcbiAgICBpZHM6IHN0cmluZ1tdLFxuICAgIG9wdGlvbnM6IERtbE9wdGlvbnMsXG4gICk6IFByb21pc2U8U2F2ZVJlc3VsdFtdPiB7XG4gICAgaWYgKGlkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgaWYgKGlkcy5sZW5ndGggPiBNQVhfRE1MX0NPVU5UICYmIG9wdGlvbnMuYWxsb3dSZWN1cnNpdmUpIHtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIC4uLihhd2FpdCB0aGlzLl9kZXN0cm95TWFueShcbiAgICAgICAgICB0eXBlLFxuICAgICAgICAgIGlkcy5zbGljZSgwLCBNQVhfRE1MX0NPVU5UKSxcbiAgICAgICAgICBvcHRpb25zLFxuICAgICAgICApKSxcbiAgICAgICAgLi4uKGF3YWl0IHRoaXMuX2Rlc3Ryb3lNYW55KHR5cGUsIGlkcy5zbGljZShNQVhfRE1MX0NPVU5UKSwgb3B0aW9ucykpLFxuICAgICAgXTtcbiAgICB9XG4gICAgbGV0IHVybCA9XG4gICAgICBbdGhpcy5fYmFzZVVybCgpLCAnY29tcG9zaXRlJywgJ3NvYmplY3RzP2lkcz0nXS5qb2luKCcvJykgKyBpZHMuam9pbignLCcpO1xuICAgIGlmIChvcHRpb25zLmFsbE9yTm9uZSkge1xuICAgICAgdXJsICs9ICcmYWxsT3JOb25lPXRydWUnO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICB1cmwsXG4gICAgICBoZWFkZXJzOiBvcHRpb25zLmhlYWRlcnMgfHwge30sXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU3lub255bSBvZiBDb25uZWN0aW9uI2Rlc3Ryb3koKVxuICAgKi9cbiAgZGVsZXRlID0gdGhpcy5kZXN0cm95O1xuXG4gIC8qKlxuICAgKiBTeW5vbnltIG9mIENvbm5lY3Rpb24jZGVzdHJveSgpXG4gICAqL1xuICBkZWwgPSB0aGlzLmRlc3Ryb3k7XG5cbiAgLyoqXG4gICAqIERlc2NyaWJlIFNPYmplY3QgbWV0YWRhdGFcbiAgICovXG4gIGFzeW5jIGRlc2NyaWJlKHR5cGU6IHN0cmluZyk6IFByb21pc2U8RGVzY3JpYmVTT2JqZWN0UmVzdWx0PiB7XG4gICAgY29uc3QgdXJsID0gW3RoaXMuX2Jhc2VVcmwoKSwgJ3NvYmplY3RzJywgdHlwZSwgJ2Rlc2NyaWJlJ10uam9pbignLycpO1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCB0aGlzLnJlcXVlc3QodXJsKTtcbiAgICByZXR1cm4gYm9keSBhcyBEZXNjcmliZVNPYmplY3RSZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogRGVzY3JpYmUgZ2xvYmFsIFNPYmplY3RzXG4gICAqL1xuICBhc3luYyBkZXNjcmliZUdsb2JhbCgpIHtcbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLl9iYXNlVXJsKCl9L3NvYmplY3RzYDtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgdGhpcy5yZXF1ZXN0KHVybCk7XG4gICAgcmV0dXJuIGJvZHkgYXMgRGVzY3JpYmVHbG9iYWxSZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0IFNPYmplY3QgaW5zdGFuY2VcbiAgICovXG4gIHNvYmplY3Q8TiBleHRlbmRzIFNPYmplY3ROYW1lczxTPj4odHlwZTogTik6IFNPYmplY3Q8UywgTj47XG4gIHNvYmplY3Q8TiBleHRlbmRzIFNPYmplY3ROYW1lczxTPj4odHlwZTogc3RyaW5nKTogU09iamVjdDxTLCBOPjtcbiAgc29iamVjdDxOIGV4dGVuZHMgU09iamVjdE5hbWVzPFM+Pih0eXBlOiBOIHwgc3RyaW5nKTogU09iamVjdDxTLCBOPiB7XG4gICAgY29uc3Qgc28gPVxuICAgICAgKHRoaXMuc29iamVjdHNbdHlwZSBhcyBOXSBhcyBTT2JqZWN0PFMsIE4+IHwgdW5kZWZpbmVkKSB8fFxuICAgICAgbmV3IFNPYmplY3QodGhpcywgdHlwZSBhcyBOKTtcbiAgICB0aGlzLnNvYmplY3RzW3R5cGUgYXMgTl0gPSBzbztcbiAgICByZXR1cm4gc287XG4gIH1cblxuICAvKipcbiAgICogR2V0IGlkZW50aXR5IGluZm9ybWF0aW9uIG9mIGN1cnJlbnQgdXNlclxuICAgKi9cbiAgYXN5bmMgaWRlbnRpdHkob3B0aW9uczogeyBoZWFkZXJzPzogeyBbbmFtZTogc3RyaW5nXTogc3RyaW5nIH0gfSA9IHt9KSB7XG4gICAgbGV0IHVybCA9IHRoaXMudXNlckluZm8gJiYgdGhpcy51c2VySW5mby51cmw7XG4gICAgaWYgKCF1cmwpIHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGlkZW50aXR5OiBzdHJpbmcgfT4oe1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICB1cmw6IHRoaXMuX2Jhc2VVcmwoKSxcbiAgICAgICAgaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzLFxuICAgICAgfSk7XG4gICAgICB1cmwgPSByZXMuaWRlbnRpdHk7XG4gICAgfVxuICAgIHVybCArPSAnP2Zvcm1hdD1qc29uJztcbiAgICBpZiAodGhpcy5hY2Nlc3NUb2tlbikge1xuICAgICAgdXJsICs9IGAmb2F1dGhfdG9rZW49JHtlbmNvZGVVUklDb21wb25lbnQodGhpcy5hY2Nlc3NUb2tlbil9YDtcbiAgICB9XG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5yZXF1ZXN0PElkZW50aXR5SW5mbz4oeyBtZXRob2Q6ICdHRVQnLCB1cmwgfSk7XG4gICAgdGhpcy51c2VySW5mbyA9IHtcbiAgICAgIGlkOiByZXMudXNlcl9pZCxcbiAgICAgIG9yZ2FuaXphdGlvbklkOiByZXMub3JnYW5pemF0aW9uX2lkLFxuICAgICAgdXJsOiByZXMuaWQsXG4gICAgfTtcbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiAgLyoqXG4gICAqIExpc3QgcmVjZW50bHkgdmlld2VkIHJlY29yZHNcbiAgICovXG4gIGFzeW5jIHJlY2VudCh0eXBlPzogc3RyaW5nIHwgbnVtYmVyLCBsaW1pdD86IG51bWJlcikge1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXG4gICAgaWYgKHR5cGVvZiB0eXBlID09PSAnbnVtYmVyJykge1xuICAgICAgbGltaXQgPSB0eXBlO1xuICAgICAgdHlwZSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgbGV0IHVybDtcbiAgICBpZiAodHlwZSkge1xuICAgICAgdXJsID0gW3RoaXMuX2Jhc2VVcmwoKSwgJ3NvYmplY3RzJywgdHlwZV0uam9pbignLycpO1xuICAgICAgY29uc3QgeyByZWNlbnRJdGVtcyB9ID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgcmVjZW50SXRlbXM6IFJlY29yZFtdIH0+KFxuICAgICAgICB1cmwsXG4gICAgICApO1xuICAgICAgcmV0dXJuIGxpbWl0ID8gcmVjZW50SXRlbXMuc2xpY2UoMCwgbGltaXQpIDogcmVjZW50SXRlbXM7XG4gICAgfVxuICAgIHVybCA9IGAke3RoaXMuX2Jhc2VVcmwoKX0vcmVjZW50YDtcbiAgICBpZiAobGltaXQpIHtcbiAgICAgIHVybCArPSBgP2xpbWl0PSR7bGltaXR9YDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdDxSZWNvcmRbXT4odXJsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSB1cGRhdGVkIHJlY29yZHNcbiAgICovXG4gIGFzeW5jIHVwZGF0ZWQoXG4gICAgdHlwZTogc3RyaW5nLFxuICAgIHN0YXJ0OiBzdHJpbmcgfCBEYXRlLFxuICAgIGVuZDogc3RyaW5nIHwgRGF0ZSxcbiAgKTogUHJvbWlzZTxVcGRhdGVkUmVzdWx0PiB7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cbiAgICBsZXQgdXJsID0gW3RoaXMuX2Jhc2VVcmwoKSwgJ3NvYmplY3RzJywgdHlwZSwgJ3VwZGF0ZWQnXS5qb2luKCcvJyk7XG4gICAgaWYgKHR5cGVvZiBzdGFydCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHN0YXJ0ID0gbmV3IERhdGUoc3RhcnQpO1xuICAgIH1cbiAgICBzdGFydCA9IGZvcm1hdERhdGUoc3RhcnQpO1xuICAgIHVybCArPSBgP3N0YXJ0PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHN0YXJ0KX1gO1xuICAgIGlmICh0eXBlb2YgZW5kID09PSAnc3RyaW5nJykge1xuICAgICAgZW5kID0gbmV3IERhdGUoZW5kKTtcbiAgICB9XG4gICAgZW5kID0gZm9ybWF0RGF0ZShlbmQpO1xuICAgIHVybCArPSBgJmVuZD0ke2VuY29kZVVSSUNvbXBvbmVudChlbmQpfWA7XG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHRoaXMucmVxdWVzdCh1cmwpO1xuICAgIHJldHVybiBib2R5IGFzIFVwZGF0ZWRSZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmUgZGVsZXRlZCByZWNvcmRzXG4gICAqL1xuICBhc3luYyBkZWxldGVkKFxuICAgIHR5cGU6IHN0cmluZyxcbiAgICBzdGFydDogc3RyaW5nIHwgRGF0ZSxcbiAgICBlbmQ6IHN0cmluZyB8IERhdGUsXG4gICk6IFByb21pc2U8RGVsZXRlZFJlc3VsdD4ge1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXG4gICAgbGV0IHVybCA9IFt0aGlzLl9iYXNlVXJsKCksICdzb2JqZWN0cycsIHR5cGUsICdkZWxldGVkJ10uam9pbignLycpO1xuICAgIGlmICh0eXBlb2Ygc3RhcnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBzdGFydCA9IG5ldyBEYXRlKHN0YXJ0KTtcbiAgICB9XG4gICAgc3RhcnQgPSBmb3JtYXREYXRlKHN0YXJ0KTtcbiAgICB1cmwgKz0gYD9zdGFydD0ke2VuY29kZVVSSUNvbXBvbmVudChzdGFydCl9YDtcblxuICAgIGlmICh0eXBlb2YgZW5kID09PSAnc3RyaW5nJykge1xuICAgICAgZW5kID0gbmV3IERhdGUoZW5kKTtcbiAgICB9XG4gICAgZW5kID0gZm9ybWF0RGF0ZShlbmQpO1xuICAgIHVybCArPSBgJmVuZD0ke2VuY29kZVVSSUNvbXBvbmVudChlbmQpfWA7XG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHRoaXMucmVxdWVzdCh1cmwpO1xuICAgIHJldHVybiBib2R5IGFzIERlbGV0ZWRSZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIGxpc3Qgb2YgYWxsIHRhYnNcbiAgICovXG4gIGFzeW5jIHRhYnMoKTogUHJvbWlzZTxEZXNjcmliZVRhYltdPiB7XG4gICAgY29uc3QgdXJsID0gW3RoaXMuX2Jhc2VVcmwoKSwgJ3RhYnMnXS5qb2luKCcvJyk7XG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHRoaXMucmVxdWVzdCh1cmwpO1xuICAgIHJldHVybiBib2R5IGFzIERlc2NyaWJlVGFiW107XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBjdXJyZW50IHN5c3RlbSBsaW1pdCBpbiB0aGUgb3JnYW5pemF0aW9uXG4gICAqL1xuICBhc3luYyBsaW1pdHMoKTogUHJvbWlzZTxPcmdhbml6YXRpb25MaW1pdHNJbmZvPiB7XG4gICAgY29uc3QgdXJsID0gW3RoaXMuX2Jhc2VVcmwoKSwgJ2xpbWl0cyddLmpvaW4oJy8nKTtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgdGhpcy5yZXF1ZXN0KHVybCk7XG4gICAgcmV0dXJuIGJvZHkgYXMgT3JnYW5pemF0aW9uTGltaXRzSW5mbztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgdGhlbWUgaW5mb1xuICAgKi9cbiAgYXN5bmMgdGhlbWUoKTogUHJvbWlzZTxEZXNjcmliZVRoZW1lPiB7XG4gICAgY29uc3QgdXJsID0gW3RoaXMuX2Jhc2VVcmwoKSwgJ3RoZW1lJ10uam9pbignLycpO1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCB0aGlzLnJlcXVlc3QodXJsKTtcbiAgICByZXR1cm4gYm9keSBhcyBEZXNjcmliZVRoZW1lO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYWxsIHJlZ2lzdGVyZWQgZ2xvYmFsIHF1aWNrIGFjdGlvbnNcbiAgICovXG4gIGFzeW5jIHF1aWNrQWN0aW9ucygpOiBQcm9taXNlPERlc2NyaWJlUXVpY2tBY3Rpb25SZXN1bHRbXT4ge1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCB0aGlzLnJlcXVlc3QoJy9xdWlja0FjdGlvbnMnKTtcbiAgICByZXR1cm4gYm9keSBhcyBEZXNjcmliZVF1aWNrQWN0aW9uUmVzdWx0W107XG4gIH1cblxuICAvKipcbiAgICogR2V0IHJlZmVyZW5jZSBmb3Igc3BlY2lmaWVkIGdsb2JhbCBxdWljayBhY3Rpb25cbiAgICovXG4gIHF1aWNrQWN0aW9uKGFjdGlvbk5hbWU6IHN0cmluZyk6IFF1aWNrQWN0aW9uPFM+IHtcbiAgICByZXR1cm4gbmV3IFF1aWNrQWN0aW9uKHRoaXMsIGAvcXVpY2tBY3Rpb25zLyR7YWN0aW9uTmFtZX1gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNb2R1bGUgd2hpY2ggbWFuYWdlcyBwcm9jZXNzIHJ1bGVzIGFuZCBhcHByb3ZhbCBwcm9jZXNzZXNcbiAgICovXG4gIHByb2Nlc3MgPSBuZXcgUHJvY2Vzcyh0aGlzKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29ubmVjdGlvbjtcbiJdfQ==