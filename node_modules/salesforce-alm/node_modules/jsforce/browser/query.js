import _getIterator from "@babel/runtime-corejs3/core-js/get-iterator";
import _getIteratorMethod from "@babel/runtime-corejs3/core-js/get-iterator-method";
import _Symbol from "@babel/runtime-corejs3/core-js-stable/symbol";
import _Array$from from "@babel/runtime-corejs3/core-js-stable/array/from";
import _Reflect$construct from "@babel/runtime-corejs3/core-js-stable/reflect/construct";
import _Object$defineProperty from "@babel/runtime-corejs3/core-js-stable/object/define-property";
import _Object$defineProperties from "@babel/runtime-corejs3/core-js-stable/object/define-properties";
import _Object$getOwnPropertyDescriptors from "@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors";
import _forEachInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/for-each";
import _Object$getOwnPropertyDescriptor from "@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor";
import _filterInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/filter";
import _Object$getOwnPropertySymbols from "@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols";
import "core-js/modules/es.array.includes";
import "core-js/modules/es.array.iterator";
import "core-js/modules/es.array.join";
import "core-js/modules/es.function.name";
import "core-js/modules/es.object.to-string";
import "core-js/modules/es.promise";
import "core-js/modules/es.regexp.exec";
import "core-js/modules/es.regexp.to-string";
import "core-js/modules/es.string.includes";
import "core-js/modules/es.string.iterator";
import "core-js/modules/es.string.split";
import "core-js/modules/web.dom-collections.iterator";
import _typeof from "@babel/runtime-corejs3/helpers/typeof";
import _sliceInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/slice";
import _regeneratorRuntime from "@babel/runtime-corejs3/regenerator";
import "regenerator-runtime/runtime";
import _asyncToGenerator from "@babel/runtime-corejs3/helpers/asyncToGenerator";
import _Object$keys from "@babel/runtime-corejs3/core-js-stable/object/keys";
import _slicedToArray from "@babel/runtime-corejs3/helpers/slicedToArray";
import _Object$entries from "@babel/runtime-corejs3/core-js-stable/object/entries";
import _concatInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/concat";
import _toConsumableArray from "@babel/runtime-corejs3/helpers/toConsumableArray";
import _mapInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/map";
import _Array$isArray from "@babel/runtime-corejs3/core-js-stable/array/is-array";
import _Promise from "@babel/runtime-corejs3/core-js-stable/promise";
import _objectWithoutProperties from "@babel/runtime-corejs3/helpers/objectWithoutProperties";
import _includesInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/includes";
import _sortInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/sort";
import _classCallCheck from "@babel/runtime-corejs3/helpers/classCallCheck";
import _createClass from "@babel/runtime-corejs3/helpers/createClass";
import _assertThisInitialized from "@babel/runtime-corejs3/helpers/assertThisInitialized";
import _inherits from "@babel/runtime-corejs3/helpers/inherits";
import _possibleConstructorReturn from "@babel/runtime-corejs3/helpers/possibleConstructorReturn";
import _getPrototypeOf from "@babel/runtime-corejs3/helpers/getPrototypeOf";
import _defineProperty from "@babel/runtime-corejs3/helpers/defineProperty";
import _reduceInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/reduce";

function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof _Symbol === "undefined" || _getIteratorMethod(o) == null) { if (_Array$isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = _getIterator(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { var _context35; if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = _sliceInstanceProperty(_context35 = Object.prototype.toString.call(o)).call(_context35, 8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return _Array$from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = _Reflect$construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !_Reflect$construct) return false; if (_Reflect$construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(_Reflect$construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = _filterInstanceProperty(symbols).call(symbols, function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { var _context33; _forEachInstanceProperty(_context33 = ownKeys(Object(source), true)).call(_context33, function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { var _context34; _forEachInstanceProperty(_context34 = ownKeys(Object(source))).call(_context34, function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }

/**
 * @file Manages query for records in Salesforce
 * @author Shinichi Tomita <shinichi.tomita@gmail.com>
 */
import { EventEmitter } from 'events';
import { getLogger } from './util/logger';
import RecordStream, { Serializable } from './record-stream';
import { createSOQL } from './soql-builder';
var ResponseTargetValues = ['QueryResult', 'Records', 'SingleRecord', 'Count'];
export var ResponseTargets = _reduceInstanceProperty(ResponseTargetValues).call(ResponseTargetValues, function (values, target) {
  return _objectSpread(_objectSpread({}, values), {}, _defineProperty({}, target, target));
}, {});

/**
 *
 */
var DEFAULT_BULK_THRESHOLD = 200;
/**
 * Query
 */

export var Query = /*#__PURE__*/function (_EventEmitter) {
  _inherits(Query, _EventEmitter);

  var _super = _createSuper(Query);

  /**
   *
   */
  function Query(conn, config, options) {
    var _this;

    _classCallCheck(this, Query);

    _this = _super.call(this);

    _defineProperty(_assertThisInitialized(_this), "_conn", void 0);

    _defineProperty(_assertThisInitialized(_this), "_logger", void 0);

    _defineProperty(_assertThisInitialized(_this), "_soql", void 0);

    _defineProperty(_assertThisInitialized(_this), "_locator", void 0);

    _defineProperty(_assertThisInitialized(_this), "_config", {});

    _defineProperty(_assertThisInitialized(_this), "_children", []);

    _defineProperty(_assertThisInitialized(_this), "_options", void 0);

    _defineProperty(_assertThisInitialized(_this), "_executed", false);

    _defineProperty(_assertThisInitialized(_this), "_finished", false);

    _defineProperty(_assertThisInitialized(_this), "_chaining", false);

    _defineProperty(_assertThisInitialized(_this), "_promise", void 0);

    _defineProperty(_assertThisInitialized(_this), "_stream", void 0);

    _defineProperty(_assertThisInitialized(_this), "totalSize", 0);

    _defineProperty(_assertThisInitialized(_this), "totalFetched", 0);

    _defineProperty(_assertThisInitialized(_this), "records", []);

    _defineProperty(_assertThisInitialized(_this), "offset", _this.skip);

    _defineProperty(_assertThisInitialized(_this), "orderby", _sortInstanceProperty(_this));

    _defineProperty(_assertThisInitialized(_this), "exec", _this.execute);

    _defineProperty(_assertThisInitialized(_this), "run", _this.execute);

    _defineProperty(_assertThisInitialized(_this), "delete", _this.destroy);

    _defineProperty(_assertThisInitialized(_this), "del", _this.destroy);

    _this._conn = conn;
    _this._logger = conn._logLevel ? Query._logger.createInstance(conn._logLevel) : Query._logger;

    if (typeof config === 'string') {
      _this._soql = config;

      _this._logger.debug("config is soql: ".concat(config));
    } else if (typeof config.locator === 'string') {
      var locator = config.locator;

      _this._logger.debug("config is locator: ".concat(locator));

      _this._locator = _includesInstanceProperty(locator).call(locator, '/') ? _this.urlToLocator(locator) : locator;
    } else {
      _this._logger.debug("config is QueryConfig: ".concat(config));

      var _ref = config,
          _fields = _ref.fields,
          includes = _includesInstanceProperty(_ref),
          _sort2 = _sortInstanceProperty(_ref),
          _config = _objectWithoutProperties(_ref, ["fields", "includes", "sort"]);

      _this._config = _config;

      _this.select(_fields);

      if (includes) {
        _this.includeChildren(includes);
      }

      if (_sort2) {
        _sortInstanceProperty(_this).call(_this, _sort2);
      }
    }

    _this._options = _objectSpread({
      headers: {},
      maxFetch: 10000,
      autoFetch: false,
      scanAll: false,
      responseTarget: 'QueryResult'
    }, options || {}); // promise instance

    _this._promise = new _Promise(function (resolve, reject) {
      _this.on('response', resolve);

      _this.on('error', reject);
    });
    _this._stream = new Serializable();

    _this.on('record', function (record) {
      return _this._stream.push(record);
    });

    _this.on('end', function () {
      return _this._stream.push(null);
    });

    _this.on('error', function (err) {
      try {
        _this._stream.emit('error', err);
      } catch (e) {// eslint-disable-line no-empty
      }
    });

    return _this;
  }
  /**
   * Select fields to include in the returning result
   */


  _createClass(Query, [{
    key: "select",
    value: function select() {
      var fields = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '*';

      if (this._soql) {
        throw Error('Cannot set select fields for the query which has already built SOQL.');
      }

      function toFieldArray(fields) {
        var _context, _context2, _context4, _context5;

        return typeof fields === 'string' ? fields.split(/\s*,\s*/) : _Array$isArray(fields) ? _reduceInstanceProperty(_context = _mapInstanceProperty(_context2 = fields).call(_context2, toFieldArray)).call(_context, function (fs, f) {
          var _context3;

          return _concatInstanceProperty(_context3 = []).call(_context3, _toConsumableArray(fs), _toConsumableArray(f));
        }, []) : _reduceInstanceProperty(_context4 = _mapInstanceProperty(_context5 = _Object$entries(fields)).call(_context5, function (_ref2) {
          var _ref3 = _slicedToArray(_ref2, 2),
              f = _ref3[0],
              v = _ref3[1];

          if (typeof v === 'number' || typeof v === 'boolean') {
            return v ? [f] : [];
          } else {
            var _context6;

            return _mapInstanceProperty(_context6 = toFieldArray(v)).call(_context6, function (p) {
              var _context7;

              return _concatInstanceProperty(_context7 = "".concat(f, ".")).call(_context7, p);
            });
          }
        })).call(_context4, function (fs, f) {
          var _context8;

          return _concatInstanceProperty(_context8 = []).call(_context8, _toConsumableArray(fs), _toConsumableArray(f));
        }, []);
      }

      if (fields) {
        this._config.fields = toFieldArray(fields);
      } // force convert query record type without changing instance;


      return this;
    }
    /**
     * Set query conditions to filter the result records
     */

  }, {
    key: "where",
    value: function where(conditions) {
      if (this._soql) {
        throw Error('Cannot set where conditions for the query which has already built SOQL.');
      }

      this._config.conditions = conditions;
      return this;
    }
    /**
     * Limit the returning result
     */

  }, {
    key: "limit",
    value: function limit(_limit) {
      if (this._soql) {
        throw Error('Cannot set limit for the query which has already built SOQL.');
      }

      this._config.limit = _limit;
      return this;
    }
    /**
     * Skip records
     */

  }, {
    key: "skip",
    value: function skip(offset) {
      if (this._soql) {
        throw Error('Cannot set skip/offset for the query which has already built SOQL.');
      }

      this._config.offset = offset;
      return this;
    }
    /**
     * Synonym of Query#skip()
     */

  }, {
    key: "sort",
    value: function (_sort) {
      function sort(_x, _x2) {
        return _sort.apply(this, arguments);
      }

      sort.toString = function () {
        return _sort.toString();
      };

      return sort;
    }(function (sort, dir) {
      if (this._soql) {
        throw Error('Cannot set sort for the query which has already built SOQL.');
      }

      if (typeof sort === 'string' && typeof dir !== 'undefined') {
        this._config.sort = [[sort, dir]];
      } else {
        this._config.sort = sort;
      }

      return this;
    })
    /**
     * Synonym of Query#sort()
     */

  }, {
    key: "include",
    value: function include(childRelName, conditions, fields) {
      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};

      if (this._soql) {
        throw Error('Cannot include child relationship into the query which has already built SOQL.');
      }

      var childConfig = {
        fields: fields === null ? undefined : fields,
        table: childRelName,
        conditions: conditions === null ? undefined : conditions,
        limit: options.limit,
        offset: options.offset,
        sort: _sortInstanceProperty(options)
      }; // eslint-disable-next-line no-use-before-define

      var childQuery = new SubQuery(this._conn, childRelName, childConfig, this);

      this._children.push(childQuery);

      return childQuery;
    }
    /**
     * Include child relationship queries, but not moving down to the children context
     */

  }, {
    key: "includeChildren",
    value: function includeChildren(includes) {
      if (this._soql) {
        throw Error('Cannot include child relationship into the query which has already built SOQL.');
      }

      var _iterator = _createForOfIteratorHelper(_Object$keys(includes)),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var crname = _step.value;

          var _ref4 = includes[crname],
              _conditions = _ref4.conditions,
              _fields2 = _ref4.fields,
              _options = _objectWithoutProperties(_ref4, ["conditions", "fields"]);

          this.include(crname, _conditions, _fields2, _options);
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }

      return this;
    }
    /**
     * Setting maxFetch query option
     */

  }, {
    key: "maxFetch",
    value: function maxFetch(_maxFetch) {
      this._options.maxFetch = _maxFetch;
      return this;
    }
    /**
     * Switching auto fetch mode
     */

  }, {
    key: "autoFetch",
    value: function autoFetch(_autoFetch) {
      this._options.autoFetch = _autoFetch;
      return this;
    }
    /**
     * Set flag to scan all records including deleted and archived.
     */

  }, {
    key: "scanAll",
    value: function scanAll(_scanAll) {
      this._options.scanAll = _scanAll;
      return this;
    }
    /**
     *
     */

  }, {
    key: "setResponseTarget",
    value: function setResponseTarget(responseTarget) {
      if (responseTarget in ResponseTargets) {
        this._options.responseTarget = responseTarget;
      } // force change query response target without changing instance


      return this;
    }
    /**
     * Execute query and fetch records from server.
     */

  }, {
    key: "execute",
    value: function execute() {
      var _this2 = this;

      var options_ = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      if (this._executed) {
        throw new Error('re-executing already executed query');
      }

      if (this._finished) {
        throw new Error('executing already closed query');
      }

      var options = {
        headers: options_.headers || this._options.headers,
        responseTarget: options_.responseTarget || this._options.responseTarget,
        autoFetch: options_.autoFetch || this._options.autoFetch,
        maxFetch: options_.maxFetch || this._options.maxFetch,
        scanAll: options_.scanAll || this._options.scanAll
      }; // collect fetched records in array
      // only when response target is Records and
      // either callback or chaining promises are available to this query.

      this.once('fetch', function () {
        if (options.responseTarget === ResponseTargets.Records && _this2._chaining) {
          _this2._logger.debug('--- collecting all fetched records ---');

          var records = [];

          var onRecord = function onRecord(record) {
            return records.push(record);
          };

          _this2.on('record', onRecord);

          _this2.once('end', function () {
            _this2.removeListener('record', onRecord);

            _this2.emit('response', records, _this2);
          });
        }
      }); // flag to prevent re-execution

      this._executed = true;

      _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {
        return _regeneratorRuntime.wrap(function _callee$(_context9) {
          while (1) {
            switch (_context9.prev = _context9.next) {
              case 0:
                // start actual query
                _this2._logger.debug('>>> Query start >>>');

                _context9.prev = 1;
                _context9.next = 4;
                return _this2._execute(options);

              case 4:
                _this2._logger.debug('*** Query finished ***');

                _context9.next = 11;
                break;

              case 7:
                _context9.prev = 7;
                _context9.t0 = _context9["catch"](1);

                _this2._logger.debug('--- Query error ---', _context9.t0);

                _this2.emit('error', _context9.t0);

              case 11:
              case "end":
                return _context9.stop();
            }
          }
        }, _callee, null, [[1, 7]]);
      }))(); // return Query instance for chaining


      return this;
    }
    /**
     * Synonym of Query#execute()
     */

  }, {
    key: "locatorToUrl",
    value: function locatorToUrl() {
      return this._locator ? [this._conn._baseUrl(), '/query/', this._locator].join('') : '';
    }
  }, {
    key: "urlToLocator",
    value: function urlToLocator(url) {
      return url.split('/').pop();
    }
  }, {
    key: "constructResponse",
    value: function constructResponse(rawDone, responseTarget) {
      var _this$records$, _this$records;

      switch (responseTarget) {
        case 'Count':
          return this.totalSize;

        case 'SingleRecord':
          return (_this$records$ = (_this$records = this.records) === null || _this$records === void 0 ? void 0 : _this$records[0]) !== null && _this$records$ !== void 0 ? _this$records$ : null;

        case 'Records':
          return this.records;
        // QueryResult is default response target

        default:
          return _objectSpread(_objectSpread({}, {
            records: this.records,
            totalSize: this.totalSize,
            done: rawDone !== null && rawDone !== void 0 ? rawDone : true // when no records, done is omitted

          }), this._locator ? {
            nextRecordsUrl: this.locatorToUrl()
          } : {});
      }
    }
    /**
     * @private
     */

  }, {
    key: "_execute",
    value: function () {
      var _execute2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(options) {
        var _this$records2, _context10, _data$records$length, _data$records;

        var headers, responseTarget, autoFetch, maxFetch, scanAll, url, soql, data, numRecords, totalFetched, i, record, response;
        return _regeneratorRuntime.wrap(function _callee2$(_context11) {
          while (1) {
            switch (_context11.prev = _context11.next) {
              case 0:
                headers = options.headers, responseTarget = options.responseTarget, autoFetch = options.autoFetch, maxFetch = options.maxFetch, scanAll = options.scanAll;

                this._logger.debug('execute with options', options);

                if (!this._locator) {
                  _context11.next = 6;
                  break;
                }

                url = this.locatorToUrl();
                _context11.next = 11;
                break;

              case 6:
                _context11.next = 8;
                return this.toSOQL();

              case 8:
                soql = _context11.sent;

                this._logger.debug("SOQL = ".concat(soql));

                url = [this._conn._baseUrl(), '/', scanAll ? 'queryAll' : 'query', '?q=', encodeURIComponent(soql)].join('');

              case 11:
                _context11.next = 13;
                return this._conn.request({
                  method: 'GET',
                  url: url,
                  headers: headers
                });

              case 13:
                data = _context11.sent;
                this.emit('fetch');
                this.totalSize = data.totalSize;
                this.records = (_this$records2 = this.records) === null || _this$records2 === void 0 ? void 0 : _concatInstanceProperty(_this$records2).call(_this$records2, maxFetch - this.records.length > data.records.length ? data.records : _sliceInstanceProperty(_context10 = data.records).call(_context10, 0, maxFetch - this.records.length));
                this._locator = data.nextRecordsUrl ? this.urlToLocator(data.nextRecordsUrl) : undefined;
                this._finished = this._finished || data.done || !autoFetch || // this is what the response looks like when there are no results
                data.records.length === 0 && data.done === undefined; // streaming record instances

                numRecords = (_data$records$length = (_data$records = data.records) === null || _data$records === void 0 ? void 0 : _data$records.length) !== null && _data$records$length !== void 0 ? _data$records$length : 0;
                totalFetched = this.totalFetched;
                i = 0;

              case 22:
                if (!(i < numRecords)) {
                  _context11.next = 32;
                  break;
                }

                if (!(totalFetched >= maxFetch)) {
                  _context11.next = 26;
                  break;
                }

                this._finished = true;
                return _context11.abrupt("break", 32);

              case 26:
                record = data.records[i];
                this.emit('record', record, totalFetched, this);
                totalFetched += 1;

              case 29:
                i++;
                _context11.next = 22;
                break;

              case 32:
                this.totalFetched = totalFetched;

                if (!this._finished) {
                  _context11.next = 40;
                  break;
                }

                response = this.constructResponse(data.done, responseTarget); // only fire response event when it should be notified per fetch

                if (responseTarget !== ResponseTargets.Records) {
                  this.emit('response', response, this);
                }

                this.emit('end');
                return _context11.abrupt("return", response);

              case 40:
                return _context11.abrupt("return", this._execute(options));

              case 41:
              case "end":
                return _context11.stop();
            }
          }
        }, _callee2, this);
      }));

      function _execute(_x3) {
        return _execute2.apply(this, arguments);
      }

      return _execute;
    }()
    /**
     * Obtain readable stream instance
     */

  }, {
    key: "stream",
    value: function stream() {
      var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'csv';

      if (!this._finished && !this._executed) {
        this.execute({
          autoFetch: true
        });
      }

      return type === 'record' ? this._stream : this._stream.stream(type);
    }
    /**
     * Pipe the queried records to another stream
     * This is for backward compatibility; Query is not a record stream instance anymore in 2.0.
     * If you want a record stream instance, use `Query#stream('record')`.
     */

  }, {
    key: "pipe",
    value: function pipe(stream) {
      return this.stream('record').pipe(stream);
    }
    /**
     * @protected
     */

  }, {
    key: "_expandFields",
    value: function () {
      var _expandFields2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(sobject_) {
        var _context12, _context13, _context14, _context16, _context17;

        var _this$_config, _this$_config$fields, fields, _this$_config$table, table, sobject, _yield$Promise$all, _yield$Promise$all2, efields;

        return _regeneratorRuntime.wrap(function _callee4$(_context18) {
          while (1) {
            switch (_context18.prev = _context18.next) {
              case 0:
                if (!this._soql) {
                  _context18.next = 2;
                  break;
                }

                throw new Error('Cannot expand fields for the query which has already built SOQL.');

              case 2:
                _this$_config = this._config, _this$_config$fields = _this$_config.fields, fields = _this$_config$fields === void 0 ? [] : _this$_config$fields, _this$_config$table = _this$_config.table, table = _this$_config$table === void 0 ? '' : _this$_config$table;
                sobject = sobject_ || table;

                this._logger.debug(_concatInstanceProperty(_context12 = "_expandFields: sobject = ".concat(sobject, ", fields = ")).call(_context12, fields.join(', ')));

                _context18.next = 7;
                return _Promise.all(_concatInstanceProperty(_context13 = [this._expandAsteriskFields(sobject, fields)]).call(_context13, _toConsumableArray(_mapInstanceProperty(_context14 = this._children).call(_context14, /*#__PURE__*/function () {
                  var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(childQuery) {
                    return _regeneratorRuntime.wrap(function _callee3$(_context15) {
                      while (1) {
                        switch (_context15.prev = _context15.next) {
                          case 0:
                            _context15.next = 2;
                            return childQuery._expandFields();

                          case 2:
                            return _context15.abrupt("return", []);

                          case 3:
                          case "end":
                            return _context15.stop();
                        }
                      }
                    }, _callee3);
                  }));

                  return function (_x5) {
                    return _ref6.apply(this, arguments);
                  };
                }()))));

              case 7:
                _yield$Promise$all = _context18.sent;
                _yield$Promise$all2 = _slicedToArray(_yield$Promise$all, 1);
                efields = _yield$Promise$all2[0];
                this._config.fields = efields;
                this._config.includes = _reduceInstanceProperty(_context16 = _mapInstanceProperty(_context17 = this._children).call(_context17, function (cquery) {
                  var cconfig = cquery._query._config;
                  return [cconfig.table, cconfig];
                })).call(_context16, function (includes, _ref7) {
                  var _ref8 = _slicedToArray(_ref7, 2),
                      ctable = _ref8[0],
                      cconfig = _ref8[1];

                  return _objectSpread(_objectSpread({}, includes), {}, _defineProperty({}, ctable, cconfig));
                }, {});

              case 12:
              case "end":
                return _context18.stop();
            }
          }
        }, _callee4, this);
      }));

      function _expandFields(_x4) {
        return _expandFields2.apply(this, arguments);
      }

      return _expandFields;
    }()
    /**
     *
     */

  }, {
    key: "_findRelationObject",
    value: function () {
      var _findRelationObject2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(relName) {
        var _context19;

        var table, sobject, upperRname, _iterator2, _step2, cr;

        return _regeneratorRuntime.wrap(function _callee5$(_context20) {
          while (1) {
            switch (_context20.prev = _context20.next) {
              case 0:
                table = this._config.table;

                if (table) {
                  _context20.next = 3;
                  break;
                }

                throw new Error('No table information provided in the query');

              case 3:
                this._logger.debug(_concatInstanceProperty(_context19 = "finding table for relation \"".concat(relName, "\" in \"")).call(_context19, table, "\"..."));

                _context20.next = 6;
                return this._conn.describe$(table);

              case 6:
                sobject = _context20.sent;
                upperRname = relName.toUpperCase();
                _iterator2 = _createForOfIteratorHelper(sobject.childRelationships);
                _context20.prev = 9;

                _iterator2.s();

              case 11:
                if ((_step2 = _iterator2.n()).done) {
                  _context20.next = 17;
                  break;
                }

                cr = _step2.value;

                if (!((cr.relationshipName || '').toUpperCase() === upperRname && cr.childSObject)) {
                  _context20.next = 15;
                  break;
                }

                return _context20.abrupt("return", cr.childSObject);

              case 15:
                _context20.next = 11;
                break;

              case 17:
                _context20.next = 22;
                break;

              case 19:
                _context20.prev = 19;
                _context20.t0 = _context20["catch"](9);

                _iterator2.e(_context20.t0);

              case 22:
                _context20.prev = 22;

                _iterator2.f();

                return _context20.finish(22);

              case 25:
                throw new Error("No child relationship found: ".concat(relName));

              case 26:
              case "end":
                return _context20.stop();
            }
          }
        }, _callee5, this, [[9, 19, 22, 25]]);
      }));

      function _findRelationObject(_x6) {
        return _findRelationObject2.apply(this, arguments);
      }

      return _findRelationObject;
    }()
    /**
     *
     */

  }, {
    key: "_expandAsteriskFields",
    value: function () {
      var _expandAsteriskFields2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(sobject, fields) {
        var _this3 = this;

        var expandedFields;
        return _regeneratorRuntime.wrap(function _callee7$(_context23) {
          while (1) {
            switch (_context23.prev = _context23.next) {
              case 0:
                _context23.next = 2;
                return _Promise.all(_mapInstanceProperty(fields).call(fields, /*#__PURE__*/function () {
                  var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(field) {
                    return _regeneratorRuntime.wrap(function _callee6$(_context21) {
                      while (1) {
                        switch (_context21.prev = _context21.next) {
                          case 0:
                            return _context21.abrupt("return", _this3._expandAsteriskField(sobject, field));

                          case 1:
                          case "end":
                            return _context21.stop();
                        }
                      }
                    }, _callee6);
                  }));

                  return function (_x9) {
                    return _ref9.apply(this, arguments);
                  };
                }()));

              case 2:
                expandedFields = _context23.sent;
                return _context23.abrupt("return", _reduceInstanceProperty(expandedFields).call(expandedFields, function (eflds, flds) {
                  var _context22;

                  return _concatInstanceProperty(_context22 = []).call(_context22, _toConsumableArray(eflds), _toConsumableArray(flds));
                }, []));

              case 4:
              case "end":
                return _context23.stop();
            }
          }
        }, _callee7);
      }));

      function _expandAsteriskFields(_x7, _x8) {
        return _expandAsteriskFields2.apply(this, arguments);
      }

      return _expandAsteriskFields;
    }()
    /**
     *
     */

  }, {
    key: "_expandAsteriskField",
    value: function () {
      var _expandAsteriskField2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(sobject, field) {
        var _context24,
            _this4 = this;

        var fpath, _context27, so, _ret;

        return _regeneratorRuntime.wrap(function _callee9$(_context28) {
          while (1) {
            switch (_context28.prev = _context28.next) {
              case 0:
                this._logger.debug(_concatInstanceProperty(_context24 = "expanding field \"".concat(field, "\" in \"")).call(_context24, sobject, "\"..."));

                fpath = field.split('.');

                if (!(fpath[fpath.length - 1] === '*')) {
                  _context28.next = 13;
                  break;
                }

                _context28.next = 5;
                return this._conn.describe$(sobject);

              case 5:
                so = _context28.sent;

                this._logger.debug("table ".concat(sobject, " has been described"));

                if (!(fpath.length > 1)) {
                  _context28.next = 12;
                  break;
                }

                return _context28.delegateYield( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {
                  var rname, _iterator3, _step3, f, rfield, referenceTo, rtable, fpaths;

                  return _regeneratorRuntime.wrap(function _callee8$(_context26) {
                    while (1) {
                      switch (_context26.prev = _context26.next) {
                        case 0:
                          rname = fpath.shift();
                          _iterator3 = _createForOfIteratorHelper(so.fields);
                          _context26.prev = 2;

                          _iterator3.s();

                        case 4:
                          if ((_step3 = _iterator3.n()).done) {
                            _context26.next = 16;
                            break;
                          }

                          f = _step3.value;

                          if (!(f.relationshipName && rname && f.relationshipName.toUpperCase() === rname.toUpperCase())) {
                            _context26.next = 14;
                            break;
                          }

                          rfield = f;
                          referenceTo = rfield.referenceTo || [];
                          rtable = referenceTo.length === 1 ? referenceTo[0] : 'Name';
                          _context26.next = 12;
                          return _this4._expandAsteriskField(rtable, fpath.join('.'));

                        case 12:
                          fpaths = _context26.sent;
                          return _context26.abrupt("return", {
                            v: _mapInstanceProperty(fpaths).call(fpaths, function (fp) {
                              var _context25;

                              return _concatInstanceProperty(_context25 = "".concat(rname, ".")).call(_context25, fp);
                            })
                          });

                        case 14:
                          _context26.next = 4;
                          break;

                        case 16:
                          _context26.next = 21;
                          break;

                        case 18:
                          _context26.prev = 18;
                          _context26.t0 = _context26["catch"](2);

                          _iterator3.e(_context26.t0);

                        case 21:
                          _context26.prev = 21;

                          _iterator3.f();

                          return _context26.finish(21);

                        case 24:
                          return _context26.abrupt("return", {
                            v: []
                          });

                        case 25:
                        case "end":
                          return _context26.stop();
                      }
                    }
                  }, _callee8, null, [[2, 18, 21, 24]]);
                })(), "t0", 9);

              case 9:
                _ret = _context28.t0;

                if (!(_typeof(_ret) === "object")) {
                  _context28.next = 12;
                  break;
                }

                return _context28.abrupt("return", _ret.v);

              case 12:
                return _context28.abrupt("return", _mapInstanceProperty(_context27 = so.fields).call(_context27, function (f) {
                  return f.name;
                }));

              case 13:
                return _context28.abrupt("return", [field]);

              case 14:
              case "end":
                return _context28.stop();
            }
          }
        }, _callee9, this);
      }));

      function _expandAsteriskField(_x10, _x11) {
        return _expandAsteriskField2.apply(this, arguments);
      }

      return _expandAsteriskField;
    }()
    /**
     * Explain plan for executing query
     */

  }, {
    key: "explain",
    value: function () {
      var _explain = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10() {
        var soql, url;
        return _regeneratorRuntime.wrap(function _callee10$(_context29) {
          while (1) {
            switch (_context29.prev = _context29.next) {
              case 0:
                _context29.next = 2;
                return this.toSOQL();

              case 2:
                soql = _context29.sent;

                this._logger.debug("SOQL = ".concat(soql));

                url = "/query/?explain=".concat(encodeURIComponent(soql));
                return _context29.abrupt("return", this._conn.request(url));

              case 6:
              case "end":
                return _context29.stop();
            }
          }
        }, _callee10, this);
      }));

      function explain() {
        return _explain.apply(this, arguments);
      }

      return explain;
    }()
    /**
     * Return SOQL expression for the query
     */

  }, {
    key: "toSOQL",
    value: function () {
      var _toSOQL = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11() {
        return _regeneratorRuntime.wrap(function _callee11$(_context30) {
          while (1) {
            switch (_context30.prev = _context30.next) {
              case 0:
                if (!this._soql) {
                  _context30.next = 2;
                  break;
                }

                return _context30.abrupt("return", this._soql);

              case 2:
                _context30.next = 4;
                return this._expandFields();

              case 4:
                return _context30.abrupt("return", createSOQL(this._config));

              case 5:
              case "end":
                return _context30.stop();
            }
          }
        }, _callee11, this);
      }));

      function toSOQL() {
        return _toSOQL.apply(this, arguments);
      }

      return toSOQL;
    }()
    /**
     * Promise/A+ interface
     * http://promises-aplus.github.io/promises-spec/
     *
     * Delegate to deferred promise, return promise instance for query result
     */

  }, {
    key: "then",
    value: function then(onResolve, onReject) {
      this._chaining = true;

      if (!this._finished && !this._executed) {
        this.execute();
      }

      if (!this._promise) {
        throw new Error('invalid state: promise is not set after query execution');
      }

      return this._promise.then(onResolve, onReject);
    }
  }, {
    key: "catch",
    value: function _catch(onReject) {
      return this.then(null, onReject);
    }
  }, {
    key: "promise",
    value: function promise() {
      return _Promise.resolve(this);
    }
    /**
     * Bulk delete queried records
     */

  }, {
    key: "destroy",
    value: function destroy(type, options) {
      var _this5 = this;

      if (_typeof(type) === 'object' && type !== null) {
        options = type;
        type = undefined;
      }

      options = options || {};
      var type_ = type || this._config.table;

      if (!type_) {
        throw new Error('SOQL based query needs SObject type information to bulk delete.');
      } // Set the threshold number to pass to bulk API


      var thresholdNum = options.allowBulk === false ? -1 : typeof options.bulkThreshold === 'number' ? options.bulkThreshold : // determine threshold if the connection version supports SObject collection API or not
      this._conn._ensureVersion(42) ? DEFAULT_BULK_THRESHOLD : this._conn._maxRequest / 2;
      return new _Promise(function (resolve, reject) {
        var createBatch = function createBatch() {
          return _this5._conn.sobject(type_).deleteBulk().on('response', resolve).on('error', reject);
        };

        var records = [];
        var batch = null;

        var handleRecord = function handleRecord(rec) {
          if (!rec.Id) {
            var _err = new Error('Queried record does not include Salesforce record ID.');

            _this5.emit('error', _err);

            return;
          }

          var record = {
            Id: rec.Id
          };

          if (batch) {
            batch.write(record);
          } else {
            records.push(record);

            if (thresholdNum >= 0 && records.length > thresholdNum) {
              // Use bulk delete instead of SObject REST API
              batch = createBatch();

              var _iterator4 = _createForOfIteratorHelper(records),
                  _step4;

              try {
                for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
                  var _record = _step4.value;
                  batch.write(_record);
                }
              } catch (err) {
                _iterator4.e(err);
              } finally {
                _iterator4.f();
              }

              records = [];
            }
          }
        };

        var handleEnd = function handleEnd() {
          if (batch) {
            batch.end();
          } else {
            var ids = _mapInstanceProperty(records).call(records, function (record) {
              return record.Id;
            });

            _this5._conn.sobject(type_).destroy(ids, {
              allowRecursive: true
            }).then(resolve, reject);
          }
        };

        _this5.stream('record').on('data', handleRecord).on('end', handleEnd).on('error', reject);
      });
    }
    /**
     * Synonym of Query#destroy()
     */

  }, {
    key: "update",
    value: function update(mapping, type, options) {
      var _this6 = this;

      if (_typeof(type) === 'object' && type !== null) {
        options = type;
        type = undefined;
      }

      options = options || {};
      var type_ = type || this._config && this._config.table;

      if (!type_) {
        throw new Error('SOQL based query needs SObject type information to bulk update.');
      }

      var updateStream = typeof mapping === 'function' ? _mapInstanceProperty(RecordStream).call(RecordStream, mapping) : RecordStream.recordMapStream(mapping); // Set the threshold number to pass to bulk API

      var thresholdNum = options.allowBulk === false ? -1 : typeof options.bulkThreshold === 'number' ? options.bulkThreshold : // determine threshold if the connection version supports SObject collection API or not
      this._conn._ensureVersion(42) ? DEFAULT_BULK_THRESHOLD : this._conn._maxRequest / 2;
      return new _Promise(function (resolve, reject) {
        var createBatch = function createBatch() {
          return _this6._conn.sobject(type_).updateBulk().on('response', resolve).on('error', reject);
        };

        var records = [];
        var batch = null;

        var handleRecord = function handleRecord(record) {
          if (batch) {
            batch.write(record);
          } else {
            records.push(record);
          }

          if (thresholdNum >= 0 && records.length > thresholdNum) {
            // Use bulk update instead of SObject REST API
            batch = createBatch();

            var _iterator5 = _createForOfIteratorHelper(records),
                _step5;

            try {
              for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
                var _record2 = _step5.value;
                batch.write(_record2);
              }
            } catch (err) {
              _iterator5.e(err);
            } finally {
              _iterator5.f();
            }

            records = [];
          }
        };

        var handleEnd = function handleEnd() {
          if (batch) {
            batch.end();
          } else {
            _this6._conn.sobject(type_).update(records, {
              allowRecursive: true
            }).then(resolve, reject);
          }
        };

        _this6.stream('record').on('error', reject).pipe(updateStream).on('data', handleRecord).on('end', handleEnd).on('error', reject);
      });
    }
  }]);

  return Query;
}(EventEmitter);
/*--------------------------------------------*/

/**
 * SubQuery object for representing child relationship query
 */

_defineProperty(Query, "_logger", getLogger('query'));

export var SubQuery = /*#__PURE__*/function () {
  /**
   *
   */
  function SubQuery(conn, relName, config, parent) {
    _classCallCheck(this, SubQuery);

    _defineProperty(this, "_relName", void 0);

    _defineProperty(this, "_query", void 0);

    _defineProperty(this, "_parent", void 0);

    _defineProperty(this, "offset", this.skip);

    _defineProperty(this, "orderby", _sortInstanceProperty(this));

    this._relName = relName;
    this._query = new Query(conn, config);
    this._parent = parent;
  }
  /**
   *
   */


  _createClass(SubQuery, [{
    key: "select",
    value: function select(fields) {
      // force convert query record type without changing instance
      this._query = this._query.select(fields);
      return this;
    }
    /**
     *
     */

  }, {
    key: "where",
    value: function where(conditions) {
      this._query = this._query.where(conditions);
      return this;
    }
    /**
     * Limit the returning result
     */

  }, {
    key: "limit",
    value: function limit(_limit2) {
      this._query = this._query.limit(_limit2);
      return this;
    }
    /**
     * Skip records
     */

  }, {
    key: "skip",
    value: function skip(offset) {
      this._query = this._query.skip(offset);
      return this;
    }
    /**
     * Synonym of SubQuery#skip()
     */

  }, {
    key: "sort",
    value: function (_sort3) {
      function sort(_x12, _x13) {
        return _sort3.apply(this, arguments);
      }

      sort.toString = function () {
        return _sort3.toString();
      };

      return sort;
    }(function (sort, dir) {
      var _context31;

      this._query = _sortInstanceProperty(_context31 = this._query).call(_context31, sort, dir);
      return this;
    })
    /**
     * Synonym of SubQuery#sort()
     */

  }, {
    key: "_expandFields",

    /**
     *
     */
    value: function () {
      var _expandFields3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12() {
        var sobject;
        return _regeneratorRuntime.wrap(function _callee12$(_context32) {
          while (1) {
            switch (_context32.prev = _context32.next) {
              case 0:
                _context32.next = 2;
                return this._parent._findRelationObject(this._relName);

              case 2:
                sobject = _context32.sent;
                return _context32.abrupt("return", this._query._expandFields(sobject));

              case 4:
              case "end":
                return _context32.stop();
            }
          }
        }, _callee12, this);
      }));

      function _expandFields() {
        return _expandFields3.apply(this, arguments);
      }

      return _expandFields;
    }()
    /**
     * Back the context to parent query object
     */

  }, {
    key: "end",
    value: function end() {
      return this._parent;
    }
  }]);

  return SubQuery;
}();
export default Query;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9xdWVyeS50cyJdLCJuYW1lcyI6WyJFdmVudEVtaXR0ZXIiLCJnZXRMb2dnZXIiLCJSZWNvcmRTdHJlYW0iLCJTZXJpYWxpemFibGUiLCJjcmVhdGVTT1FMIiwiUmVzcG9uc2VUYXJnZXRWYWx1ZXMiLCJSZXNwb25zZVRhcmdldHMiLCJ2YWx1ZXMiLCJ0YXJnZXQiLCJERUZBVUxUX0JVTEtfVEhSRVNIT0xEIiwiUXVlcnkiLCJjb25uIiwiY29uZmlnIiwib3B0aW9ucyIsInNraXAiLCJleGVjdXRlIiwiZGVzdHJveSIsIl9jb25uIiwiX2xvZ2dlciIsIl9sb2dMZXZlbCIsImNyZWF0ZUluc3RhbmNlIiwiX3NvcWwiLCJkZWJ1ZyIsImxvY2F0b3IiLCJfbG9jYXRvciIsInVybFRvTG9jYXRvciIsImZpZWxkcyIsImluY2x1ZGVzIiwic29ydCIsIl9jb25maWciLCJzZWxlY3QiLCJpbmNsdWRlQ2hpbGRyZW4iLCJfb3B0aW9ucyIsImhlYWRlcnMiLCJtYXhGZXRjaCIsImF1dG9GZXRjaCIsInNjYW5BbGwiLCJyZXNwb25zZVRhcmdldCIsIl9wcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIm9uIiwiX3N0cmVhbSIsInJlY29yZCIsInB1c2giLCJlcnIiLCJlbWl0IiwiZSIsIkVycm9yIiwidG9GaWVsZEFycmF5Iiwic3BsaXQiLCJmcyIsImYiLCJ2IiwicCIsImNvbmRpdGlvbnMiLCJsaW1pdCIsIm9mZnNldCIsImRpciIsImNoaWxkUmVsTmFtZSIsImNoaWxkQ29uZmlnIiwidW5kZWZpbmVkIiwidGFibGUiLCJjaGlsZFF1ZXJ5IiwiU3ViUXVlcnkiLCJfY2hpbGRyZW4iLCJjcm5hbWUiLCJpbmNsdWRlIiwib3B0aW9uc18iLCJfZXhlY3V0ZWQiLCJfZmluaXNoZWQiLCJvbmNlIiwiUmVjb3JkcyIsIl9jaGFpbmluZyIsInJlY29yZHMiLCJvblJlY29yZCIsInJlbW92ZUxpc3RlbmVyIiwiX2V4ZWN1dGUiLCJfYmFzZVVybCIsImpvaW4iLCJ1cmwiLCJwb3AiLCJyYXdEb25lIiwidG90YWxTaXplIiwiZG9uZSIsIm5leHRSZWNvcmRzVXJsIiwibG9jYXRvclRvVXJsIiwidG9TT1FMIiwic29xbCIsImVuY29kZVVSSUNvbXBvbmVudCIsInJlcXVlc3QiLCJtZXRob2QiLCJkYXRhIiwibGVuZ3RoIiwibnVtUmVjb3JkcyIsInRvdGFsRmV0Y2hlZCIsImkiLCJyZXNwb25zZSIsImNvbnN0cnVjdFJlc3BvbnNlIiwidHlwZSIsInN0cmVhbSIsInBpcGUiLCJzb2JqZWN0XyIsInNvYmplY3QiLCJhbGwiLCJfZXhwYW5kQXN0ZXJpc2tGaWVsZHMiLCJfZXhwYW5kRmllbGRzIiwiZWZpZWxkcyIsImNxdWVyeSIsImNjb25maWciLCJfcXVlcnkiLCJjdGFibGUiLCJyZWxOYW1lIiwiZGVzY3JpYmUkIiwidXBwZXJSbmFtZSIsInRvVXBwZXJDYXNlIiwiY2hpbGRSZWxhdGlvbnNoaXBzIiwiY3IiLCJyZWxhdGlvbnNoaXBOYW1lIiwiY2hpbGRTT2JqZWN0IiwiZmllbGQiLCJfZXhwYW5kQXN0ZXJpc2tGaWVsZCIsImV4cGFuZGVkRmllbGRzIiwiZWZsZHMiLCJmbGRzIiwiZnBhdGgiLCJzbyIsInJuYW1lIiwic2hpZnQiLCJyZmllbGQiLCJyZWZlcmVuY2VUbyIsInJ0YWJsZSIsImZwYXRocyIsImZwIiwibmFtZSIsIm9uUmVzb2x2ZSIsIm9uUmVqZWN0IiwidGhlbiIsInR5cGVfIiwidGhyZXNob2xkTnVtIiwiYWxsb3dCdWxrIiwiYnVsa1RocmVzaG9sZCIsIl9lbnN1cmVWZXJzaW9uIiwiX21heFJlcXVlc3QiLCJjcmVhdGVCYXRjaCIsImRlbGV0ZUJ1bGsiLCJiYXRjaCIsImhhbmRsZVJlY29yZCIsInJlYyIsIklkIiwid3JpdGUiLCJoYW5kbGVFbmQiLCJlbmQiLCJpZHMiLCJhbGxvd1JlY3Vyc2l2ZSIsIm1hcHBpbmciLCJ1cGRhdGVTdHJlYW0iLCJyZWNvcmRNYXBTdHJlYW0iLCJ1cGRhdGVCdWxrIiwidXBkYXRlIiwicGFyZW50IiwiX3JlbE5hbWUiLCJfcGFyZW50Iiwid2hlcmUiLCJfZmluZFJlbGF0aW9uT2JqZWN0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVNBLFlBQVQsUUFBNkIsUUFBN0I7QUFDQSxTQUFpQkMsU0FBakIsUUFBa0MsZUFBbEM7QUFDQSxPQUFPQyxZQUFQLElBQXVCQyxZQUF2QixRQUEyQyxpQkFBM0M7QUFFQSxTQUFTQyxVQUFULFFBQTJCLGdCQUEzQjtBQTRJQSxJQUFNQyxvQkFBb0IsR0FBRyxDQUMzQixhQUQyQixFQUUzQixTQUYyQixFQUczQixjQUgyQixFQUkzQixPQUoyQixDQUE3QjtBQVNBLE9BQU8sSUFBTUMsZUFFWixHQUFHLHdCQUFBRCxvQkFBb0IsTUFBcEIsQ0FBQUEsb0JBQW9CLEVBQ3RCLFVBQUNFLE1BQUQsRUFBU0MsTUFBVDtBQUFBLHlDQUEwQkQsTUFBMUIsMkJBQW1DQyxNQUFuQyxFQUE0Q0EsTUFBNUM7QUFBQSxDQURzQixFQUV0QixFQUZzQixDQUZqQjs7QUE4QlA7QUFDQTtBQUNBO0FBQ0EsSUFBTUMsc0JBQXNCLEdBQUcsR0FBL0I7QUFFQTtBQUNBO0FBQ0E7O0FBQ0EsV0FBYUMsS0FBYjtBQUFBOztBQUFBOztBQXlCRTtBQUNGO0FBQ0E7QUFDRSxpQkFDRUMsSUFERixFQUVFQyxNQUZGLEVBR0VDLE9BSEYsRUFJRTtBQUFBOztBQUFBOztBQUNBOztBQURBOztBQUFBOztBQUFBOztBQUFBOztBQUFBLDhEQXBCeUIsRUFvQnpCOztBQUFBLGdFQW5CbUQsRUFtQm5EOztBQUFBOztBQUFBLGdFQWpCbUIsS0FpQm5COztBQUFBLGdFQWhCbUIsS0FnQm5COztBQUFBLGdFQWZtQixLQWVuQjs7QUFBQTs7QUFBQTs7QUFBQSxnRUFYVSxDQVdWOztBQUFBLG1FQVZhLENBVWI7O0FBQUEsOERBVGEsRUFTYjs7QUFBQSw2REF1SU8sTUFBS0MsSUF2SVo7O0FBQUE7O0FBQUEsMkRBa1dLLE1BQUtDLE9BbFdWOztBQUFBLDBEQXVXSSxNQUFLQSxPQXZXVDs7QUFBQSw2REEydUJPLE1BQUtDLE9BM3VCWjs7QUFBQSwwREFndkJJLE1BQUtBLE9BaHZCVDs7QUFFQSxVQUFLQyxLQUFMLEdBQWFOLElBQWI7QUFDQSxVQUFLTyxPQUFMLEdBQWVQLElBQUksQ0FBQ1EsU0FBTCxHQUNYVCxLQUFLLENBQUNRLE9BQU4sQ0FBY0UsY0FBZCxDQUE2QlQsSUFBSSxDQUFDUSxTQUFsQyxDQURXLEdBRVhULEtBQUssQ0FBQ1EsT0FGVjs7QUFHQSxRQUFJLE9BQU9OLE1BQVAsS0FBa0IsUUFBdEIsRUFBZ0M7QUFDOUIsWUFBS1MsS0FBTCxHQUFhVCxNQUFiOztBQUNBLFlBQUtNLE9BQUwsQ0FBYUksS0FBYiwyQkFBc0NWLE1BQXRDO0FBQ0QsS0FIRCxNQUdPLElBQUksT0FBUUEsTUFBRCxDQUFnQlcsT0FBdkIsS0FBbUMsUUFBdkMsRUFBaUQ7QUFDdEQsVUFBTUEsT0FBZSxHQUFJWCxNQUFELENBQWdCVyxPQUF4Qzs7QUFDQSxZQUFLTCxPQUFMLENBQWFJLEtBQWIsOEJBQXlDQyxPQUF6Qzs7QUFDQSxZQUFLQyxRQUFMLEdBQWdCLDBCQUFBRCxPQUFPLE1BQVAsQ0FBQUEsT0FBTyxFQUFVLEdBQVYsQ0FBUCxHQUNaLE1BQUtFLFlBQUwsQ0FBa0JGLE9BQWxCLENBRFksR0FFWkEsT0FGSjtBQUdELEtBTk0sTUFNQTtBQUNMLFlBQUtMLE9BQUwsQ0FBYUksS0FBYixrQ0FBNkNWLE1BQTdDOztBQURLLGlCQUUwQ0EsTUFGMUM7QUFBQSxVQUVHYyxPQUZILFFBRUdBLE1BRkg7QUFBQSxVQUVXQyxRQUZYO0FBQUEsVUFFcUJDLE1BRnJCO0FBQUEsVUFFOEJDLE9BRjlCOztBQU1MLFlBQUtBLE9BQUwsR0FBZUEsT0FBZjs7QUFDQSxZQUFLQyxNQUFMLENBQVlKLE9BQVo7O0FBQ0EsVUFBSUMsUUFBSixFQUFjO0FBQ1osY0FBS0ksZUFBTCxDQUFxQkosUUFBckI7QUFDRDs7QUFDRCxVQUFJQyxNQUFKLEVBQVU7QUFDUixpREFBVUEsTUFBVjtBQUNEO0FBQ0Y7O0FBQ0QsVUFBS0ksUUFBTDtBQUNFQyxNQUFBQSxPQUFPLEVBQUUsRUFEWDtBQUVFQyxNQUFBQSxRQUFRLEVBQUUsS0FGWjtBQUdFQyxNQUFBQSxTQUFTLEVBQUUsS0FIYjtBQUlFQyxNQUFBQSxPQUFPLEVBQUUsS0FKWDtBQUtFQyxNQUFBQSxjQUFjLEVBQUU7QUFMbEIsT0FNTXhCLE9BQU8sSUFBSSxFQU5qQixFQTlCQSxDQXNDQTs7QUFDQSxVQUFLeUIsUUFBTCxHQUFnQixhQUFZLFVBQUNDLE9BQUQsRUFBVUMsTUFBVixFQUFxQjtBQUMvQyxZQUFLQyxFQUFMLENBQVEsVUFBUixFQUFvQkYsT0FBcEI7O0FBQ0EsWUFBS0UsRUFBTCxDQUFRLE9BQVIsRUFBaUJELE1BQWpCO0FBQ0QsS0FIZSxDQUFoQjtBQUlBLFVBQUtFLE9BQUwsR0FBZSxJQUFJdkMsWUFBSixFQUFmOztBQUNBLFVBQUtzQyxFQUFMLENBQVEsUUFBUixFQUFrQixVQUFDRSxNQUFEO0FBQUEsYUFBWSxNQUFLRCxPQUFMLENBQWFFLElBQWIsQ0FBa0JELE1BQWxCLENBQVo7QUFBQSxLQUFsQjs7QUFDQSxVQUFLRixFQUFMLENBQVEsS0FBUixFQUFlO0FBQUEsYUFBTSxNQUFLQyxPQUFMLENBQWFFLElBQWIsQ0FBa0IsSUFBbEIsQ0FBTjtBQUFBLEtBQWY7O0FBQ0EsVUFBS0gsRUFBTCxDQUFRLE9BQVIsRUFBaUIsVUFBQ0ksR0FBRCxFQUFTO0FBQ3hCLFVBQUk7QUFDRixjQUFLSCxPQUFMLENBQWFJLElBQWIsQ0FBa0IsT0FBbEIsRUFBMkJELEdBQTNCO0FBQ0QsT0FGRCxDQUVFLE9BQU9FLENBQVAsRUFBVSxDQUNWO0FBQ0Q7QUFDRixLQU5EOztBQTlDQTtBQXFERDtBQUVEO0FBQ0Y7QUFDQTs7O0FBekZBO0FBQUE7QUFBQSw2QkErRjhEO0FBQUEsVUFBMURyQixNQUEwRCx1RUFBM0IsR0FBMkI7O0FBQzFELFVBQUksS0FBS0wsS0FBVCxFQUFnQjtBQUNkLGNBQU0yQixLQUFLLENBQ1Qsc0VBRFMsQ0FBWDtBQUdEOztBQUNELGVBQVNDLFlBQVQsQ0FBc0J2QixNQUF0QixFQUE4RDtBQUFBOztBQUM1RCxlQUFPLE9BQU9BLE1BQVAsS0FBa0IsUUFBbEIsR0FDSEEsTUFBTSxDQUFDd0IsS0FBUCxDQUFhLFNBQWIsQ0FERyxHQUVILGVBQWN4QixNQUFkLElBQ0Esb0VBQUNBLE1BQUQsa0JBQ091QixZQURQLGtCQUVVLFVBQUNFLEVBQUQsRUFBS0MsQ0FBTDtBQUFBOztBQUFBLDRGQUFlRCxFQUFmLHNCQUFzQkMsQ0FBdEI7QUFBQSxTQUZWLEVBRW9DLEVBRnBDLENBREEsR0FJQSxxRkFBZTFCLE1BQWYsbUJBQ08saUJBQVk7QUFBQTtBQUFBLGNBQVYwQixDQUFVO0FBQUEsY0FBUEMsQ0FBTzs7QUFDZixjQUFJLE9BQU9BLENBQVAsS0FBYSxRQUFiLElBQXlCLE9BQU9BLENBQVAsS0FBYSxTQUExQyxFQUFxRDtBQUNuRCxtQkFBT0EsQ0FBQyxHQUFHLENBQUNELENBQUQsQ0FBSCxHQUFTLEVBQWpCO0FBQ0QsV0FGRCxNQUVPO0FBQUE7O0FBQ0wsbUJBQU8saUNBQUFILFlBQVksQ0FBQ0ksQ0FBRCxDQUFaLGtCQUFvQixVQUFDQyxDQUFEO0FBQUE7O0FBQUEsbUVBQVVGLENBQVYsd0JBQWVFLENBQWY7QUFBQSxhQUFwQixDQUFQO0FBQ0Q7QUFDRixTQVBILG1CQVFVLFVBQUNILEVBQUQsRUFBS0MsQ0FBTDtBQUFBOztBQUFBLDRGQUFlRCxFQUFmLHNCQUFzQkMsQ0FBdEI7QUFBQSxTQVJWLEVBUW9DLEVBUnBDLENBTko7QUFlRDs7QUFDRCxVQUFJMUIsTUFBSixFQUFZO0FBQ1YsYUFBS0csT0FBTCxDQUFhSCxNQUFiLEdBQXNCdUIsWUFBWSxDQUFDdkIsTUFBRCxDQUFsQztBQUNELE9BekJ5RCxDQTBCMUQ7OztBQUNBLGFBQVEsSUFBUjtBQUNEO0FBRUQ7QUFDRjtBQUNBOztBQS9IQTtBQUFBO0FBQUEsMEJBZ0lRNkIsVUFoSVIsRUFnSW1EO0FBQy9DLFVBQUksS0FBS2xDLEtBQVQsRUFBZ0I7QUFDZCxjQUFNMkIsS0FBSyxDQUNULHlFQURTLENBQVg7QUFHRDs7QUFDRCxXQUFLbkIsT0FBTCxDQUFhMEIsVUFBYixHQUEwQkEsVUFBMUI7QUFDQSxhQUFPLElBQVA7QUFDRDtBQUVEO0FBQ0Y7QUFDQTs7QUE1SUE7QUFBQTtBQUFBLDBCQTZJUUMsTUE3SVIsRUE2SXVCO0FBQ25CLFVBQUksS0FBS25DLEtBQVQsRUFBZ0I7QUFDZCxjQUFNMkIsS0FBSyxDQUNULDhEQURTLENBQVg7QUFHRDs7QUFDRCxXQUFLbkIsT0FBTCxDQUFhMkIsS0FBYixHQUFxQkEsTUFBckI7QUFDQSxhQUFPLElBQVA7QUFDRDtBQUVEO0FBQ0Y7QUFDQTs7QUF6SkE7QUFBQTtBQUFBLHlCQTBKT0MsTUExSlAsRUEwSnVCO0FBQ25CLFVBQUksS0FBS3BDLEtBQVQsRUFBZ0I7QUFDZCxjQUFNMkIsS0FBSyxDQUNULG9FQURTLENBQVg7QUFHRDs7QUFDRCxXQUFLbkIsT0FBTCxDQUFhNEIsTUFBYixHQUFzQkEsTUFBdEI7QUFDQSxhQUFPLElBQVA7QUFDRDtBQUVEO0FBQ0Y7QUFDQTs7QUF0S0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBLGdCQWlMSTdCLElBakxKLEVBa0xJOEIsR0FsTEosRUFtTEk7QUFDQSxVQUFJLEtBQUtyQyxLQUFULEVBQWdCO0FBQ2QsY0FBTTJCLEtBQUssQ0FDVCw2REFEUyxDQUFYO0FBR0Q7O0FBQ0QsVUFBSSxPQUFPcEIsSUFBUCxLQUFnQixRQUFoQixJQUE0QixPQUFPOEIsR0FBUCxLQUFlLFdBQS9DLEVBQTREO0FBQzFELGFBQUs3QixPQUFMLENBQWFELElBQWIsR0FBb0IsQ0FBQyxDQUFDQSxJQUFELEVBQU84QixHQUFQLENBQUQsQ0FBcEI7QUFDRCxPQUZELE1BRU87QUFDTCxhQUFLN0IsT0FBTCxDQUFhRCxJQUFiLEdBQW9CQSxJQUFwQjtBQUNEOztBQUNELGFBQU8sSUFBUDtBQUNELEtBL0xIO0FBaU1FO0FBQ0Y7QUFDQTs7QUFuTUE7QUFBQTtBQUFBLDRCQXVPSStCLFlBdk9KLEVBd09JSixVQXhPSixFQXlPSTdCLE1Bek9KLEVBMk95QztBQUFBLFVBRHJDYixPQUNxQyx1RUFEbUMsRUFDbkM7O0FBQ3JDLFVBQUksS0FBS1EsS0FBVCxFQUFnQjtBQUNkLGNBQU0yQixLQUFLLENBQ1QsZ0ZBRFMsQ0FBWDtBQUdEOztBQUNELFVBQU1ZLFdBQW9DLEdBQUc7QUFDM0NsQyxRQUFBQSxNQUFNLEVBQUVBLE1BQU0sS0FBSyxJQUFYLEdBQWtCbUMsU0FBbEIsR0FBOEJuQyxNQURLO0FBRTNDb0MsUUFBQUEsS0FBSyxFQUFFSCxZQUZvQztBQUczQ0osUUFBQUEsVUFBVSxFQUFFQSxVQUFVLEtBQUssSUFBZixHQUFzQk0sU0FBdEIsR0FBa0NOLFVBSEg7QUFJM0NDLFFBQUFBLEtBQUssRUFBRTNDLE9BQU8sQ0FBQzJDLEtBSjRCO0FBSzNDQyxRQUFBQSxNQUFNLEVBQUU1QyxPQUFPLENBQUM0QyxNQUwyQjtBQU0zQzdCLFFBQUFBLElBQUksd0JBQUVmLE9BQUY7QUFOdUMsT0FBN0MsQ0FOcUMsQ0FjckM7O0FBQ0EsVUFBTWtELFVBQVUsR0FBRyxJQUFJQyxRQUFKLENBQ2pCLEtBQUsvQyxLQURZLEVBRWpCMEMsWUFGaUIsRUFHakJDLFdBSGlCLEVBSWpCLElBSmlCLENBQW5COztBQU1BLFdBQUtLLFNBQUwsQ0FBZXJCLElBQWYsQ0FBb0JtQixVQUFwQjs7QUFDQSxhQUFPQSxVQUFQO0FBQ0Q7QUFFRDtBQUNGO0FBQ0E7O0FBdFFBO0FBQUE7QUFBQSxvQ0F3UUlwQyxRQXhRSixFQThRSTtBQUVBLFVBQUksS0FBS04sS0FBVCxFQUFnQjtBQUNkLGNBQU0yQixLQUFLLENBQ1QsZ0ZBRFMsQ0FBWDtBQUdEOztBQU5ELGlEQU9xQixhQUFZckIsUUFBWixDQVByQjtBQUFBOztBQUFBO0FBT0EsNERBQXFEO0FBQUEsY0FBMUN1QyxNQUEwQzs7QUFBQSxzQkFDUnZDLFFBQVEsQ0FDakR1QyxNQURpRCxDQURBO0FBQUEsY0FDM0NYLFdBRDJDLFNBQzNDQSxVQUQyQztBQUFBLGNBQy9CN0IsUUFEK0IsU0FDL0JBLE1BRCtCO0FBQUEsY0FDcEJiLFFBRG9COztBQUluRCxlQUFLc0QsT0FBTCxDQUFhRCxNQUFiLEVBQXFCWCxXQUFyQixFQUFpQzdCLFFBQWpDLEVBQXlDYixRQUF6QztBQUNEO0FBWkQ7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFhQSxhQUFPLElBQVA7QUFDRDtBQUVEO0FBQ0Y7QUFDQTs7QUFoU0E7QUFBQTtBQUFBLDZCQWlTV3FCLFNBalNYLEVBaVM2QjtBQUN6QixXQUFLRixRQUFMLENBQWNFLFFBQWQsR0FBeUJBLFNBQXpCO0FBQ0EsYUFBTyxJQUFQO0FBQ0Q7QUFFRDtBQUNGO0FBQ0E7O0FBeFNBO0FBQUE7QUFBQSw4QkF5U1lDLFVBelNaLEVBeVNnQztBQUM1QixXQUFLSCxRQUFMLENBQWNHLFNBQWQsR0FBMEJBLFVBQTFCO0FBQ0EsYUFBTyxJQUFQO0FBQ0Q7QUFFRDtBQUNGO0FBQ0E7O0FBaFRBO0FBQUE7QUFBQSw0QkFpVFVDLFFBalRWLEVBaVQ0QjtBQUN4QixXQUFLSixRQUFMLENBQWNJLE9BQWQsR0FBd0JBLFFBQXhCO0FBQ0EsYUFBTyxJQUFQO0FBQ0Q7QUFFRDtBQUNGO0FBQ0E7O0FBeFRBO0FBQUE7QUFBQSxzQ0EwVElDLGNBMVRKLEVBMlQwQjtBQUN0QixVQUFJQSxjQUFjLElBQUkvQixlQUF0QixFQUF1QztBQUNyQyxhQUFLMEIsUUFBTCxDQUFjSyxjQUFkLEdBQStCQSxjQUEvQjtBQUNELE9BSHFCLENBSXRCOzs7QUFDQSxhQUFRLElBQVI7QUFDRDtBQUVEO0FBQ0Y7QUFDQTs7QUFyVUE7QUFBQTtBQUFBLDhCQXdVMEI7QUFBQTs7QUFBQSxVQUR0QitCLFFBQ3NCLHVFQUR3QyxFQUN4Qzs7QUFDdEIsVUFBSSxLQUFLQyxTQUFULEVBQW9CO0FBQ2xCLGNBQU0sSUFBSXJCLEtBQUosQ0FBVSxxQ0FBVixDQUFOO0FBQ0Q7O0FBRUQsVUFBSSxLQUFLc0IsU0FBVCxFQUFvQjtBQUNsQixjQUFNLElBQUl0QixLQUFKLENBQVUsZ0NBQVYsQ0FBTjtBQUNEOztBQUVELFVBQU1uQyxPQUFPLEdBQUc7QUFDZG9CLFFBQUFBLE9BQU8sRUFBRW1DLFFBQVEsQ0FBQ25DLE9BQVQsSUFBb0IsS0FBS0QsUUFBTCxDQUFjQyxPQUQ3QjtBQUVkSSxRQUFBQSxjQUFjLEVBQUUrQixRQUFRLENBQUMvQixjQUFULElBQTJCLEtBQUtMLFFBQUwsQ0FBY0ssY0FGM0M7QUFHZEYsUUFBQUEsU0FBUyxFQUFFaUMsUUFBUSxDQUFDakMsU0FBVCxJQUFzQixLQUFLSCxRQUFMLENBQWNHLFNBSGpDO0FBSWRELFFBQUFBLFFBQVEsRUFBRWtDLFFBQVEsQ0FBQ2xDLFFBQVQsSUFBcUIsS0FBS0YsUUFBTCxDQUFjRSxRQUovQjtBQUtkRSxRQUFBQSxPQUFPLEVBQUVnQyxRQUFRLENBQUNoQyxPQUFULElBQW9CLEtBQUtKLFFBQUwsQ0FBY0k7QUFMN0IsT0FBaEIsQ0FUc0IsQ0FpQnRCO0FBQ0E7QUFDQTs7QUFDQSxXQUFLbUMsSUFBTCxDQUFVLE9BQVYsRUFBbUIsWUFBTTtBQUN2QixZQUNFMUQsT0FBTyxDQUFDd0IsY0FBUixLQUEyQi9CLGVBQWUsQ0FBQ2tFLE9BQTNDLElBQ0EsTUFBSSxDQUFDQyxTQUZQLEVBR0U7QUFDQSxVQUFBLE1BQUksQ0FBQ3ZELE9BQUwsQ0FBYUksS0FBYixDQUFtQix3Q0FBbkI7O0FBQ0EsY0FBTW9ELE9BQWlCLEdBQUcsRUFBMUI7O0FBQ0EsY0FBTUMsUUFBUSxHQUFHLFNBQVhBLFFBQVcsQ0FBQ2hDLE1BQUQ7QUFBQSxtQkFBb0IrQixPQUFPLENBQUM5QixJQUFSLENBQWFELE1BQWIsQ0FBcEI7QUFBQSxXQUFqQjs7QUFDQSxVQUFBLE1BQUksQ0FBQ0YsRUFBTCxDQUFRLFFBQVIsRUFBa0JrQyxRQUFsQjs7QUFDQSxVQUFBLE1BQUksQ0FBQ0osSUFBTCxDQUFVLEtBQVYsRUFBaUIsWUFBTTtBQUNyQixZQUFBLE1BQUksQ0FBQ0ssY0FBTCxDQUFvQixRQUFwQixFQUE4QkQsUUFBOUI7O0FBQ0EsWUFBQSxNQUFJLENBQUM3QixJQUFMLENBQVUsVUFBVixFQUFzQjRCLE9BQXRCLEVBQStCLE1BQS9CO0FBQ0QsV0FIRDtBQUlEO0FBQ0YsT0FkRCxFQXBCc0IsQ0FvQ3RCOztBQUNBLFdBQUtMLFNBQUwsR0FBaUIsSUFBakI7O0FBRUEsK0RBQUM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNDO0FBQ0EsZ0JBQUEsTUFBSSxDQUFDbkQsT0FBTCxDQUFhSSxLQUFiLENBQW1CLHFCQUFuQjs7QUFGRDtBQUFBO0FBQUEsdUJBSVMsTUFBSSxDQUFDdUQsUUFBTCxDQUFjaEUsT0FBZCxDQUpUOztBQUFBO0FBS0csZ0JBQUEsTUFBSSxDQUFDSyxPQUFMLENBQWFJLEtBQWIsQ0FBbUIsd0JBQW5COztBQUxIO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQU9HLGdCQUFBLE1BQUksQ0FBQ0osT0FBTCxDQUFhSSxLQUFiLENBQW1CLHFCQUFuQjs7QUFDQSxnQkFBQSxNQUFJLENBQUN3QixJQUFMLENBQVUsT0FBVjs7QUFSSDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxPQUFELEtBdkNzQixDQW1EdEI7OztBQUNBLGFBQVEsSUFBUjtBQUNEO0FBRUQ7QUFDRjtBQUNBOztBQWpZQTtBQUFBO0FBQUEsbUNBeVl5QjtBQUNyQixhQUFPLEtBQUt0QixRQUFMLEdBQ0gsQ0FBQyxLQUFLUCxLQUFMLENBQVc2RCxRQUFYLEVBQUQsRUFBd0IsU0FBeEIsRUFBbUMsS0FBS3RELFFBQXhDLEVBQWtEdUQsSUFBbEQsQ0FBdUQsRUFBdkQsQ0FERyxHQUVILEVBRko7QUFHRDtBQTdZSDtBQUFBO0FBQUEsaUNBK1l1QkMsR0EvWXZCLEVBK1lvQztBQUNoQyxhQUFPQSxHQUFHLENBQUM5QixLQUFKLENBQVUsR0FBVixFQUFlK0IsR0FBZixFQUFQO0FBQ0Q7QUFqWkg7QUFBQTtBQUFBLHNDQW9hSUMsT0FwYUosRUFxYUk3QyxjQXJhSixFQXNhdUM7QUFBQTs7QUFDbkMsY0FBUUEsY0FBUjtBQUNFLGFBQUssT0FBTDtBQUNFLGlCQUFPLEtBQUs4QyxTQUFaOztBQUNGLGFBQUssY0FBTDtBQUNFLG9EQUFPLEtBQUtULE9BQVosa0RBQU8sY0FBZSxDQUFmLENBQVAsMkRBQTRCLElBQTVCOztBQUNGLGFBQUssU0FBTDtBQUNFLGlCQUFPLEtBQUtBLE9BQVo7QUFDRjs7QUFDQTtBQUNFLGlEQUNLO0FBQ0RBLFlBQUFBLE9BQU8sRUFBRSxLQUFLQSxPQURiO0FBRURTLFlBQUFBLFNBQVMsRUFBRSxLQUFLQSxTQUZmO0FBR0RDLFlBQUFBLElBQUksRUFBRUYsT0FBRixhQUFFQSxPQUFGLGNBQUVBLE9BQUYsR0FBYSxJQUhoQixDQUdzQjs7QUFIdEIsV0FETCxHQU1NLEtBQUsxRCxRQUFMLEdBQWdCO0FBQUU2RCxZQUFBQSxjQUFjLEVBQUUsS0FBS0MsWUFBTDtBQUFsQixXQUFoQixHQUEwRCxFQU5oRTtBQVRKO0FBa0JEO0FBQ0Q7QUFDRjtBQUNBOztBQTViQTtBQUFBO0FBQUE7QUFBQSxpR0E2YmlCekUsT0E3YmpCO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQThiWW9CLGdCQUFBQSxPQTliWixHQThic0VwQixPQTlidEUsQ0E4YllvQixPQTliWixFQThicUJJLGNBOWJyQixHQThic0V4QixPQTlidEUsQ0E4YnFCd0IsY0E5YnJCLEVBOGJxQ0YsU0E5YnJDLEdBOGJzRXRCLE9BOWJ0RSxDQThicUNzQixTQTlickMsRUE4YmdERCxRQTliaEQsR0E4YnNFckIsT0E5YnRFLENBOGJnRHFCLFFBOWJoRCxFQThiMERFLE9BOWIxRCxHQThic0V2QixPQTlidEUsQ0E4YjBEdUIsT0E5YjFEOztBQStiSSxxQkFBS2xCLE9BQUwsQ0FBYUksS0FBYixDQUFtQixzQkFBbkIsRUFBMkNULE9BQTNDOztBQS9iSixxQkFpY1EsS0FBS1csUUFqY2I7QUFBQTtBQUFBO0FBQUE7O0FBa2NNd0QsZ0JBQUFBLEdBQUcsR0FBRyxLQUFLTSxZQUFMLEVBQU47QUFsY047QUFBQTs7QUFBQTtBQUFBO0FBQUEsdUJBb2N5QixLQUFLQyxNQUFMLEVBcGN6Qjs7QUFBQTtBQW9jWUMsZ0JBQUFBLElBcGNaOztBQXFjTSxxQkFBS3RFLE9BQUwsQ0FBYUksS0FBYixrQkFBNkJrRSxJQUE3Qjs7QUFDQVIsZ0JBQUFBLEdBQUcsR0FBRyxDQUNKLEtBQUsvRCxLQUFMLENBQVc2RCxRQUFYLEVBREksRUFFSixHQUZJLEVBR0oxQyxPQUFPLEdBQUcsVUFBSCxHQUFnQixPQUhuQixFQUlKLEtBSkksRUFLSnFELGtCQUFrQixDQUFDRCxJQUFELENBTGQsRUFNSlQsSUFOSSxDQU1DLEVBTkQsQ0FBTjs7QUF0Y047QUFBQTtBQUFBLHVCQThjdUIsS0FBSzlELEtBQUwsQ0FBV3lFLE9BQVgsQ0FBc0I7QUFBRUMsa0JBQUFBLE1BQU0sRUFBRSxLQUFWO0FBQWlCWCxrQkFBQUEsR0FBRyxFQUFIQSxHQUFqQjtBQUFzQi9DLGtCQUFBQSxPQUFPLEVBQVBBO0FBQXRCLGlCQUF0QixDQTljdkI7O0FBQUE7QUE4Y1UyRCxnQkFBQUEsSUE5Y1Y7QUErY0kscUJBQUs5QyxJQUFMLENBQVUsT0FBVjtBQUNBLHFCQUFLcUMsU0FBTCxHQUFpQlMsSUFBSSxDQUFDVCxTQUF0QjtBQUNBLHFCQUFLVCxPQUFMLHFCQUFlLEtBQUtBLE9BQXBCLG1EQUFlLDZEQUNieEMsUUFBUSxHQUFHLEtBQUt3QyxPQUFMLENBQWFtQixNQUF4QixHQUFpQ0QsSUFBSSxDQUFDbEIsT0FBTCxDQUFhbUIsTUFBOUMsR0FDSUQsSUFBSSxDQUFDbEIsT0FEVCxHQUVJLG9DQUFBa0IsSUFBSSxDQUFDbEIsT0FBTCxtQkFBbUIsQ0FBbkIsRUFBc0J4QyxRQUFRLEdBQUcsS0FBS3dDLE9BQUwsQ0FBYW1CLE1BQTlDLENBSFMsQ0FBZjtBQUtBLHFCQUFLckUsUUFBTCxHQUFnQm9FLElBQUksQ0FBQ1AsY0FBTCxHQUNaLEtBQUs1RCxZQUFMLENBQWtCbUUsSUFBSSxDQUFDUCxjQUF2QixDQURZLEdBRVp4QixTQUZKO0FBR0EscUJBQUtTLFNBQUwsR0FDRSxLQUFLQSxTQUFMLElBQ0FzQixJQUFJLENBQUNSLElBREwsSUFFQSxDQUFDakQsU0FGRCxJQUdBO0FBQ0N5RCxnQkFBQUEsSUFBSSxDQUFDbEIsT0FBTCxDQUFhbUIsTUFBYixLQUF3QixDQUF4QixJQUE2QkQsSUFBSSxDQUFDUixJQUFMLEtBQWN2QixTQUw5QyxDQXpkSixDQWdlSTs7QUFDTWlDLGdCQUFBQSxVQWplViw0Q0FpZXVCRixJQUFJLENBQUNsQixPQWplNUIsa0RBaWV1QixjQUFjbUIsTUFqZXJDLHVFQWllK0MsQ0FqZS9DO0FBa2VRRSxnQkFBQUEsWUFsZVIsR0FrZXVCLEtBQUtBLFlBbGU1QjtBQW1lYUMsZ0JBQUFBLENBbmViLEdBbWVpQixDQW5lakI7O0FBQUE7QUFBQSxzQkFtZW9CQSxDQUFDLEdBQUdGLFVBbmV4QjtBQUFBO0FBQUE7QUFBQTs7QUFBQSxzQkFvZVVDLFlBQVksSUFBSTdELFFBcGUxQjtBQUFBO0FBQUE7QUFBQTs7QUFxZVEscUJBQUtvQyxTQUFMLEdBQWlCLElBQWpCO0FBcmVSOztBQUFBO0FBd2VZM0IsZ0JBQUFBLE1BeGVaLEdBd2VxQmlELElBQUksQ0FBQ2xCLE9BQUwsQ0FBYXNCLENBQWIsQ0F4ZXJCO0FBeWVNLHFCQUFLbEQsSUFBTCxDQUFVLFFBQVYsRUFBb0JILE1BQXBCLEVBQTRCb0QsWUFBNUIsRUFBMEMsSUFBMUM7QUFDQUEsZ0JBQUFBLFlBQVksSUFBSSxDQUFoQjs7QUExZU47QUFtZW9DQyxnQkFBQUEsQ0FBQyxFQW5lckM7QUFBQTtBQUFBOztBQUFBO0FBNGVJLHFCQUFLRCxZQUFMLEdBQW9CQSxZQUFwQjs7QUE1ZUoscUJBOGVRLEtBQUt6QixTQTllYjtBQUFBO0FBQUE7QUFBQTs7QUErZVkyQixnQkFBQUEsUUEvZVosR0ErZXVCLEtBQUtDLGlCQUFMLENBQXVCTixJQUFJLENBQUNSLElBQTVCLEVBQWtDL0MsY0FBbEMsQ0EvZXZCLEVBZ2ZNOztBQUNBLG9CQUFJQSxjQUFjLEtBQUsvQixlQUFlLENBQUNrRSxPQUF2QyxFQUFnRDtBQUM5Qyx1QkFBSzFCLElBQUwsQ0FBVSxVQUFWLEVBQXNCbUQsUUFBdEIsRUFBZ0MsSUFBaEM7QUFDRDs7QUFDRCxxQkFBS25ELElBQUwsQ0FBVSxLQUFWO0FBcGZOLG1EQXFmYW1ELFFBcmZiOztBQUFBO0FBQUEsbURBdWZhLEtBQUtwQixRQUFMLENBQWNoRSxPQUFkLENBdmZiOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBMmZFO0FBQ0Y7QUFDQTs7QUE3ZkE7QUFBQTtBQUFBLDZCQWdnQnlDO0FBQUEsVUFBaENzRixJQUFnQyx1RUFBUCxLQUFPOztBQUNyQyxVQUFJLENBQUMsS0FBSzdCLFNBQU4sSUFBbUIsQ0FBQyxLQUFLRCxTQUE3QixFQUF3QztBQUN0QyxhQUFLdEQsT0FBTCxDQUFhO0FBQUVvQixVQUFBQSxTQUFTLEVBQUU7QUFBYixTQUFiO0FBQ0Q7O0FBQ0QsYUFBT2dFLElBQUksS0FBSyxRQUFULEdBQW9CLEtBQUt6RCxPQUF6QixHQUFtQyxLQUFLQSxPQUFMLENBQWEwRCxNQUFiLENBQW9CRCxJQUFwQixDQUExQztBQUNEO0FBRUQ7QUFDRjtBQUNBO0FBQ0E7QUFDQTs7QUEzZ0JBO0FBQUE7QUFBQSx5QkE0Z0JPQyxNQTVnQlAsRUE0Z0JzQztBQUNsQyxhQUFPLEtBQUtBLE1BQUwsQ0FBWSxRQUFaLEVBQXNCQyxJQUF0QixDQUEyQkQsTUFBM0IsQ0FBUDtBQUNEO0FBRUQ7QUFDRjtBQUNBOztBQWxoQkE7QUFBQTtBQUFBO0FBQUEsc0dBbWhCc0JFLFFBbmhCdEI7QUFBQTs7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHFCQW9oQlEsS0FBS2pGLEtBcGhCYjtBQUFBO0FBQUE7QUFBQTs7QUFBQSxzQkFxaEJZLElBQUkyQixLQUFKLENBQ0osa0VBREksQ0FyaEJaOztBQUFBO0FBQUEsZ0NBeWhCd0MsS0FBS25CLE9BemhCN0MsdUNBeWhCWUgsTUF6aEJaLEVBeWhCWUEsTUF6aEJaLHFDQXloQnFCLEVBemhCckIsNkRBeWhCeUJvQyxLQXpoQnpCLEVBeWhCeUJBLEtBemhCekIsb0NBeWhCaUMsRUF6aEJqQztBQTBoQlV5QyxnQkFBQUEsT0ExaEJWLEdBMGhCb0JELFFBQVEsSUFBSXhDLEtBMWhCaEM7O0FBMmhCSSxxQkFBSzVDLE9BQUwsQ0FBYUksS0FBYix5RUFDOEJpRixPQUQ5QixtQ0FDbUQ3RSxNQUFNLENBQUNxRCxJQUFQLENBQVksSUFBWixDQURuRDs7QUEzaEJKO0FBQUEsdUJBOGhCNEIsU0FBUXlCLEdBQVIsdUNBQ3RCLEtBQUtDLHFCQUFMLENBQTJCRixPQUEzQixFQUFvQzdFLE1BQXBDLENBRHNCLHVDQUVuQix1Q0FBS3VDLFNBQUw7QUFBQSx1RkFBbUIsa0JBQU9GLFVBQVA7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsbUNBQ2RBLFVBQVUsQ0FBQzJDLGFBQVgsRUFEYzs7QUFBQTtBQUFBLCtEQUViLEVBRmE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsbUJBQW5COztBQUFBO0FBQUE7QUFBQTtBQUFBLG9CQUZtQixHQTloQjVCOztBQUFBO0FBQUE7QUFBQTtBQThoQldDLGdCQUFBQSxPQTloQlg7QUFxaUJJLHFCQUFLOUUsT0FBTCxDQUFhSCxNQUFiLEdBQXNCaUYsT0FBdEI7QUFDQSxxQkFBSzlFLE9BQUwsQ0FBYUYsUUFBYixHQUF3Qiw0RUFBS3NDLFNBQUwsbUJBQ2pCLFVBQUMyQyxNQUFELEVBQVk7QUFDZixzQkFBTUMsT0FBTyxHQUFHRCxNQUFNLENBQUNFLE1BQVAsQ0FBY2pGLE9BQTlCO0FBQ0EseUJBQU8sQ0FBQ2dGLE9BQU8sQ0FBQy9DLEtBQVQsRUFBZ0IrQyxPQUFoQixDQUFQO0FBQ0QsaUJBSnFCLG9CQU1wQixVQUFDbEYsUUFBRDtBQUFBO0FBQUEsc0JBQVlvRixNQUFaO0FBQUEsc0JBQW9CRixPQUFwQjs7QUFBQSx5REFDS2xGLFFBREwsMkJBRUdvRixNQUZILEVBRVlGLE9BRlo7QUFBQSxpQkFOb0IsRUFVcEIsRUFWb0IsQ0FBeEI7O0FBdGlCSjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQW9qQkU7QUFDRjtBQUNBOztBQXRqQkE7QUFBQTtBQUFBO0FBQUEsNEdBdWpCNEJHLE9BdmpCNUI7QUFBQTs7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQXdqQlVsRCxnQkFBQUEsS0F4akJWLEdBd2pCa0IsS0FBS2pDLE9BQUwsQ0FBYWlDLEtBeGpCL0I7O0FBQUEsb0JBeWpCU0EsS0F6akJUO0FBQUE7QUFBQTtBQUFBOztBQUFBLHNCQTBqQlksSUFBSWQsS0FBSixDQUFVLDRDQUFWLENBMWpCWjs7QUFBQTtBQTRqQkkscUJBQUs5QixPQUFMLENBQWFJLEtBQWIsNkVBQ2lDMEYsT0FEakMsZ0NBQ2lEbEQsS0FEakQ7O0FBNWpCSjtBQUFBLHVCQStqQjBCLEtBQUs3QyxLQUFMLENBQVdnRyxTQUFYLENBQXFCbkQsS0FBckIsQ0EvakIxQjs7QUFBQTtBQStqQlV5QyxnQkFBQUEsT0EvakJWO0FBZ2tCVVcsZ0JBQUFBLFVBaGtCVixHQWdrQnVCRixPQUFPLENBQUNHLFdBQVIsRUFoa0J2QjtBQUFBLHdEQWlrQnFCWixPQUFPLENBQUNhLGtCQWprQjdCO0FBQUE7O0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFpa0JlQyxnQkFBQUEsRUFqa0JmOztBQUFBLHNCQW1rQlEsQ0FBQ0EsRUFBRSxDQUFDQyxnQkFBSCxJQUF1QixFQUF4QixFQUE0QkgsV0FBNUIsT0FBOENELFVBQTlDLElBQ0FHLEVBQUUsQ0FBQ0UsWUFwa0JYO0FBQUE7QUFBQTtBQUFBOztBQUFBLG1EQXNrQmVGLEVBQUUsQ0FBQ0UsWUF0a0JsQjs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQTs7QUFBQTtBQUFBOztBQUFBOztBQUFBOztBQUFBO0FBQUEsc0JBeWtCVSxJQUFJdkUsS0FBSix3Q0FBMENnRSxPQUExQyxFQXprQlY7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUE0a0JFO0FBQ0Y7QUFDQTs7QUE5a0JBO0FBQUE7QUFBQTtBQUFBLDhHQWdsQklULE9BaGxCSixFQWlsQkk3RSxNQWpsQko7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSx1QkFtbEJpQyxTQUFROEUsR0FBUixDQUMzQixxQkFBQTlFLE1BQU0sTUFBTixDQUFBQSxNQUFNO0FBQUEsdUZBQUssa0JBQU84RixLQUFQO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSwrREFBaUIsTUFBSSxDQUFDQyxvQkFBTCxDQUEwQmxCLE9BQTFCLEVBQW1DaUIsS0FBbkMsQ0FBakI7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsbUJBQUw7O0FBQUE7QUFBQTtBQUFBO0FBQUEsb0JBRHFCLENBbmxCakM7O0FBQUE7QUFtbEJVRSxnQkFBQUEsY0FubEJWO0FBQUEsbURBc2xCVyx3QkFBQUEsY0FBYyxNQUFkLENBQUFBLGNBQWMsRUFDbkIsVUFBQ0MsS0FBRCxFQUFrQkMsSUFBbEI7QUFBQTs7QUFBQSxzR0FBbURELEtBQW5ELHNCQUE2REMsSUFBN0Q7QUFBQSxpQkFEbUIsRUFFbkIsRUFGbUIsQ0F0bEJ6Qjs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQTRsQkU7QUFDRjtBQUNBOztBQTlsQkE7QUFBQTtBQUFBO0FBQUEsNkdBZ21CSXJCLE9BaG1CSixFQWltQklpQixLQWptQko7QUFBQTtBQUFBOztBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBbW1CSSxxQkFBS3RHLE9BQUwsQ0FBYUksS0FBYixrRUFBdUNrRyxLQUF2QyxnQ0FBcURqQixPQUFyRDs7QUFDTXNCLGdCQUFBQSxLQXBtQlYsR0FvbUJrQkwsS0FBSyxDQUFDdEUsS0FBTixDQUFZLEdBQVosQ0FwbUJsQjs7QUFBQSxzQkFxbUJRMkUsS0FBSyxDQUFDQSxLQUFLLENBQUNoQyxNQUFOLEdBQWUsQ0FBaEIsQ0FBTCxLQUE0QixHQXJtQnBDO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUEsdUJBc21CdUIsS0FBSzVFLEtBQUwsQ0FBV2dHLFNBQVgsQ0FBcUJWLE9BQXJCLENBdG1CdkI7O0FBQUE7QUFzbUJZdUIsZ0JBQUFBLEVBdG1CWjs7QUF1bUJNLHFCQUFLNUcsT0FBTCxDQUFhSSxLQUFiLGlCQUE0QmlGLE9BQTVCOztBQXZtQk4sc0JBd21CVXNCLEtBQUssQ0FBQ2hDLE1BQU4sR0FBZSxDQXhtQnpCO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUF5bUJja0MsMEJBQUFBLEtBem1CZCxHQXltQnNCRixLQUFLLENBQUNHLEtBQU4sRUF6bUJ0QjtBQUFBLGtFQTBtQndCRixFQUFFLENBQUNwRyxNQTFtQjNCO0FBQUE7O0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUEwbUJtQjBCLDBCQUFBQSxDQTFtQm5COztBQUFBLGdDQTRtQllBLENBQUMsQ0FBQ2tFLGdCQUFGLElBQ0FTLEtBREEsSUFFQTNFLENBQUMsQ0FBQ2tFLGdCQUFGLENBQW1CSCxXQUFuQixPQUFxQ1ksS0FBSyxDQUFDWixXQUFOLEVBOW1CakQ7QUFBQTtBQUFBO0FBQUE7O0FBZ25Ca0JjLDBCQUFBQSxNQWhuQmxCLEdBZ25CMkI3RSxDQWhuQjNCO0FBaW5Ca0I4RSwwQkFBQUEsV0FqbkJsQixHQWluQmdDRCxNQUFNLENBQUNDLFdBQVAsSUFBc0IsRUFqbkJ0RDtBQWtuQmtCQywwQkFBQUEsTUFsbkJsQixHQWtuQjJCRCxXQUFXLENBQUNyQyxNQUFaLEtBQXVCLENBQXZCLEdBQTJCcUMsV0FBVyxDQUFDLENBQUQsQ0FBdEMsR0FBNEMsTUFsbkJ2RTtBQUFBO0FBQUEsaUNBbW5CaUMsTUFBSSxDQUFDVCxvQkFBTCxDQUNuQlUsTUFEbUIsRUFFbkJOLEtBQUssQ0FBQzlDLElBQU4sQ0FBVyxHQUFYLENBRm1CLENBbm5CakM7O0FBQUE7QUFtbkJrQnFELDBCQUFBQSxNQW5uQmxCO0FBQUE7QUFBQSwrQkF1bkJtQixxQkFBQUEsTUFBTSxNQUFOLENBQUFBLE1BQU0sRUFBSyxVQUFDQyxFQUFEO0FBQUE7O0FBQUEsb0ZBQVdOLEtBQVgseUJBQW9CTSxFQUFwQjtBQUFBLDZCQUFMO0FBdm5CekI7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7O0FBQUE7QUFBQTs7QUFBQTs7QUFBQTs7QUFBQTtBQUFBO0FBQUEsK0JBMG5CZTtBQTFuQmY7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTs7QUFBQTtBQUFBLG1EQTRuQmEsa0NBQUFQLEVBQUUsQ0FBQ3BHLE1BQUgsbUJBQWMsVUFBQzBCLENBQUQ7QUFBQSx5QkFBT0EsQ0FBQyxDQUFDa0YsSUFBVDtBQUFBLGlCQUFkLENBNW5CYjs7QUFBQTtBQUFBLG1EQThuQlcsQ0FBQ2QsS0FBRCxDQTluQlg7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFpb0JFO0FBQ0Y7QUFDQTs7QUFub0JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsdUJBcW9CdUIsS0FBS2pDLE1BQUwsRUFyb0J2Qjs7QUFBQTtBQXFvQlVDLGdCQUFBQSxJQXJvQlY7O0FBc29CSSxxQkFBS3RFLE9BQUwsQ0FBYUksS0FBYixrQkFBNkJrRSxJQUE3Qjs7QUFDTVIsZ0JBQUFBLEdBdm9CViw2QkF1b0JtQ1Msa0JBQWtCLENBQUNELElBQUQsQ0F2b0JyRDtBQUFBLG1EQXdvQlcsS0FBS3ZFLEtBQUwsQ0FBV3lFLE9BQVgsQ0FBdUNWLEdBQXZDLENBeG9CWDs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQTJvQkU7QUFDRjtBQUNBOztBQTdvQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHFCQStvQlEsS0FBSzNELEtBL29CYjtBQUFBO0FBQUE7QUFBQTs7QUFBQSxtREFncEJhLEtBQUtBLEtBaHBCbEI7O0FBQUE7QUFBQTtBQUFBLHVCQWtwQlUsS0FBS3FGLGFBQUwsRUFscEJWOztBQUFBO0FBQUEsbURBbXBCV3RHLFVBQVUsQ0FBQyxLQUFLeUIsT0FBTixDQW5wQnJCOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBc3BCRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBM3BCQTtBQUFBO0FBQUEseUJBNnBCSTBHLFNBN3BCSixFQWlxQklDLFFBanFCSixFQWtxQm9CO0FBQ2hCLFdBQUsvRCxTQUFMLEdBQWlCLElBQWpCOztBQUNBLFVBQUksQ0FBQyxLQUFLSCxTQUFOLElBQW1CLENBQUMsS0FBS0QsU0FBN0IsRUFBd0M7QUFDdEMsYUFBS3RELE9BQUw7QUFDRDs7QUFDRCxVQUFJLENBQUMsS0FBS3VCLFFBQVYsRUFBb0I7QUFDbEIsY0FBTSxJQUFJVSxLQUFKLENBQ0oseURBREksQ0FBTjtBQUdEOztBQUNELGFBQU8sS0FBS1YsUUFBTCxDQUFjbUcsSUFBZCxDQUFtQkYsU0FBbkIsRUFBOEJDLFFBQTlCLENBQVA7QUFDRDtBQTdxQkg7QUFBQTtBQUFBLDJCQWdyQklBLFFBaHJCSixFQW1yQm9DO0FBQ2hDLGFBQU8sS0FBS0MsSUFBTCxDQUFVLElBQVYsRUFBZ0JELFFBQWhCLENBQVA7QUFDRDtBQXJyQkg7QUFBQTtBQUFBLDhCQXVyQjRDO0FBQ3hDLGFBQU8sU0FBUWpHLE9BQVIsQ0FBZ0IsSUFBaEIsQ0FBUDtBQUNEO0FBRUQ7QUFDRjtBQUNBOztBQTdyQkE7QUFBQTtBQUFBLDRCQWdzQlU0RCxJQWhzQlYsRUFnc0IwQ3RGLE9BaHNCMUMsRUFnc0J5RTtBQUFBOztBQUNyRSxVQUFJLFFBQU9zRixJQUFQLE1BQWdCLFFBQWhCLElBQTRCQSxJQUFJLEtBQUssSUFBekMsRUFBK0M7QUFDN0N0RixRQUFBQSxPQUFPLEdBQUdzRixJQUFWO0FBQ0FBLFFBQUFBLElBQUksR0FBR3RDLFNBQVA7QUFDRDs7QUFDRGhELE1BQUFBLE9BQU8sR0FBR0EsT0FBTyxJQUFJLEVBQXJCO0FBQ0EsVUFBTTZILEtBQWtCLEdBQUd2QyxJQUFJLElBQUssS0FBS3RFLE9BQUwsQ0FBYWlDLEtBQWpEOztBQUNBLFVBQUksQ0FBQzRFLEtBQUwsRUFBWTtBQUNWLGNBQU0sSUFBSTFGLEtBQUosQ0FDSixpRUFESSxDQUFOO0FBR0QsT0FYb0UsQ0FZckU7OztBQUNBLFVBQU0yRixZQUFZLEdBQ2hCOUgsT0FBTyxDQUFDK0gsU0FBUixLQUFzQixLQUF0QixHQUNJLENBQUMsQ0FETCxHQUVJLE9BQU8vSCxPQUFPLENBQUNnSSxhQUFmLEtBQWlDLFFBQWpDLEdBQ0FoSSxPQUFPLENBQUNnSSxhQURSLEdBRUE7QUFDRixXQUFLNUgsS0FBTCxDQUFXNkgsY0FBWCxDQUEwQixFQUExQixJQUNFckksc0JBREYsR0FFRSxLQUFLUSxLQUFMLENBQVc4SCxXQUFYLEdBQXlCLENBUi9CO0FBU0EsYUFBTyxhQUFZLFVBQUN4RyxPQUFELEVBQVVDLE1BQVYsRUFBcUI7QUFDdEMsWUFBTXdHLFdBQVcsR0FBRyxTQUFkQSxXQUFjO0FBQUEsaUJBQ2xCLE1BQUksQ0FBQy9ILEtBQUwsQ0FDR3NGLE9BREgsQ0FDV21DLEtBRFgsRUFFR08sVUFGSCxHQUdHeEcsRUFISCxDQUdNLFVBSE4sRUFHa0JGLE9BSGxCLEVBSUdFLEVBSkgsQ0FJTSxPQUpOLEVBSWVELE1BSmYsQ0FEa0I7QUFBQSxTQUFwQjs7QUFNQSxZQUFJa0MsT0FBaUIsR0FBRyxFQUF4QjtBQUNBLFlBQUl3RSxLQUE0QyxHQUFHLElBQW5EOztBQUNBLFlBQU1DLFlBQVksR0FBRyxTQUFmQSxZQUFlLENBQUNDLEdBQUQsRUFBaUI7QUFDcEMsY0FBSSxDQUFDQSxHQUFHLENBQUNDLEVBQVQsRUFBYTtBQUNYLGdCQUFNeEcsSUFBRyxHQUFHLElBQUlHLEtBQUosQ0FDVix1REFEVSxDQUFaOztBQUdBLFlBQUEsTUFBSSxDQUFDRixJQUFMLENBQVUsT0FBVixFQUFtQkQsSUFBbkI7O0FBQ0E7QUFDRDs7QUFDRCxjQUFNRixNQUFjLEdBQUc7QUFBRTBHLFlBQUFBLEVBQUUsRUFBRUQsR0FBRyxDQUFDQztBQUFWLFdBQXZCOztBQUNBLGNBQUlILEtBQUosRUFBVztBQUNUQSxZQUFBQSxLQUFLLENBQUNJLEtBQU4sQ0FBWTNHLE1BQVo7QUFDRCxXQUZELE1BRU87QUFDTCtCLFlBQUFBLE9BQU8sQ0FBQzlCLElBQVIsQ0FBYUQsTUFBYjs7QUFDQSxnQkFBSWdHLFlBQVksSUFBSSxDQUFoQixJQUFxQmpFLE9BQU8sQ0FBQ21CLE1BQVIsR0FBaUI4QyxZQUExQyxFQUF3RDtBQUN0RDtBQUNBTyxjQUFBQSxLQUFLLEdBQUdGLFdBQVcsRUFBbkI7O0FBRnNELDBEQUdqQ3RFLE9BSGlDO0FBQUE7O0FBQUE7QUFHdEQsdUVBQThCO0FBQUEsc0JBQW5CL0IsT0FBbUI7QUFDNUJ1RyxrQkFBQUEsS0FBSyxDQUFDSSxLQUFOLENBQVkzRyxPQUFaO0FBQ0Q7QUFMcUQ7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFNdEQrQixjQUFBQSxPQUFPLEdBQUcsRUFBVjtBQUNEO0FBQ0Y7QUFDRixTQXRCRDs7QUF1QkEsWUFBTTZFLFNBQVMsR0FBRyxTQUFaQSxTQUFZLEdBQU07QUFDdEIsY0FBSUwsS0FBSixFQUFXO0FBQ1RBLFlBQUFBLEtBQUssQ0FBQ00sR0FBTjtBQUNELFdBRkQsTUFFTztBQUNMLGdCQUFNQyxHQUFHLEdBQUcscUJBQUEvRSxPQUFPLE1BQVAsQ0FBQUEsT0FBTyxFQUFLLFVBQUMvQixNQUFEO0FBQUEscUJBQVlBLE1BQU0sQ0FBQzBHLEVBQW5CO0FBQUEsYUFBTCxDQUFuQjs7QUFDQSxZQUFBLE1BQUksQ0FBQ3BJLEtBQUwsQ0FDR3NGLE9BREgsQ0FDV21DLEtBRFgsRUFFRzFILE9BRkgsQ0FFV3lJLEdBRlgsRUFFZ0I7QUFBRUMsY0FBQUEsY0FBYyxFQUFFO0FBQWxCLGFBRmhCLEVBR0dqQixJQUhILENBR1FsRyxPQUhSLEVBR2lCQyxNQUhqQjtBQUlEO0FBQ0YsU0FWRDs7QUFXQSxRQUFBLE1BQUksQ0FBQzRELE1BQUwsQ0FBWSxRQUFaLEVBQ0czRCxFQURILENBQ00sTUFETixFQUNjMEcsWUFEZCxFQUVHMUcsRUFGSCxDQUVNLEtBRk4sRUFFYThHLFNBRmIsRUFHRzlHLEVBSEgsQ0FHTSxPQUhOLEVBR2VELE1BSGY7QUFJRCxPQS9DTSxDQUFQO0FBZ0REO0FBRUQ7QUFDRjtBQUNBOztBQTF3QkE7QUFBQTtBQUFBLDJCQSt4QkltSCxPQS94QkosRUFneUJJeEQsSUFoeUJKLEVBaXlCSXRGLE9BanlCSixFQWt5Qkk7QUFBQTs7QUFDQSxVQUFJLFFBQU9zRixJQUFQLE1BQWdCLFFBQWhCLElBQTRCQSxJQUFJLEtBQUssSUFBekMsRUFBK0M7QUFDN0N0RixRQUFBQSxPQUFPLEdBQUdzRixJQUFWO0FBQ0FBLFFBQUFBLElBQUksR0FBR3RDLFNBQVA7QUFDRDs7QUFDRGhELE1BQUFBLE9BQU8sR0FBR0EsT0FBTyxJQUFJLEVBQXJCO0FBQ0EsVUFBTTZILEtBQWtCLEdBQ3RCdkMsSUFBSSxJQUFLLEtBQUt0RSxPQUFMLElBQWlCLEtBQUtBLE9BQUwsQ0FBYWlDLEtBRHpDOztBQUVBLFVBQUksQ0FBQzRFLEtBQUwsRUFBWTtBQUNWLGNBQU0sSUFBSTFGLEtBQUosQ0FDSixpRUFESSxDQUFOO0FBR0Q7O0FBQ0QsVUFBTTRHLFlBQVksR0FDaEIsT0FBT0QsT0FBUCxLQUFtQixVQUFuQixHQUNJLHFCQUFBekosWUFBWSxNQUFaLENBQUFBLFlBQVksRUFBS3lKLE9BQUwsQ0FEaEIsR0FFSXpKLFlBQVksQ0FBQzJKLGVBQWIsQ0FBNkJGLE9BQTdCLENBSE4sQ0FiQSxDQWlCQTs7QUFDQSxVQUFNaEIsWUFBWSxHQUNoQjlILE9BQU8sQ0FBQytILFNBQVIsS0FBc0IsS0FBdEIsR0FDSSxDQUFDLENBREwsR0FFSSxPQUFPL0gsT0FBTyxDQUFDZ0ksYUFBZixLQUFpQyxRQUFqQyxHQUNBaEksT0FBTyxDQUFDZ0ksYUFEUixHQUVBO0FBQ0YsV0FBSzVILEtBQUwsQ0FBVzZILGNBQVgsQ0FBMEIsRUFBMUIsSUFDRXJJLHNCQURGLEdBRUUsS0FBS1EsS0FBTCxDQUFXOEgsV0FBWCxHQUF5QixDQVIvQjtBQVNBLGFBQU8sYUFBWSxVQUFDeEcsT0FBRCxFQUFVQyxNQUFWLEVBQXFCO0FBQ3RDLFlBQU13RyxXQUFXLEdBQUcsU0FBZEEsV0FBYztBQUFBLGlCQUNsQixNQUFJLENBQUMvSCxLQUFMLENBQ0dzRixPQURILENBQ1dtQyxLQURYLEVBRUdvQixVQUZILEdBR0dySCxFQUhILENBR00sVUFITixFQUdrQkYsT0FIbEIsRUFJR0UsRUFKSCxDQUlNLE9BSk4sRUFJZUQsTUFKZixDQURrQjtBQUFBLFNBQXBCOztBQU1BLFlBQUlrQyxPQUFvQyxHQUFHLEVBQTNDO0FBQ0EsWUFBSXdFLEtBQTRDLEdBQUcsSUFBbkQ7O0FBQ0EsWUFBTUMsWUFBWSxHQUFHLFNBQWZBLFlBQWUsQ0FBQ3hHLE1BQUQsRUFBb0I7QUFDdkMsY0FBSXVHLEtBQUosRUFBVztBQUNUQSxZQUFBQSxLQUFLLENBQUNJLEtBQU4sQ0FBWTNHLE1BQVo7QUFDRCxXQUZELE1BRU87QUFDTCtCLFlBQUFBLE9BQU8sQ0FBQzlCLElBQVIsQ0FBYUQsTUFBYjtBQUNEOztBQUNELGNBQUlnRyxZQUFZLElBQUksQ0FBaEIsSUFBcUJqRSxPQUFPLENBQUNtQixNQUFSLEdBQWlCOEMsWUFBMUMsRUFBd0Q7QUFDdEQ7QUFDQU8sWUFBQUEsS0FBSyxHQUFHRixXQUFXLEVBQW5COztBQUZzRCx3REFHakN0RSxPQUhpQztBQUFBOztBQUFBO0FBR3RELHFFQUE4QjtBQUFBLG9CQUFuQi9CLFFBQW1CO0FBQzVCdUcsZ0JBQUFBLEtBQUssQ0FBQ0ksS0FBTixDQUFZM0csUUFBWjtBQUNEO0FBTHFEO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBTXREK0IsWUFBQUEsT0FBTyxHQUFHLEVBQVY7QUFDRDtBQUNGLFNBZEQ7O0FBZUEsWUFBTTZFLFNBQVMsR0FBRyxTQUFaQSxTQUFZLEdBQU07QUFDdEIsY0FBSUwsS0FBSixFQUFXO0FBQ1RBLFlBQUFBLEtBQUssQ0FBQ00sR0FBTjtBQUNELFdBRkQsTUFFTztBQUNMLFlBQUEsTUFBSSxDQUFDdkksS0FBTCxDQUNHc0YsT0FESCxDQUNXbUMsS0FEWCxFQUVHcUIsTUFGSCxDQUVVckYsT0FGVixFQUVtQjtBQUFFZ0YsY0FBQUEsY0FBYyxFQUFFO0FBQWxCLGFBRm5CLEVBR0dqQixJQUhILENBR1FsRyxPQUhSLEVBR2lCQyxNQUhqQjtBQUlEO0FBQ0YsU0FURDs7QUFVQSxRQUFBLE1BQUksQ0FBQzRELE1BQUwsQ0FBWSxRQUFaLEVBQ0czRCxFQURILENBQ00sT0FETixFQUNlRCxNQURmLEVBRUc2RCxJQUZILENBRVF1RCxZQUZSLEVBR0duSCxFQUhILENBR00sTUFITixFQUdjMEcsWUFIZCxFQUlHMUcsRUFKSCxDQUlNLEtBSk4sRUFJYThHLFNBSmIsRUFLRzlHLEVBTEgsQ0FLTSxPQUxOLEVBS2VELE1BTGY7QUFNRCxPQXhDTSxDQUFQO0FBeUNEO0FBdDJCSDs7QUFBQTtBQUFBLEVBS1V4QyxZQUxWO0FBeTJCQTs7QUFFQTtBQUNBO0FBQ0E7O2dCQTcyQmFVLEssYUFNTVQsU0FBUyxDQUFDLE9BQUQsQzs7QUF3MkI1QixXQUFhK0QsUUFBYjtBQWFFO0FBQ0Y7QUFDQTtBQUNFLG9CQUNFckQsSUFERixFQUVFcUcsT0FGRixFQUdFcEcsTUFIRixFQUlFb0osTUFKRixFQUtFO0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUEsb0NBd0RPLEtBQUtsSixJQXhEWjs7QUFBQSwyREE0RXdDLElBNUV4Qzs7QUFDQSxTQUFLbUosUUFBTCxHQUFnQmpELE9BQWhCO0FBQ0EsU0FBS0YsTUFBTCxHQUFjLElBQUlwRyxLQUFKLENBQVVDLElBQVYsRUFBZ0JDLE1BQWhCLENBQWQ7QUFDQSxTQUFLc0osT0FBTCxHQUFlRixNQUFmO0FBQ0Q7QUFFRDtBQUNGO0FBQ0E7OztBQTdCQTtBQUFBO0FBQUEsMkJBbUNJdEksTUFuQ0osRUFvQ3NFO0FBQ2xFO0FBQ0EsV0FBS29GLE1BQUwsR0FBYyxLQUFLQSxNQUFMLENBQVloRixNQUFaLENBQW1CSixNQUFuQixDQUFkO0FBQ0EsYUFBUSxJQUFSO0FBU0Q7QUFFRDtBQUNGO0FBQ0E7O0FBcERBO0FBQUE7QUFBQSwwQkFxRFE2QixVQXJEUixFQXFEMEQ7QUFDdEQsV0FBS3VELE1BQUwsR0FBYyxLQUFLQSxNQUFMLENBQVlxRCxLQUFaLENBQWtCNUcsVUFBbEIsQ0FBZDtBQUNBLGFBQU8sSUFBUDtBQUNEO0FBRUQ7QUFDRjtBQUNBOztBQTVEQTtBQUFBO0FBQUEsMEJBNkRRQyxPQTdEUixFQTZEdUI7QUFDbkIsV0FBS3NELE1BQUwsR0FBYyxLQUFLQSxNQUFMLENBQVl0RCxLQUFaLENBQWtCQSxPQUFsQixDQUFkO0FBQ0EsYUFBTyxJQUFQO0FBQ0Q7QUFFRDtBQUNGO0FBQ0E7O0FBcEVBO0FBQUE7QUFBQSx5QkFxRU9DLE1BckVQLEVBcUV1QjtBQUNuQixXQUFLcUQsTUFBTCxHQUFjLEtBQUtBLE1BQUwsQ0FBWWhHLElBQVosQ0FBaUIyQyxNQUFqQixDQUFkO0FBQ0EsYUFBTyxJQUFQO0FBQ0Q7QUFFRDtBQUNGO0FBQ0E7O0FBNUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQSxnQkF1Rkk3QixJQXZGSixFQXdGSThCLEdBeEZKLEVBeUZJO0FBQUE7O0FBQ0EsV0FBS29ELE1BQUwsR0FBYyx3Q0FBS0EsTUFBTCxtQkFBaUJsRixJQUFqQixFQUE4QjhCLEdBQTlCLENBQWQ7QUFDQSxhQUFPLElBQVA7QUFDRCxLQTVGSDtBQThGRTtBQUNGO0FBQ0E7O0FBaEdBO0FBQUE7O0FBbUdFO0FBQ0Y7QUFDQTtBQXJHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsdUJBdUcwQixLQUFLd0csT0FBTCxDQUFhRSxtQkFBYixDQUFpQyxLQUFLSCxRQUF0QyxDQXZHMUI7O0FBQUE7QUF1R1UxRCxnQkFBQUEsT0F2R1Y7QUFBQSxtREF3R1csS0FBS08sTUFBTCxDQUFZSixhQUFaLENBQTBCSCxPQUExQixDQXhHWDs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQTJHRTtBQUNGO0FBQ0E7O0FBN0dBO0FBQUE7QUFBQSwwQkFvSCtCO0FBQzNCLGFBQVEsS0FBSzJELE9BQWI7QUFDRDtBQXRISDs7QUFBQTtBQUFBO0FBeUhBLGVBQWV4SixLQUFmIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZSBNYW5hZ2VzIHF1ZXJ5IGZvciByZWNvcmRzIGluIFNhbGVzZm9yY2VcbiAqIEBhdXRob3IgU2hpbmljaGkgVG9taXRhIDxzaGluaWNoaS50b21pdGFAZ21haWwuY29tPlxuICovXG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdldmVudHMnO1xuaW1wb3J0IHsgTG9nZ2VyLCBnZXRMb2dnZXIgfSBmcm9tICcuL3V0aWwvbG9nZ2VyJztcbmltcG9ydCBSZWNvcmRTdHJlYW0sIHsgU2VyaWFsaXphYmxlIH0gZnJvbSAnLi9yZWNvcmQtc3RyZWFtJztcbmltcG9ydCBDb25uZWN0aW9uIGZyb20gJy4vY29ubmVjdGlvbic7XG5pbXBvcnQgeyBjcmVhdGVTT1FMIH0gZnJvbSAnLi9zb3FsLWJ1aWxkZXInO1xuaW1wb3J0IHsgUXVlcnlDb25maWcgYXMgU09RTFF1ZXJ5Q29uZmlnLCBTb3J0RGlyIH0gZnJvbSAnLi9zb3FsLWJ1aWxkZXInO1xuaW1wb3J0IHtcbiAgUmVjb3JkLFxuICBPcHRpb25hbCxcbiAgU2NoZW1hLFxuICBTT2JqZWN0TmFtZXMsXG4gIENoaWxkUmVsYXRpb25zaGlwTmFtZXMsXG4gIENoaWxkUmVsYXRpb25zaGlwU09iamVjdE5hbWUsXG4gIEZpZWxkUHJvamVjdGlvbkNvbmZpZyxcbiAgRmllbGRQYXRoU3BlY2lmaWVyLFxuICBGaWVsZFBhdGhTY29wZWRQcm9qZWN0aW9uLFxuICBTT2JqZWN0UmVjb3JkLFxuICBTT2JqZWN0SW5wdXRSZWNvcmQsXG4gIFNPYmplY3RVcGRhdGVSZWNvcmQsXG4gIFNhdmVSZXN1bHQsXG4gIERhdGVTdHJpbmcsXG4gIFNPYmplY3RDaGlsZFJlbGF0aW9uc2hpcFByb3AsXG4gIFNPYmplY3RGaWVsZE5hbWVzLFxufSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IFJlYWRhYmxlIH0gZnJvbSAnc3RyZWFtJztcbmltcG9ydCBTZkRhdGUgZnJvbSAnLi9kYXRlJztcblxuLyoqXG4gKlxuICovXG5leHBvcnQgdHlwZSBRdWVyeUZpZWxkPFxuICBTIGV4dGVuZHMgU2NoZW1hLFxuICBOIGV4dGVuZHMgU09iamVjdE5hbWVzPFM+LFxuICBGUCBleHRlbmRzIEZpZWxkUGF0aFNwZWNpZmllcjxTLCBOPiA9IEZpZWxkUGF0aFNwZWNpZmllcjxTLCBOPlxuPiA9IEZQIHwgRlBbXSB8IHN0cmluZyB8IHN0cmluZ1tdIHwgeyBbZmllbGQ6IHN0cmluZ106IG51bWJlciB8IGJvb2xlYW4gfTtcblxuLyoqXG4gKlxuICovXG50eXBlIENWYWx1ZTxUPiA9IFQgZXh0ZW5kcyBEYXRlU3RyaW5nXG4gID8gU2ZEYXRlXG4gIDogVCBleHRlbmRzIHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW5cbiAgPyBUXG4gIDogbmV2ZXI7XG5cbnR5cGUgQ29uZE9wPFQ+ID1cbiAgfCBbJyRlcScsIENWYWx1ZTxUPiB8IG51bGxdXG4gIHwgWyckbmUnLCBDVmFsdWU8VD4gfCBudWxsXVxuICB8IFsnJGd0JywgQ1ZhbHVlPFQ+XVxuICB8IFsnJGd0ZScsIENWYWx1ZTxUPl1cbiAgfCBbJyRsdCcsIENWYWx1ZTxUPl1cbiAgfCBbJyRsdGUnLCBDVmFsdWU8VD5dXG4gIHwgWyckbGlrZScsIFQgZXh0ZW5kcyBzdHJpbmcgPyBUIDogbmV2ZXJdXG4gIHwgWyckbmxpa2UnLCBUIGV4dGVuZHMgc3RyaW5nID8gVCA6IG5ldmVyXVxuICB8IFsnJGluJywgQXJyYXk8Q1ZhbHVlPFQ+Pl1cbiAgfCBbJyRuaW4nLCBBcnJheTxDVmFsdWU8VD4+XVxuICB8IFsnJGluY2x1ZGVzJywgVCBleHRlbmRzIHN0cmluZyA/IFRbXSA6IG5ldmVyXVxuICB8IFsnJGV4Y2x1ZGVzJywgVCBleHRlbmRzIHN0cmluZyA/IFRbXSA6IG5ldmVyXVxuICB8IFsnJGV4aXN0cycsIGJvb2xlYW5dO1xuXG50eXBlIENvbmRWYWx1ZU9iajxULCBPcCA9IENvbmRPcDxUPlswXT4gPSBPcCBleHRlbmRzIENvbmRPcDxUPlswXVxuICA/IE9wIGV4dGVuZHMgc3RyaW5nXG4gICAgPyB7IFtLIGluIE9wXTogRXh0cmFjdDxDb25kT3A8VD4sIFtPcCwgYW55XT5bMV0gfVxuICAgIDogbmV2ZXJcbiAgOiBuZXZlcjtcblxudHlwZSBDb25kVmFsdWU8VD4gPSBDVmFsdWU8VD4gfCBBcnJheTxDVmFsdWU8VD4+IHwgbnVsbCB8IENvbmRWYWx1ZU9iajxUPjtcblxudHlwZSBDb25kaXRpb25TZXQ8UiBleHRlbmRzIFJlY29yZD4gPSB7XG4gIFtLIGluIGtleW9mIFJdPzogQ29uZFZhbHVlPFJbS10+O1xufTtcblxuZXhwb3J0IHR5cGUgUXVlcnlDb25kaXRpb248UyBleHRlbmRzIFNjaGVtYSwgTiBleHRlbmRzIFNPYmplY3ROYW1lczxTPj4gPVxuICB8IHtcbiAgICAgICRvcjogUXVlcnlDb25kaXRpb248UywgTj5bXTtcbiAgICB9XG4gIHwge1xuICAgICAgJGFuZDogUXVlcnlDb25kaXRpb248UywgTj5bXTtcbiAgICB9XG4gIHwgQ29uZGl0aW9uU2V0PFNPYmplY3RSZWNvcmQ8UywgTj4+O1xuXG5leHBvcnQgdHlwZSBRdWVyeVNvcnQ8XG4gIFMgZXh0ZW5kcyBTY2hlbWEsXG4gIE4gZXh0ZW5kcyBTT2JqZWN0TmFtZXM8Uz4sXG4gIFIgZXh0ZW5kcyBTT2JqZWN0UmVjb3JkPFMsIE4+ID0gU09iamVjdFJlY29yZDxTLCBOPlxuPiA9XG4gIHwge1xuICAgICAgW0sgaW4ga2V5b2YgUl0/OiBTb3J0RGlyO1xuICAgIH1cbiAgfCBBcnJheTxba2V5b2YgUiwgU29ydERpcl0+O1xuXG4vKipcbiAqXG4gKi9cbmV4cG9ydCB0eXBlIFF1ZXJ5Q29uZmlnPFxuICBTIGV4dGVuZHMgU2NoZW1hLFxuICBOIGV4dGVuZHMgU09iamVjdE5hbWVzPFM+LFxuICBGUCBleHRlbmRzIEZpZWxkUGF0aFNwZWNpZmllcjxTLCBOPiA9IEZpZWxkUGF0aFNwZWNpZmllcjxTLCBOPlxuPiA9IHtcbiAgZmllbGRzPzogUXVlcnlGaWVsZDxTLCBOLCBGUD47XG4gIGluY2x1ZGVzPzoge1xuICAgIFtDUk4gaW4gQ2hpbGRSZWxhdGlvbnNoaXBOYW1lczxTLCBOPl0/OiBRdWVyeUNvbmZpZzxcbiAgICAgIFMsXG4gICAgICBDaGlsZFJlbGF0aW9uc2hpcFNPYmplY3ROYW1lPFMsIE4sIENSTj5cbiAgICA+O1xuICB9O1xuICB0YWJsZT86IHN0cmluZztcbiAgY29uZGl0aW9ucz86IFF1ZXJ5Q29uZGl0aW9uPFMsIE4+O1xuICBzb3J0PzogUXVlcnlTb3J0PFMsIE4+O1xuICBsaW1pdD86IG51bWJlcjtcbiAgb2Zmc2V0PzogbnVtYmVyO1xufTtcblxuZXhwb3J0IHR5cGUgUXVlcnlPcHRpb25zID0ge1xuICBoZWFkZXJzOiB7IFtuYW1lOiBzdHJpbmddOiBzdHJpbmcgfTtcbiAgbWF4RmV0Y2g6IG51bWJlcjtcbiAgYXV0b0ZldGNoOiBib29sZWFuO1xuICBzY2FuQWxsOiBib29sZWFuO1xuICByZXNwb25zZVRhcmdldDogUXVlcnlSZXNwb25zZVRhcmdldDtcbn07XG5cbmV4cG9ydCB0eXBlIFF1ZXJ5UmVzdWx0PFIgZXh0ZW5kcyBSZWNvcmQ+ID0ge1xuICBkb25lOiBib29sZWFuO1xuICB0b3RhbFNpemU6IG51bWJlcjtcbiAgcmVjb3JkczogUltdO1xuICBuZXh0UmVjb3Jkc1VybD86IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIFF1ZXJ5RXhwbGFpblJlc3VsdCA9IHtcbiAgcGxhbnM6IEFycmF5PHtcbiAgICBjYXJkaW5hbGl0eTogbnVtYmVyO1xuICAgIGZpZWxkczogc3RyaW5nW107XG4gICAgbGVhZGluZ09wZXJhdGlvblR5cGU6ICdJbmRleCcgfCAnT3RoZXInIHwgJ1NoYXJpbmcnIHwgJ1RhYmxlU2Nhbic7XG4gICAgbm90ZXM6IEFycmF5PHtcbiAgICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gICAgICBmaWVsZHM6IHN0cmluZ1tdO1xuICAgICAgdGFibGVFbnVtT3JJZDogc3RyaW5nO1xuICAgIH0+O1xuICAgIHJlbGF0aXZlQ29zdDogbnVtYmVyO1xuICAgIHNvYmplY3RDYXJkaW5hbGl0eTogbnVtYmVyO1xuICAgIHNvYmplY3RUeXBlOiBzdHJpbmc7XG4gIH0+O1xufTtcblxuY29uc3QgUmVzcG9uc2VUYXJnZXRWYWx1ZXMgPSBbXG4gICdRdWVyeVJlc3VsdCcsXG4gICdSZWNvcmRzJyxcbiAgJ1NpbmdsZVJlY29yZCcsXG4gICdDb3VudCcsXG5dIGFzIGNvbnN0O1xuXG5leHBvcnQgdHlwZSBRdWVyeVJlc3BvbnNlVGFyZ2V0ID0gdHlwZW9mIFJlc3BvbnNlVGFyZ2V0VmFsdWVzW251bWJlcl07XG5cbmV4cG9ydCBjb25zdCBSZXNwb25zZVRhcmdldHM6IHtcbiAgW0sgaW4gUXVlcnlSZXNwb25zZVRhcmdldF06IEs7XG59ID0gUmVzcG9uc2VUYXJnZXRWYWx1ZXMucmVkdWNlKFxuICAodmFsdWVzLCB0YXJnZXQpID0+ICh7IC4uLnZhbHVlcywgW3RhcmdldF06IHRhcmdldCB9KSxcbiAge30gYXMge1xuICAgIFtLIGluIFF1ZXJ5UmVzcG9uc2VUYXJnZXRdOiBLO1xuICB9LFxuKTtcblxuZXhwb3J0IHR5cGUgUXVlcnlSZXNwb25zZTxcbiAgUiBleHRlbmRzIFJlY29yZCxcbiAgUVJUIGV4dGVuZHMgUXVlcnlSZXNwb25zZVRhcmdldCA9IFF1ZXJ5UmVzcG9uc2VUYXJnZXRcbj4gPSBRUlQgZXh0ZW5kcyAnUXVlcnlSZXN1bHQnXG4gID8gUXVlcnlSZXN1bHQ8Uj5cbiAgOiBRUlQgZXh0ZW5kcyAnUmVjb3JkcydcbiAgPyBSW11cbiAgOiBRUlQgZXh0ZW5kcyAnU2luZ2xlUmVjb3JkJ1xuICA/IFIgfCBudWxsXG4gIDogbnVtYmVyOyAvLyBRUlQgZXh0ZW5kcyAnQ291bnQnXG5cbmV4cG9ydCB0eXBlIFF1ZXJ5RGVzdHJveU9wdGlvbnMgPSB7XG4gIGFsbG93QnVsaz86IGJvb2xlYW47XG4gIGJ1bGtUaHJlc2hvbGQ/OiBudW1iZXI7XG59O1xuXG5leHBvcnQgdHlwZSBRdWVyeVVwZGF0ZU9wdGlvbnMgPSB7XG4gIGFsbG93QnVsaz86IGJvb2xlYW47XG4gIGJ1bGtUaHJlc2hvbGQ/OiBudW1iZXI7XG59O1xuXG4vKipcbiAqXG4gKi9cbmNvbnN0IERFRkFVTFRfQlVMS19USFJFU0hPTEQgPSAyMDA7XG5cbi8qKlxuICogUXVlcnlcbiAqL1xuZXhwb3J0IGNsYXNzIFF1ZXJ5PFxuICBTIGV4dGVuZHMgU2NoZW1hLFxuICBOIGV4dGVuZHMgU09iamVjdE5hbWVzPFM+LFxuICBSIGV4dGVuZHMgUmVjb3JkID0gUmVjb3JkLFxuICBRUlQgZXh0ZW5kcyBRdWVyeVJlc3BvbnNlVGFyZ2V0ID0gUXVlcnlSZXNwb25zZVRhcmdldFxuPiBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIHN0YXRpYyBfbG9nZ2VyID0gZ2V0TG9nZ2VyKCdxdWVyeScpO1xuXG4gIF9jb25uOiBDb25uZWN0aW9uPFM+O1xuICBfbG9nZ2VyOiBMb2dnZXI7XG4gIF9zb3FsOiBPcHRpb25hbDxzdHJpbmc+O1xuICBfbG9jYXRvcjogT3B0aW9uYWw8c3RyaW5nPjtcbiAgX2NvbmZpZzogU09RTFF1ZXJ5Q29uZmlnID0ge307XG4gIF9jaGlsZHJlbjogU3ViUXVlcnk8UywgTiwgUiwgUVJULCBhbnksIGFueSwgYW55PltdID0gW107XG4gIF9vcHRpb25zOiBRdWVyeU9wdGlvbnM7XG4gIF9leGVjdXRlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBfZmluaXNoZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgX2NoYWluaW5nOiBib29sZWFuID0gZmFsc2U7XG4gIF9wcm9taXNlOiBQcm9taXNlPFF1ZXJ5UmVzcG9uc2U8UiwgUVJUPj47XG4gIF9zdHJlYW06IFNlcmlhbGl6YWJsZTxSPjtcblxuICB0b3RhbFNpemUgPSAwO1xuICB0b3RhbEZldGNoZWQgPSAwO1xuICByZWNvcmRzOiBSW10gPSBbXTtcblxuICAvKipcbiAgICpcbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIGNvbm46IENvbm5lY3Rpb248Uz4sXG4gICAgY29uZmlnOiBzdHJpbmcgfCBRdWVyeUNvbmZpZzxTLCBOPiB8IHsgbG9jYXRvcjogc3RyaW5nIH0sXG4gICAgb3B0aW9ucz86IFBhcnRpYWw8UXVlcnlPcHRpb25zPixcbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9jb25uID0gY29ubjtcbiAgICB0aGlzLl9sb2dnZXIgPSBjb25uLl9sb2dMZXZlbFxuICAgICAgPyBRdWVyeS5fbG9nZ2VyLmNyZWF0ZUluc3RhbmNlKGNvbm4uX2xvZ0xldmVsKVxuICAgICAgOiBRdWVyeS5fbG9nZ2VyO1xuICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykge1xuICAgICAgdGhpcy5fc29xbCA9IGNvbmZpZztcbiAgICAgIHRoaXMuX2xvZ2dlci5kZWJ1ZyhgY29uZmlnIGlzIHNvcWw6ICR7Y29uZmlnfWApO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIChjb25maWcgYXMgYW55KS5sb2NhdG9yID09PSAnc3RyaW5nJykge1xuICAgICAgY29uc3QgbG9jYXRvcjogc3RyaW5nID0gKGNvbmZpZyBhcyBhbnkpLmxvY2F0b3I7XG4gICAgICB0aGlzLl9sb2dnZXIuZGVidWcoYGNvbmZpZyBpcyBsb2NhdG9yOiAke2xvY2F0b3J9YCk7XG4gICAgICB0aGlzLl9sb2NhdG9yID0gbG9jYXRvci5pbmNsdWRlcygnLycpXG4gICAgICAgID8gdGhpcy51cmxUb0xvY2F0b3IobG9jYXRvcilcbiAgICAgICAgOiBsb2NhdG9yO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9sb2dnZXIuZGVidWcoYGNvbmZpZyBpcyBRdWVyeUNvbmZpZzogJHtjb25maWd9YCk7XG4gICAgICBjb25zdCB7IGZpZWxkcywgaW5jbHVkZXMsIHNvcnQsIC4uLl9jb25maWcgfSA9IGNvbmZpZyBhcyBRdWVyeUNvbmZpZzxcbiAgICAgICAgUyxcbiAgICAgICAgTlxuICAgICAgPjtcbiAgICAgIHRoaXMuX2NvbmZpZyA9IF9jb25maWc7XG4gICAgICB0aGlzLnNlbGVjdChmaWVsZHMpO1xuICAgICAgaWYgKGluY2x1ZGVzKSB7XG4gICAgICAgIHRoaXMuaW5jbHVkZUNoaWxkcmVuKGluY2x1ZGVzKTtcbiAgICAgIH1cbiAgICAgIGlmIChzb3J0KSB7XG4gICAgICAgIHRoaXMuc29ydChzb3J0KTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fb3B0aW9ucyA9IHtcbiAgICAgIGhlYWRlcnM6IHt9LFxuICAgICAgbWF4RmV0Y2g6IDEwMDAwLFxuICAgICAgYXV0b0ZldGNoOiBmYWxzZSxcbiAgICAgIHNjYW5BbGw6IGZhbHNlLFxuICAgICAgcmVzcG9uc2VUYXJnZXQ6ICdRdWVyeVJlc3VsdCcsXG4gICAgICAuLi4ob3B0aW9ucyB8fCB7fSksXG4gICAgfSBhcyBRdWVyeU9wdGlvbnM7XG4gICAgLy8gcHJvbWlzZSBpbnN0YW5jZVxuICAgIHRoaXMuX3Byb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLm9uKCdyZXNwb25zZScsIHJlc29sdmUpO1xuICAgICAgdGhpcy5vbignZXJyb3InLCByZWplY3QpO1xuICAgIH0pO1xuICAgIHRoaXMuX3N0cmVhbSA9IG5ldyBTZXJpYWxpemFibGUoKTtcbiAgICB0aGlzLm9uKCdyZWNvcmQnLCAocmVjb3JkKSA9PiB0aGlzLl9zdHJlYW0ucHVzaChyZWNvcmQpKTtcbiAgICB0aGlzLm9uKCdlbmQnLCAoKSA9PiB0aGlzLl9zdHJlYW0ucHVzaChudWxsKSk7XG4gICAgdGhpcy5vbignZXJyb3InLCAoZXJyKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLl9zdHJlYW0uZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWVtcHR5XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2VsZWN0IGZpZWxkcyB0byBpbmNsdWRlIGluIHRoZSByZXR1cm5pbmcgcmVzdWx0XG4gICAqL1xuICBzZWxlY3Q8XG4gICAgUiBleHRlbmRzIFJlY29yZCA9IFJlY29yZCxcbiAgICBGUCBleHRlbmRzIEZpZWxkUGF0aFNwZWNpZmllcjxTLCBOPiA9IEZpZWxkUGF0aFNwZWNpZmllcjxTLCBOPixcbiAgICBGUEMgZXh0ZW5kcyBGaWVsZFByb2plY3Rpb25Db25maWcgPSBGaWVsZFBhdGhTY29wZWRQcm9qZWN0aW9uPFMsIE4sIEZQPixcbiAgICBSMiBleHRlbmRzIFNPYmplY3RSZWNvcmQ8UywgTiwgRlBDLCBSPiA9IFNPYmplY3RSZWNvcmQ8UywgTiwgRlBDLCBSPlxuICA+KGZpZWxkczogUXVlcnlGaWVsZDxTLCBOLCBGUD4gPSAnKicpOiBRdWVyeTxTLCBOLCBSMiwgUVJUPiB7XG4gICAgaWYgKHRoaXMuX3NvcWwpIHtcbiAgICAgIHRocm93IEVycm9yKFxuICAgICAgICAnQ2Fubm90IHNldCBzZWxlY3QgZmllbGRzIGZvciB0aGUgcXVlcnkgd2hpY2ggaGFzIGFscmVhZHkgYnVpbHQgU09RTC4nLFxuICAgICAgKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdG9GaWVsZEFycmF5KGZpZWxkczogUXVlcnlGaWVsZDxTLCBOLCBGUD4pOiBzdHJpbmdbXSB7XG4gICAgICByZXR1cm4gdHlwZW9mIGZpZWxkcyA9PT0gJ3N0cmluZydcbiAgICAgICAgPyBmaWVsZHMuc3BsaXQoL1xccyosXFxzKi8pXG4gICAgICAgIDogQXJyYXkuaXNBcnJheShmaWVsZHMpXG4gICAgICAgID8gKGZpZWxkcyBhcyBBcnJheTxzdHJpbmcgfCBGUD4pXG4gICAgICAgICAgICAubWFwKHRvRmllbGRBcnJheSlcbiAgICAgICAgICAgIC5yZWR1Y2UoKGZzLCBmKSA9PiBbLi4uZnMsIC4uLmZdLCBbXSBhcyBzdHJpbmdbXSlcbiAgICAgICAgOiBPYmplY3QuZW50cmllcyhmaWVsZHMgYXMgeyBbbmFtZTogc3RyaW5nXTogUXVlcnlGaWVsZDxTLCBOLCBGUD4gfSlcbiAgICAgICAgICAgIC5tYXAoKFtmLCB2XSkgPT4ge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIHYgPT09ICdudW1iZXInIHx8IHR5cGVvZiB2ID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdiA/IFtmXSA6IFtdO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0b0ZpZWxkQXJyYXkodikubWFwKChwKSA9PiBgJHtmfS4ke3B9YCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAucmVkdWNlKChmcywgZikgPT4gWy4uLmZzLCAuLi5mXSwgW10gYXMgc3RyaW5nW10pO1xuICAgIH1cbiAgICBpZiAoZmllbGRzKSB7XG4gICAgICB0aGlzLl9jb25maWcuZmllbGRzID0gdG9GaWVsZEFycmF5KGZpZWxkcyk7XG4gICAgfVxuICAgIC8vIGZvcmNlIGNvbnZlcnQgcXVlcnkgcmVjb3JkIHR5cGUgd2l0aG91dCBjaGFuZ2luZyBpbnN0YW5jZTtcbiAgICByZXR1cm4gKHRoaXMgYXMgYW55KSBhcyBRdWVyeTxTLCBOLCBSMiwgUVJUPjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgcXVlcnkgY29uZGl0aW9ucyB0byBmaWx0ZXIgdGhlIHJlc3VsdCByZWNvcmRzXG4gICAqL1xuICB3aGVyZShjb25kaXRpb25zOiBRdWVyeUNvbmRpdGlvbjxTLCBOPiB8IHN0cmluZykge1xuICAgIGlmICh0aGlzLl9zb3FsKSB7XG4gICAgICB0aHJvdyBFcnJvcihcbiAgICAgICAgJ0Nhbm5vdCBzZXQgd2hlcmUgY29uZGl0aW9ucyBmb3IgdGhlIHF1ZXJ5IHdoaWNoIGhhcyBhbHJlYWR5IGJ1aWx0IFNPUUwuJyxcbiAgICAgICk7XG4gICAgfVxuICAgIHRoaXMuX2NvbmZpZy5jb25kaXRpb25zID0gY29uZGl0aW9ucztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBMaW1pdCB0aGUgcmV0dXJuaW5nIHJlc3VsdFxuICAgKi9cbiAgbGltaXQobGltaXQ6IG51bWJlcikge1xuICAgIGlmICh0aGlzLl9zb3FsKSB7XG4gICAgICB0aHJvdyBFcnJvcihcbiAgICAgICAgJ0Nhbm5vdCBzZXQgbGltaXQgZm9yIHRoZSBxdWVyeSB3aGljaCBoYXMgYWxyZWFkeSBidWlsdCBTT1FMLicsXG4gICAgICApO1xuICAgIH1cbiAgICB0aGlzLl9jb25maWcubGltaXQgPSBsaW1pdDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTa2lwIHJlY29yZHNcbiAgICovXG4gIHNraXAob2Zmc2V0OiBudW1iZXIpIHtcbiAgICBpZiAodGhpcy5fc29xbCkge1xuICAgICAgdGhyb3cgRXJyb3IoXG4gICAgICAgICdDYW5ub3Qgc2V0IHNraXAvb2Zmc2V0IGZvciB0aGUgcXVlcnkgd2hpY2ggaGFzIGFscmVhZHkgYnVpbHQgU09RTC4nLFxuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy5fY29uZmlnLm9mZnNldCA9IG9mZnNldDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTeW5vbnltIG9mIFF1ZXJ5I3NraXAoKVxuICAgKi9cbiAgb2Zmc2V0ID0gdGhpcy5za2lwO1xuXG4gIC8qKlxuICAgKiBTZXQgcXVlcnkgc29ydCB3aXRoIGRpcmVjdGlvblxuICAgKi9cbiAgc29ydChzb3J0OiBRdWVyeVNvcnQ8UywgTj4pOiB0aGlzO1xuICBzb3J0KHNvcnQ6IHN0cmluZyk6IHRoaXM7XG4gIHNvcnQoc29ydDogU09iamVjdEZpZWxkTmFtZXM8UywgTj4sIGRpcjogU29ydERpcik6IHRoaXM7XG4gIHNvcnQoc29ydDogc3RyaW5nLCBkaXI6IFNvcnREaXIpOiB0aGlzO1xuICBzb3J0KFxuICAgIHNvcnQ6IFF1ZXJ5U29ydDxTLCBOPiB8IFNPYmplY3RGaWVsZE5hbWVzPFMsIE4+IHwgc3RyaW5nLFxuICAgIGRpcj86IFNvcnREaXIsXG4gICkge1xuICAgIGlmICh0aGlzLl9zb3FsKSB7XG4gICAgICB0aHJvdyBFcnJvcihcbiAgICAgICAgJ0Nhbm5vdCBzZXQgc29ydCBmb3IgdGhlIHF1ZXJ5IHdoaWNoIGhhcyBhbHJlYWR5IGJ1aWx0IFNPUUwuJyxcbiAgICAgICk7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc29ydCA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIGRpciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMuX2NvbmZpZy5zb3J0ID0gW1tzb3J0LCBkaXJdXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY29uZmlnLnNvcnQgPSBzb3J0IGFzIHN0cmluZyB8IHsgW2ZpZWxkOiBzdHJpbmddOiBTb3J0RGlyIH07XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFN5bm9ueW0gb2YgUXVlcnkjc29ydCgpXG4gICAqL1xuICBvcmRlcmJ5OiB0eXBlb2YgUXVlcnkucHJvdG90eXBlLnNvcnQgPSB0aGlzLnNvcnQ7XG5cbiAgLyoqXG4gICAqIEluY2x1ZGUgY2hpbGQgcmVsYXRpb25zaGlwIHF1ZXJ5IGFuZCBtb3ZlIGRvd24gdG8gdGhlIGNoaWxkIHF1ZXJ5IGNvbnRleHRcbiAgICovXG4gIGluY2x1ZGU8XG4gICAgQ1JOIGV4dGVuZHMgQ2hpbGRSZWxhdGlvbnNoaXBOYW1lczxTLCBOPixcbiAgICBDTiBleHRlbmRzIENoaWxkUmVsYXRpb25zaGlwU09iamVjdE5hbWU8UywgTiwgQ1JOPixcbiAgICBDRlAgZXh0ZW5kcyBGaWVsZFBhdGhTcGVjaWZpZXI8UywgQ04+ID0gRmllbGRQYXRoU3BlY2lmaWVyPFMsIENOPixcbiAgICBDRlBDIGV4dGVuZHMgRmllbGRQcm9qZWN0aW9uQ29uZmlnID0gRmllbGRQYXRoU2NvcGVkUHJvamVjdGlvbjxTLCBDTiwgQ0ZQPixcbiAgICBDUiBleHRlbmRzIFJlY29yZCA9IFNPYmplY3RSZWNvcmQ8UywgQ04sIENGUEM+XG4gID4oXG4gICAgY2hpbGRSZWxOYW1lOiBDUk4sXG4gICAgY29uZGl0aW9ucz86IE9wdGlvbmFsPFF1ZXJ5Q29uZGl0aW9uPFMsIENOPj4sXG4gICAgZmllbGRzPzogT3B0aW9uYWw8UXVlcnlGaWVsZDxTLCBDTiwgQ0ZQPj4sXG4gICAgb3B0aW9ucz86IHsgbGltaXQ/OiBudW1iZXI7IG9mZnNldD86IG51bWJlcjsgc29ydD86IFF1ZXJ5U29ydDxTLCBDTj4gfSxcbiAgKTogU3ViUXVlcnk8UywgTiwgUiwgUVJULCBDUk4sIENOLCBDUj47XG4gIGluY2x1ZGU8XG4gICAgQ1JOIGV4dGVuZHMgQ2hpbGRSZWxhdGlvbnNoaXBOYW1lczxTLCBOPixcbiAgICBDTiBleHRlbmRzIFNPYmplY3ROYW1lczxTPixcbiAgICBDUiBleHRlbmRzIFJlY29yZCA9IFNPYmplY3RSZWNvcmQ8UywgQ04+XG4gID4oXG4gICAgY2hpbGRSZWxOYW1lOiBzdHJpbmcsXG4gICAgY29uZGl0aW9ucz86IE9wdGlvbmFsPFF1ZXJ5Q29uZGl0aW9uPFMsIENOPj4sXG4gICAgZmllbGRzPzogT3B0aW9uYWw8UXVlcnlGaWVsZDxTLCBDTj4+LFxuICAgIG9wdGlvbnM/OiB7IGxpbWl0PzogbnVtYmVyOyBvZmZzZXQ/OiBudW1iZXI7IHNvcnQ/OiBRdWVyeVNvcnQ8UywgQ04+IH0sXG4gICk6IFN1YlF1ZXJ5PFMsIE4sIFIsIFFSVCwgQ1JOLCBDTiwgQ1I+O1xuXG4gIGluY2x1ZGU8XG4gICAgQ1JOIGV4dGVuZHMgQ2hpbGRSZWxhdGlvbnNoaXBOYW1lczxTLCBOPixcbiAgICBDTiBleHRlbmRzIENoaWxkUmVsYXRpb25zaGlwU09iamVjdE5hbWU8UywgTiwgQ1JOPixcbiAgICBDRlAgZXh0ZW5kcyBGaWVsZFBhdGhTcGVjaWZpZXI8UywgQ04+ID0gRmllbGRQYXRoU3BlY2lmaWVyPFMsIENOPixcbiAgICBDRlBDIGV4dGVuZHMgRmllbGRQcm9qZWN0aW9uQ29uZmlnID0gRmllbGRQYXRoU2NvcGVkUHJvamVjdGlvbjxTLCBDTiwgQ0ZQPixcbiAgICBDUiBleHRlbmRzIFJlY29yZCA9IFNPYmplY3RSZWNvcmQ8UywgQ04sIENGUEM+XG4gID4oXG4gICAgY2hpbGRSZWxOYW1lOiBDUk4gfCBzdHJpbmcsXG4gICAgY29uZGl0aW9ucz86IE9wdGlvbmFsPFF1ZXJ5Q29uZGl0aW9uPFMsIENOPj4sXG4gICAgZmllbGRzPzogT3B0aW9uYWw8UXVlcnlGaWVsZDxTLCBDTiwgQ0ZQPj4sXG4gICAgb3B0aW9uczogeyBsaW1pdD86IG51bWJlcjsgb2Zmc2V0PzogbnVtYmVyOyBzb3J0PzogUXVlcnlTb3J0PFMsIENOPiB9ID0ge30sXG4gICk6IFN1YlF1ZXJ5PFMsIE4sIFIsIFFSVCwgQ1JOLCBDTiwgQ1I+IHtcbiAgICBpZiAodGhpcy5fc29xbCkge1xuICAgICAgdGhyb3cgRXJyb3IoXG4gICAgICAgICdDYW5ub3QgaW5jbHVkZSBjaGlsZCByZWxhdGlvbnNoaXAgaW50byB0aGUgcXVlcnkgd2hpY2ggaGFzIGFscmVhZHkgYnVpbHQgU09RTC4nLFxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgY2hpbGRDb25maWc6IFF1ZXJ5Q29uZmlnPFMsIENOLCBDRlA+ID0ge1xuICAgICAgZmllbGRzOiBmaWVsZHMgPT09IG51bGwgPyB1bmRlZmluZWQgOiBmaWVsZHMsXG4gICAgICB0YWJsZTogY2hpbGRSZWxOYW1lLFxuICAgICAgY29uZGl0aW9uczogY29uZGl0aW9ucyA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6IGNvbmRpdGlvbnMsXG4gICAgICBsaW1pdDogb3B0aW9ucy5saW1pdCxcbiAgICAgIG9mZnNldDogb3B0aW9ucy5vZmZzZXQsXG4gICAgICBzb3J0OiBvcHRpb25zLnNvcnQsXG4gICAgfTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICBjb25zdCBjaGlsZFF1ZXJ5ID0gbmV3IFN1YlF1ZXJ5PFMsIE4sIFIsIFFSVCwgQ1JOLCBDTiwgQ1I+KFxuICAgICAgdGhpcy5fY29ubixcbiAgICAgIGNoaWxkUmVsTmFtZSBhcyBDUk4sXG4gICAgICBjaGlsZENvbmZpZyxcbiAgICAgIHRoaXMsXG4gICAgKTtcbiAgICB0aGlzLl9jaGlsZHJlbi5wdXNoKGNoaWxkUXVlcnkpO1xuICAgIHJldHVybiBjaGlsZFF1ZXJ5O1xuICB9XG5cbiAgLyoqXG4gICAqIEluY2x1ZGUgY2hpbGQgcmVsYXRpb25zaGlwIHF1ZXJpZXMsIGJ1dCBub3QgbW92aW5nIGRvd24gdG8gdGhlIGNoaWxkcmVuIGNvbnRleHRcbiAgICovXG4gIGluY2x1ZGVDaGlsZHJlbihcbiAgICBpbmNsdWRlczoge1xuICAgICAgW0NSTiBpbiBDaGlsZFJlbGF0aW9uc2hpcE5hbWVzPFMsIE4+XT86IFF1ZXJ5Q29uZmlnPFxuICAgICAgICBTLFxuICAgICAgICBDaGlsZFJlbGF0aW9uc2hpcFNPYmplY3ROYW1lPFMsIE4sIENSTj5cbiAgICAgID47XG4gICAgfSxcbiAgKSB7XG4gICAgdHlwZSBDUk4gPSBDaGlsZFJlbGF0aW9uc2hpcE5hbWVzPFMsIE4+O1xuICAgIGlmICh0aGlzLl9zb3FsKSB7XG4gICAgICB0aHJvdyBFcnJvcihcbiAgICAgICAgJ0Nhbm5vdCBpbmNsdWRlIGNoaWxkIHJlbGF0aW9uc2hpcCBpbnRvIHRoZSBxdWVyeSB3aGljaCBoYXMgYWxyZWFkeSBidWlsdCBTT1FMLicsXG4gICAgICApO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGNybmFtZSBvZiBPYmplY3Qua2V5cyhpbmNsdWRlcykgYXMgQ1JOW10pIHtcbiAgICAgIGNvbnN0IHsgY29uZGl0aW9ucywgZmllbGRzLCAuLi5vcHRpb25zIH0gPSBpbmNsdWRlc1tcbiAgICAgICAgY3JuYW1lXG4gICAgICBdIGFzIFF1ZXJ5Q29uZmlnPFMsIENoaWxkUmVsYXRpb25zaGlwU09iamVjdE5hbWU8UywgTiwgQ1JOPj47XG4gICAgICB0aGlzLmluY2x1ZGUoY3JuYW1lLCBjb25kaXRpb25zLCBmaWVsZHMsIG9wdGlvbnMpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR0aW5nIG1heEZldGNoIHF1ZXJ5IG9wdGlvblxuICAgKi9cbiAgbWF4RmV0Y2gobWF4RmV0Y2g6IG51bWJlcikge1xuICAgIHRoaXMuX29wdGlvbnMubWF4RmV0Y2ggPSBtYXhGZXRjaDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTd2l0Y2hpbmcgYXV0byBmZXRjaCBtb2RlXG4gICAqL1xuICBhdXRvRmV0Y2goYXV0b0ZldGNoOiBib29sZWFuKSB7XG4gICAgdGhpcy5fb3B0aW9ucy5hdXRvRmV0Y2ggPSBhdXRvRmV0Y2g7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGZsYWcgdG8gc2NhbiBhbGwgcmVjb3JkcyBpbmNsdWRpbmcgZGVsZXRlZCBhbmQgYXJjaGl2ZWQuXG4gICAqL1xuICBzY2FuQWxsKHNjYW5BbGw6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9vcHRpb25zLnNjYW5BbGwgPSBzY2FuQWxsO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqL1xuICBzZXRSZXNwb25zZVRhcmdldDxRUlQxIGV4dGVuZHMgUXVlcnlSZXNwb25zZVRhcmdldD4oXG4gICAgcmVzcG9uc2VUYXJnZXQ6IFFSVDEsXG4gICk6IFF1ZXJ5PFMsIE4sIFIsIFFSVDE+IHtcbiAgICBpZiAocmVzcG9uc2VUYXJnZXQgaW4gUmVzcG9uc2VUYXJnZXRzKSB7XG4gICAgICB0aGlzLl9vcHRpb25zLnJlc3BvbnNlVGFyZ2V0ID0gcmVzcG9uc2VUYXJnZXQ7XG4gICAgfVxuICAgIC8vIGZvcmNlIGNoYW5nZSBxdWVyeSByZXNwb25zZSB0YXJnZXQgd2l0aG91dCBjaGFuZ2luZyBpbnN0YW5jZVxuICAgIHJldHVybiAodGhpcyBhcyBRdWVyeTxTLCBOLCBSPikgYXMgUXVlcnk8UywgTiwgUiwgUVJUMT47XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBxdWVyeSBhbmQgZmV0Y2ggcmVjb3JkcyBmcm9tIHNlcnZlci5cbiAgICovXG4gIGV4ZWN1dGU8UVJUMSBleHRlbmRzIFF1ZXJ5UmVzcG9uc2VUYXJnZXQgPSBRUlQ+KFxuICAgIG9wdGlvbnNfOiBQYXJ0aWFsPFF1ZXJ5T3B0aW9ucz4gJiB7IHJlc3BvbnNlVGFyZ2V0PzogUVJUMSB9ID0ge30sXG4gICk6IFF1ZXJ5PFMsIE4sIFIsIFFSVDE+IHtcbiAgICBpZiAodGhpcy5fZXhlY3V0ZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigncmUtZXhlY3V0aW5nIGFscmVhZHkgZXhlY3V0ZWQgcXVlcnknKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fZmluaXNoZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignZXhlY3V0aW5nIGFscmVhZHkgY2xvc2VkIHF1ZXJ5Jyk7XG4gICAgfVxuXG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgIGhlYWRlcnM6IG9wdGlvbnNfLmhlYWRlcnMgfHwgdGhpcy5fb3B0aW9ucy5oZWFkZXJzLFxuICAgICAgcmVzcG9uc2VUYXJnZXQ6IG9wdGlvbnNfLnJlc3BvbnNlVGFyZ2V0IHx8IHRoaXMuX29wdGlvbnMucmVzcG9uc2VUYXJnZXQsXG4gICAgICBhdXRvRmV0Y2g6IG9wdGlvbnNfLmF1dG9GZXRjaCB8fCB0aGlzLl9vcHRpb25zLmF1dG9GZXRjaCxcbiAgICAgIG1heEZldGNoOiBvcHRpb25zXy5tYXhGZXRjaCB8fCB0aGlzLl9vcHRpb25zLm1heEZldGNoLFxuICAgICAgc2NhbkFsbDogb3B0aW9uc18uc2NhbkFsbCB8fCB0aGlzLl9vcHRpb25zLnNjYW5BbGwsXG4gICAgfTtcblxuICAgIC8vIGNvbGxlY3QgZmV0Y2hlZCByZWNvcmRzIGluIGFycmF5XG4gICAgLy8gb25seSB3aGVuIHJlc3BvbnNlIHRhcmdldCBpcyBSZWNvcmRzIGFuZFxuICAgIC8vIGVpdGhlciBjYWxsYmFjayBvciBjaGFpbmluZyBwcm9taXNlcyBhcmUgYXZhaWxhYmxlIHRvIHRoaXMgcXVlcnkuXG4gICAgdGhpcy5vbmNlKCdmZXRjaCcsICgpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgb3B0aW9ucy5yZXNwb25zZVRhcmdldCA9PT0gUmVzcG9uc2VUYXJnZXRzLlJlY29yZHMgJiZcbiAgICAgICAgdGhpcy5fY2hhaW5pbmdcbiAgICAgICkge1xuICAgICAgICB0aGlzLl9sb2dnZXIuZGVidWcoJy0tLSBjb2xsZWN0aW5nIGFsbCBmZXRjaGVkIHJlY29yZHMgLS0tJyk7XG4gICAgICAgIGNvbnN0IHJlY29yZHM6IFJlY29yZFtdID0gW107XG4gICAgICAgIGNvbnN0IG9uUmVjb3JkID0gKHJlY29yZDogUmVjb3JkKSA9PiByZWNvcmRzLnB1c2gocmVjb3JkKTtcbiAgICAgICAgdGhpcy5vbigncmVjb3JkJywgb25SZWNvcmQpO1xuICAgICAgICB0aGlzLm9uY2UoJ2VuZCcsICgpID0+IHtcbiAgICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKCdyZWNvcmQnLCBvblJlY29yZCk7XG4gICAgICAgICAgdGhpcy5lbWl0KCdyZXNwb25zZScsIHJlY29yZHMsIHRoaXMpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIGZsYWcgdG8gcHJldmVudCByZS1leGVjdXRpb25cbiAgICB0aGlzLl9leGVjdXRlZCA9IHRydWU7XG5cbiAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gc3RhcnQgYWN0dWFsIHF1ZXJ5XG4gICAgICB0aGlzLl9sb2dnZXIuZGVidWcoJz4+PiBRdWVyeSBzdGFydCA+Pj4nKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHRoaXMuX2V4ZWN1dGUob3B0aW9ucyk7XG4gICAgICAgIHRoaXMuX2xvZ2dlci5kZWJ1ZygnKioqIFF1ZXJ5IGZpbmlzaGVkICoqKicpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5fbG9nZ2VyLmRlYnVnKCctLS0gUXVlcnkgZXJyb3IgLS0tJywgZXJyb3IpO1xuICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgfVxuICAgIH0pKCk7XG5cbiAgICAvLyByZXR1cm4gUXVlcnkgaW5zdGFuY2UgZm9yIGNoYWluaW5nXG4gICAgcmV0dXJuICh0aGlzIGFzIFF1ZXJ5PFMsIE4sIFI+KSBhcyBRdWVyeTxTLCBOLCBSLCBRUlQxPjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTeW5vbnltIG9mIFF1ZXJ5I2V4ZWN1dGUoKVxuICAgKi9cbiAgZXhlYyA9IHRoaXMuZXhlY3V0ZTtcblxuICAvKipcbiAgICogU3lub255bSBvZiBRdWVyeSNleGVjdXRlKClcbiAgICovXG4gIHJ1biA9IHRoaXMuZXhlY3V0ZTtcblxuICBwcml2YXRlIGxvY2F0b3JUb1VybCgpIHtcbiAgICByZXR1cm4gdGhpcy5fbG9jYXRvclxuICAgICAgPyBbdGhpcy5fY29ubi5fYmFzZVVybCgpLCAnL3F1ZXJ5LycsIHRoaXMuX2xvY2F0b3JdLmpvaW4oJycpXG4gICAgICA6ICcnO1xuICB9XG5cbiAgcHJpdmF0ZSB1cmxUb0xvY2F0b3IodXJsOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdXJsLnNwbGl0KCcvJykucG9wKCk7XG4gIH1cblxuICBwcml2YXRlIGNvbnN0cnVjdFJlc3BvbnNlKFxuICAgIHJhd0RvbmU6IGJvb2xlYW4sXG4gICAgcmVzcG9uc2VUYXJnZXQ6IFF1ZXJ5UmVzcG9uc2VUYXJnZXRbM10sXG4gICk6IG51bWJlcjtcbiAgcHJpdmF0ZSBjb25zdHJ1Y3RSZXNwb25zZShcbiAgICByYXdEb25lOiBib29sZWFuLFxuICAgIHJlc3BvbnNlVGFyZ2V0OiBRdWVyeVJlc3BvbnNlVGFyZ2V0WzJdLFxuICApOiBSO1xuICBwcml2YXRlIGNvbnN0cnVjdFJlc3BvbnNlKFxuICAgIHJhd0RvbmU6IGJvb2xlYW4sXG4gICAgcmVzcG9uc2VUYXJnZXQ6IFF1ZXJ5UmVzcG9uc2VUYXJnZXRbMV0sXG4gICk6IFJbXTtcbiAgcHJpdmF0ZSBjb25zdHJ1Y3RSZXNwb25zZShcbiAgICByYXdEb25lOiBib29sZWFuLFxuICAgIHJlc3BvbnNlVGFyZ2V0OiBRdWVyeVJlc3BvbnNlVGFyZ2V0WzBdLFxuICApOiBRdWVyeVJlc3VsdDxSPjtcbiAgcHJpdmF0ZSBjb25zdHJ1Y3RSZXNwb25zZShcbiAgICByYXdEb25lOiBib29sZWFuLFxuICAgIHJlc3BvbnNlVGFyZ2V0OiBRdWVyeVJlc3BvbnNlVGFyZ2V0LFxuICApOiBRdWVyeVJlc3VsdDxSPiB8IFJbXSB8IG51bWJlciB8IFIge1xuICAgIHN3aXRjaCAocmVzcG9uc2VUYXJnZXQpIHtcbiAgICAgIGNhc2UgJ0NvdW50JzpcbiAgICAgICAgcmV0dXJuIHRoaXMudG90YWxTaXplO1xuICAgICAgY2FzZSAnU2luZ2xlUmVjb3JkJzpcbiAgICAgICAgcmV0dXJuIHRoaXMucmVjb3Jkcz8uWzBdID8/IG51bGw7XG4gICAgICBjYXNlICdSZWNvcmRzJzpcbiAgICAgICAgcmV0dXJuIHRoaXMucmVjb3JkcztcbiAgICAgIC8vIFF1ZXJ5UmVzdWx0IGlzIGRlZmF1bHQgcmVzcG9uc2UgdGFyZ2V0XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLntcbiAgICAgICAgICAgIHJlY29yZHM6IHRoaXMucmVjb3JkcyxcbiAgICAgICAgICAgIHRvdGFsU2l6ZTogdGhpcy50b3RhbFNpemUsXG4gICAgICAgICAgICBkb25lOiByYXdEb25lID8/IHRydWUsIC8vIHdoZW4gbm8gcmVjb3JkcywgZG9uZSBpcyBvbWl0dGVkXG4gICAgICAgICAgfSxcbiAgICAgICAgICAuLi4odGhpcy5fbG9jYXRvciA/IHsgbmV4dFJlY29yZHNVcmw6IHRoaXMubG9jYXRvclRvVXJsKCkgfSA6IHt9KSxcbiAgICAgICAgfTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhc3luYyBfZXhlY3V0ZShvcHRpb25zOiBRdWVyeU9wdGlvbnMpOiBQcm9taXNlPFF1ZXJ5UmVzcG9uc2U8Uj4+IHtcbiAgICBjb25zdCB7IGhlYWRlcnMsIHJlc3BvbnNlVGFyZ2V0LCBhdXRvRmV0Y2gsIG1heEZldGNoLCBzY2FuQWxsIH0gPSBvcHRpb25zO1xuICAgIHRoaXMuX2xvZ2dlci5kZWJ1ZygnZXhlY3V0ZSB3aXRoIG9wdGlvbnMnLCBvcHRpb25zKTtcbiAgICBsZXQgdXJsO1xuICAgIGlmICh0aGlzLl9sb2NhdG9yKSB7XG4gICAgICB1cmwgPSB0aGlzLmxvY2F0b3JUb1VybCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBzb3FsID0gYXdhaXQgdGhpcy50b1NPUUwoKTtcbiAgICAgIHRoaXMuX2xvZ2dlci5kZWJ1ZyhgU09RTCA9ICR7c29xbH1gKTtcbiAgICAgIHVybCA9IFtcbiAgICAgICAgdGhpcy5fY29ubi5fYmFzZVVybCgpLFxuICAgICAgICAnLycsXG4gICAgICAgIHNjYW5BbGwgPyAncXVlcnlBbGwnIDogJ3F1ZXJ5JyxcbiAgICAgICAgJz9xPScsXG4gICAgICAgIGVuY29kZVVSSUNvbXBvbmVudChzb3FsKSxcbiAgICAgIF0uam9pbignJyk7XG4gICAgfVxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLl9jb25uLnJlcXVlc3Q8Uj4oeyBtZXRob2Q6ICdHRVQnLCB1cmwsIGhlYWRlcnMgfSk7XG4gICAgdGhpcy5lbWl0KCdmZXRjaCcpO1xuICAgIHRoaXMudG90YWxTaXplID0gZGF0YS50b3RhbFNpemU7XG4gICAgdGhpcy5yZWNvcmRzID0gdGhpcy5yZWNvcmRzPy5jb25jYXQoXG4gICAgICBtYXhGZXRjaCAtIHRoaXMucmVjb3Jkcy5sZW5ndGggPiBkYXRhLnJlY29yZHMubGVuZ3RoXG4gICAgICAgID8gZGF0YS5yZWNvcmRzXG4gICAgICAgIDogZGF0YS5yZWNvcmRzLnNsaWNlKDAsIG1heEZldGNoIC0gdGhpcy5yZWNvcmRzLmxlbmd0aCksXG4gICAgKTtcbiAgICB0aGlzLl9sb2NhdG9yID0gZGF0YS5uZXh0UmVjb3Jkc1VybFxuICAgICAgPyB0aGlzLnVybFRvTG9jYXRvcihkYXRhLm5leHRSZWNvcmRzVXJsKVxuICAgICAgOiB1bmRlZmluZWQ7XG4gICAgdGhpcy5fZmluaXNoZWQgPVxuICAgICAgdGhpcy5fZmluaXNoZWQgfHxcbiAgICAgIGRhdGEuZG9uZSB8fFxuICAgICAgIWF1dG9GZXRjaCB8fFxuICAgICAgLy8gdGhpcyBpcyB3aGF0IHRoZSByZXNwb25zZSBsb29rcyBsaWtlIHdoZW4gdGhlcmUgYXJlIG5vIHJlc3VsdHNcbiAgICAgIChkYXRhLnJlY29yZHMubGVuZ3RoID09PSAwICYmIGRhdGEuZG9uZSA9PT0gdW5kZWZpbmVkKTtcblxuICAgIC8vIHN0cmVhbWluZyByZWNvcmQgaW5zdGFuY2VzXG4gICAgY29uc3QgbnVtUmVjb3JkcyA9IGRhdGEucmVjb3Jkcz8ubGVuZ3RoID8/IDA7XG4gICAgbGV0IHRvdGFsRmV0Y2hlZCA9IHRoaXMudG90YWxGZXRjaGVkO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtUmVjb3JkczsgaSsrKSB7XG4gICAgICBpZiAodG90YWxGZXRjaGVkID49IG1heEZldGNoKSB7XG4gICAgICAgIHRoaXMuX2ZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjb25zdCByZWNvcmQgPSBkYXRhLnJlY29yZHNbaV07XG4gICAgICB0aGlzLmVtaXQoJ3JlY29yZCcsIHJlY29yZCwgdG90YWxGZXRjaGVkLCB0aGlzKTtcbiAgICAgIHRvdGFsRmV0Y2hlZCArPSAxO1xuICAgIH1cbiAgICB0aGlzLnRvdGFsRmV0Y2hlZCA9IHRvdGFsRmV0Y2hlZDtcblxuICAgIGlmICh0aGlzLl9maW5pc2hlZCkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSB0aGlzLmNvbnN0cnVjdFJlc3BvbnNlKGRhdGEuZG9uZSwgcmVzcG9uc2VUYXJnZXQpO1xuICAgICAgLy8gb25seSBmaXJlIHJlc3BvbnNlIGV2ZW50IHdoZW4gaXQgc2hvdWxkIGJlIG5vdGlmaWVkIHBlciBmZXRjaFxuICAgICAgaWYgKHJlc3BvbnNlVGFyZ2V0ICE9PSBSZXNwb25zZVRhcmdldHMuUmVjb3Jkcykge1xuICAgICAgICB0aGlzLmVtaXQoJ3Jlc3BvbnNlJywgcmVzcG9uc2UsIHRoaXMpO1xuICAgICAgfVxuICAgICAgdGhpcy5lbWl0KCdlbmQnKTtcbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuX2V4ZWN1dGUob3B0aW9ucyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE9idGFpbiByZWFkYWJsZSBzdHJlYW0gaW5zdGFuY2VcbiAgICovXG4gIHN0cmVhbSh0eXBlOiAncmVjb3JkJyk6IFNlcmlhbGl6YWJsZTxSPjtcbiAgc3RyZWFtKHR5cGU6ICdjc3YnKTogUmVhZGFibGU7XG4gIHN0cmVhbSh0eXBlOiAncmVjb3JkJyB8ICdjc3YnID0gJ2NzdicpIHtcbiAgICBpZiAoIXRoaXMuX2ZpbmlzaGVkICYmICF0aGlzLl9leGVjdXRlZCkge1xuICAgICAgdGhpcy5leGVjdXRlKHsgYXV0b0ZldGNoOiB0cnVlIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdHlwZSA9PT0gJ3JlY29yZCcgPyB0aGlzLl9zdHJlYW0gOiB0aGlzLl9zdHJlYW0uc3RyZWFtKHR5cGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBpcGUgdGhlIHF1ZXJpZWQgcmVjb3JkcyB0byBhbm90aGVyIHN0cmVhbVxuICAgKiBUaGlzIGlzIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5OyBRdWVyeSBpcyBub3QgYSByZWNvcmQgc3RyZWFtIGluc3RhbmNlIGFueW1vcmUgaW4gMi4wLlxuICAgKiBJZiB5b3Ugd2FudCBhIHJlY29yZCBzdHJlYW0gaW5zdGFuY2UsIHVzZSBgUXVlcnkjc3RyZWFtKCdyZWNvcmQnKWAuXG4gICAqL1xuICBwaXBlKHN0cmVhbTogTm9kZUpTLldyaXRhYmxlU3RyZWFtKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RyZWFtKCdyZWNvcmQnKS5waXBlKHN0cmVhbSk7XG4gIH1cblxuICAvKipcbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgYXN5bmMgX2V4cGFuZEZpZWxkcyhzb2JqZWN0Xz86IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLl9zb3FsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdDYW5ub3QgZXhwYW5kIGZpZWxkcyBmb3IgdGhlIHF1ZXJ5IHdoaWNoIGhhcyBhbHJlYWR5IGJ1aWx0IFNPUUwuJyxcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IHsgZmllbGRzID0gW10sIHRhYmxlID0gJycgfSA9IHRoaXMuX2NvbmZpZztcbiAgICBjb25zdCBzb2JqZWN0ID0gc29iamVjdF8gfHwgdGFibGU7XG4gICAgdGhpcy5fbG9nZ2VyLmRlYnVnKFxuICAgICAgYF9leHBhbmRGaWVsZHM6IHNvYmplY3QgPSAke3NvYmplY3R9LCBmaWVsZHMgPSAke2ZpZWxkcy5qb2luKCcsICcpfWAsXG4gICAgKTtcbiAgICBjb25zdCBbZWZpZWxkc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICB0aGlzLl9leHBhbmRBc3Rlcmlza0ZpZWxkcyhzb2JqZWN0LCBmaWVsZHMpLFxuICAgICAgLi4udGhpcy5fY2hpbGRyZW4ubWFwKGFzeW5jIChjaGlsZFF1ZXJ5KSA9PiB7XG4gICAgICAgIGF3YWl0IGNoaWxkUXVlcnkuX2V4cGFuZEZpZWxkcygpO1xuICAgICAgICByZXR1cm4gW10gYXMgc3RyaW5nW107XG4gICAgICB9KSxcbiAgICBdKTtcbiAgICB0aGlzLl9jb25maWcuZmllbGRzID0gZWZpZWxkcztcbiAgICB0aGlzLl9jb25maWcuaW5jbHVkZXMgPSB0aGlzLl9jaGlsZHJlblxuICAgICAgLm1hcCgoY3F1ZXJ5KSA9PiB7XG4gICAgICAgIGNvbnN0IGNjb25maWcgPSBjcXVlcnkuX3F1ZXJ5Ll9jb25maWc7XG4gICAgICAgIHJldHVybiBbY2NvbmZpZy50YWJsZSwgY2NvbmZpZ10gYXMgW3N0cmluZywgU09RTFF1ZXJ5Q29uZmlnXTtcbiAgICAgIH0pXG4gICAgICAucmVkdWNlKFxuICAgICAgICAoaW5jbHVkZXMsIFtjdGFibGUsIGNjb25maWddKSA9PiAoe1xuICAgICAgICAgIC4uLmluY2x1ZGVzLFxuICAgICAgICAgIFtjdGFibGVdOiBjY29uZmlnLFxuICAgICAgICB9KSxcbiAgICAgICAge30gYXMgeyBbbmFtZTogc3RyaW5nXTogU09RTFF1ZXJ5Q29uZmlnIH0sXG4gICAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqL1xuICBhc3luYyBfZmluZFJlbGF0aW9uT2JqZWN0KHJlbE5hbWU6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3QgdGFibGUgPSB0aGlzLl9jb25maWcudGFibGU7XG4gICAgaWYgKCF0YWJsZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB0YWJsZSBpbmZvcm1hdGlvbiBwcm92aWRlZCBpbiB0aGUgcXVlcnknKTtcbiAgICB9XG4gICAgdGhpcy5fbG9nZ2VyLmRlYnVnKFxuICAgICAgYGZpbmRpbmcgdGFibGUgZm9yIHJlbGF0aW9uIFwiJHtyZWxOYW1lfVwiIGluIFwiJHt0YWJsZX1cIi4uLmAsXG4gICAgKTtcbiAgICBjb25zdCBzb2JqZWN0ID0gYXdhaXQgdGhpcy5fY29ubi5kZXNjcmliZSQodGFibGUpO1xuICAgIGNvbnN0IHVwcGVyUm5hbWUgPSByZWxOYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgZm9yIChjb25zdCBjciBvZiBzb2JqZWN0LmNoaWxkUmVsYXRpb25zaGlwcykge1xuICAgICAgaWYgKFxuICAgICAgICAoY3IucmVsYXRpb25zaGlwTmFtZSB8fCAnJykudG9VcHBlckNhc2UoKSA9PT0gdXBwZXJSbmFtZSAmJlxuICAgICAgICBjci5jaGlsZFNPYmplY3RcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gY3IuY2hpbGRTT2JqZWN0O1xuICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIGNoaWxkIHJlbGF0aW9uc2hpcCBmb3VuZDogJHtyZWxOYW1lfWApO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqL1xuICBhc3luYyBfZXhwYW5kQXN0ZXJpc2tGaWVsZHMoXG4gICAgc29iamVjdDogc3RyaW5nLFxuICAgIGZpZWxkczogc3RyaW5nW10sXG4gICk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICBjb25zdCBleHBhbmRlZEZpZWxkcyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgZmllbGRzLm1hcChhc3luYyAoZmllbGQpID0+IHRoaXMuX2V4cGFuZEFzdGVyaXNrRmllbGQoc29iamVjdCwgZmllbGQpKSxcbiAgICApO1xuICAgIHJldHVybiBleHBhbmRlZEZpZWxkcy5yZWR1Y2UoXG4gICAgICAoZWZsZHM6IHN0cmluZ1tdLCBmbGRzOiBzdHJpbmdbXSk6IHN0cmluZ1tdID0+IFsuLi5lZmxkcywgLi4uZmxkc10sXG4gICAgICBbXSxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqL1xuICBhc3luYyBfZXhwYW5kQXN0ZXJpc2tGaWVsZChcbiAgICBzb2JqZWN0OiBzdHJpbmcsXG4gICAgZmllbGQ6IHN0cmluZyxcbiAgKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgIHRoaXMuX2xvZ2dlci5kZWJ1ZyhgZXhwYW5kaW5nIGZpZWxkIFwiJHtmaWVsZH1cIiBpbiBcIiR7c29iamVjdH1cIi4uLmApO1xuICAgIGNvbnN0IGZwYXRoID0gZmllbGQuc3BsaXQoJy4nKTtcbiAgICBpZiAoZnBhdGhbZnBhdGgubGVuZ3RoIC0gMV0gPT09ICcqJykge1xuICAgICAgY29uc3Qgc28gPSBhd2FpdCB0aGlzLl9jb25uLmRlc2NyaWJlJChzb2JqZWN0KTtcbiAgICAgIHRoaXMuX2xvZ2dlci5kZWJ1ZyhgdGFibGUgJHtzb2JqZWN0fSBoYXMgYmVlbiBkZXNjcmliZWRgKTtcbiAgICAgIGlmIChmcGF0aC5sZW5ndGggPiAxKSB7XG4gICAgICAgIGNvbnN0IHJuYW1lID0gZnBhdGguc2hpZnQoKTtcbiAgICAgICAgZm9yIChjb25zdCBmIG9mIHNvLmZpZWxkcykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGYucmVsYXRpb25zaGlwTmFtZSAmJlxuICAgICAgICAgICAgcm5hbWUgJiZcbiAgICAgICAgICAgIGYucmVsYXRpb25zaGlwTmFtZS50b1VwcGVyQ2FzZSgpID09PSBybmFtZS50b1VwcGVyQ2FzZSgpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zdCByZmllbGQgPSBmO1xuICAgICAgICAgICAgY29uc3QgcmVmZXJlbmNlVG8gPSByZmllbGQucmVmZXJlbmNlVG8gfHwgW107XG4gICAgICAgICAgICBjb25zdCBydGFibGUgPSByZWZlcmVuY2VUby5sZW5ndGggPT09IDEgPyByZWZlcmVuY2VUb1swXSA6ICdOYW1lJztcbiAgICAgICAgICAgIGNvbnN0IGZwYXRocyA9IGF3YWl0IHRoaXMuX2V4cGFuZEFzdGVyaXNrRmllbGQoXG4gICAgICAgICAgICAgIHJ0YWJsZSxcbiAgICAgICAgICAgICAgZnBhdGguam9pbignLicpLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybiBmcGF0aHMubWFwKChmcCkgPT4gYCR7cm5hbWV9LiR7ZnB9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzby5maWVsZHMubWFwKChmKSA9PiBmLm5hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gW2ZpZWxkXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBsYWluIHBsYW4gZm9yIGV4ZWN1dGluZyBxdWVyeVxuICAgKi9cbiAgYXN5bmMgZXhwbGFpbigpIHtcbiAgICBjb25zdCBzb3FsID0gYXdhaXQgdGhpcy50b1NPUUwoKTtcbiAgICB0aGlzLl9sb2dnZXIuZGVidWcoYFNPUUwgPSAke3NvcWx9YCk7XG4gICAgY29uc3QgdXJsID0gYC9xdWVyeS8/ZXhwbGFpbj0ke2VuY29kZVVSSUNvbXBvbmVudChzb3FsKX1gO1xuICAgIHJldHVybiB0aGlzLl9jb25uLnJlcXVlc3Q8UXVlcnlFeHBsYWluUmVzdWx0Pih1cmwpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBTT1FMIGV4cHJlc3Npb24gZm9yIHRoZSBxdWVyeVxuICAgKi9cbiAgYXN5bmMgdG9TT1FMKCkge1xuICAgIGlmICh0aGlzLl9zb3FsKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc29xbDtcbiAgICB9XG4gICAgYXdhaXQgdGhpcy5fZXhwYW5kRmllbGRzKCk7XG4gICAgcmV0dXJuIGNyZWF0ZVNPUUwodGhpcy5fY29uZmlnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm9taXNlL0ErIGludGVyZmFjZVxuICAgKiBodHRwOi8vcHJvbWlzZXMtYXBsdXMuZ2l0aHViLmlvL3Byb21pc2VzLXNwZWMvXG4gICAqXG4gICAqIERlbGVnYXRlIHRvIGRlZmVycmVkIHByb21pc2UsIHJldHVybiBwcm9taXNlIGluc3RhbmNlIGZvciBxdWVyeSByZXN1bHRcbiAgICovXG4gIHRoZW48VSwgVj4oXG4gICAgb25SZXNvbHZlPzpcbiAgICAgIHwgKChxcjogUXVlcnlSZXNwb25zZTxSLCBRUlQ+KSA9PiBVIHwgUHJvbWlzZTxVPilcbiAgICAgIHwgbnVsbFxuICAgICAgfCB1bmRlZmluZWQsXG4gICAgb25SZWplY3Q/OiAoKGVycjogRXJyb3IpID0+IFYgfCBQcm9taXNlPFY+KSB8IG51bGwgfCB1bmRlZmluZWQsXG4gICk6IFByb21pc2U8VSB8IFY+IHtcbiAgICB0aGlzLl9jaGFpbmluZyA9IHRydWU7XG4gICAgaWYgKCF0aGlzLl9maW5pc2hlZCAmJiAhdGhpcy5fZXhlY3V0ZWQpIHtcbiAgICAgIHRoaXMuZXhlY3V0ZSgpO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuX3Byb21pc2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ2ludmFsaWQgc3RhdGU6IHByb21pc2UgaXMgbm90IHNldCBhZnRlciBxdWVyeSBleGVjdXRpb24nLFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3Byb21pc2UudGhlbihvblJlc29sdmUsIG9uUmVqZWN0KTtcbiAgfVxuXG4gIGNhdGNoKFxuICAgIG9uUmVqZWN0OiAoXG4gICAgICBlcnI6IEVycm9yLFxuICAgICkgPT4gUXVlcnlSZXNwb25zZTxSLCBRUlQ+IHwgUHJvbWlzZTxRdWVyeVJlc3BvbnNlPFIsIFFSVD4+LFxuICApOiBQcm9taXNlPFF1ZXJ5UmVzcG9uc2U8UiwgUVJUPj4ge1xuICAgIHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3QpO1xuICB9XG5cbiAgcHJvbWlzZSgpOiBQcm9taXNlPFF1ZXJ5UmVzcG9uc2U8UiwgUVJUPj4ge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogQnVsayBkZWxldGUgcXVlcmllZCByZWNvcmRzXG4gICAqL1xuICBkZXN0cm95KG9wdGlvbnM/OiBRdWVyeURlc3Ryb3lPcHRpb25zKTogUHJvbWlzZTxTYXZlUmVzdWx0W10+O1xuICBkZXN0cm95KHR5cGU6IE4sIG9wdGlvbnM/OiBRdWVyeURlc3Ryb3lPcHRpb25zKTogUHJvbWlzZTxTYXZlUmVzdWx0W10+O1xuICBkZXN0cm95KHR5cGU/OiBOIHwgUXVlcnlEZXN0cm95T3B0aW9ucywgb3B0aW9ucz86IFF1ZXJ5RGVzdHJveU9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIHR5cGUgPT09ICdvYmplY3QnICYmIHR5cGUgIT09IG51bGwpIHtcbiAgICAgIG9wdGlvbnMgPSB0eXBlO1xuICAgICAgdHlwZSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgY29uc3QgdHlwZV86IE9wdGlvbmFsPE4+ID0gdHlwZSB8fCAodGhpcy5fY29uZmlnLnRhYmxlIGFzIE9wdGlvbmFsPE4+KTtcbiAgICBpZiAoIXR5cGVfKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdTT1FMIGJhc2VkIHF1ZXJ5IG5lZWRzIFNPYmplY3QgdHlwZSBpbmZvcm1hdGlvbiB0byBidWxrIGRlbGV0ZS4nLFxuICAgICAgKTtcbiAgICB9XG4gICAgLy8gU2V0IHRoZSB0aHJlc2hvbGQgbnVtYmVyIHRvIHBhc3MgdG8gYnVsayBBUElcbiAgICBjb25zdCB0aHJlc2hvbGROdW0gPVxuICAgICAgb3B0aW9ucy5hbGxvd0J1bGsgPT09IGZhbHNlXG4gICAgICAgID8gLTFcbiAgICAgICAgOiB0eXBlb2Ygb3B0aW9ucy5idWxrVGhyZXNob2xkID09PSAnbnVtYmVyJ1xuICAgICAgICA/IG9wdGlvbnMuYnVsa1RocmVzaG9sZFxuICAgICAgICA6IC8vIGRldGVybWluZSB0aHJlc2hvbGQgaWYgdGhlIGNvbm5lY3Rpb24gdmVyc2lvbiBzdXBwb3J0cyBTT2JqZWN0IGNvbGxlY3Rpb24gQVBJIG9yIG5vdFxuICAgICAgICB0aGlzLl9jb25uLl9lbnN1cmVWZXJzaW9uKDQyKVxuICAgICAgICA/IERFRkFVTFRfQlVMS19USFJFU0hPTERcbiAgICAgICAgOiB0aGlzLl9jb25uLl9tYXhSZXF1ZXN0IC8gMjtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgY3JlYXRlQmF0Y2ggPSAoKSA9PlxuICAgICAgICB0aGlzLl9jb25uXG4gICAgICAgICAgLnNvYmplY3QodHlwZV8pXG4gICAgICAgICAgLmRlbGV0ZUJ1bGsoKVxuICAgICAgICAgIC5vbigncmVzcG9uc2UnLCByZXNvbHZlKVxuICAgICAgICAgIC5vbignZXJyb3InLCByZWplY3QpO1xuICAgICAgbGV0IHJlY29yZHM6IFJlY29yZFtdID0gW107XG4gICAgICBsZXQgYmF0Y2g6IFJldHVyblR5cGU8dHlwZW9mIGNyZWF0ZUJhdGNoPiB8IG51bGwgPSBudWxsO1xuICAgICAgY29uc3QgaGFuZGxlUmVjb3JkID0gKHJlYzogUmVjb3JkKSA9PiB7XG4gICAgICAgIGlmICghcmVjLklkKSB7XG4gICAgICAgICAgY29uc3QgZXJyID0gbmV3IEVycm9yKFxuICAgICAgICAgICAgJ1F1ZXJpZWQgcmVjb3JkIGRvZXMgbm90IGluY2x1ZGUgU2FsZXNmb3JjZSByZWNvcmQgSUQuJyxcbiAgICAgICAgICApO1xuICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZWNvcmQ6IFJlY29yZCA9IHsgSWQ6IHJlYy5JZCB9O1xuICAgICAgICBpZiAoYmF0Y2gpIHtcbiAgICAgICAgICBiYXRjaC53cml0ZShyZWNvcmQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlY29yZHMucHVzaChyZWNvcmQpO1xuICAgICAgICAgIGlmICh0aHJlc2hvbGROdW0gPj0gMCAmJiByZWNvcmRzLmxlbmd0aCA+IHRocmVzaG9sZE51bSkge1xuICAgICAgICAgICAgLy8gVXNlIGJ1bGsgZGVsZXRlIGluc3RlYWQgb2YgU09iamVjdCBSRVNUIEFQSVxuICAgICAgICAgICAgYmF0Y2ggPSBjcmVhdGVCYXRjaCgpO1xuICAgICAgICAgICAgZm9yIChjb25zdCByZWNvcmQgb2YgcmVjb3Jkcykge1xuICAgICAgICAgICAgICBiYXRjaC53cml0ZShyZWNvcmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVjb3JkcyA9IFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGNvbnN0IGhhbmRsZUVuZCA9ICgpID0+IHtcbiAgICAgICAgaWYgKGJhdGNoKSB7XG4gICAgICAgICAgYmF0Y2guZW5kKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgaWRzID0gcmVjb3Jkcy5tYXAoKHJlY29yZCkgPT4gcmVjb3JkLklkIGFzIHN0cmluZyk7XG4gICAgICAgICAgdGhpcy5fY29ublxuICAgICAgICAgICAgLnNvYmplY3QodHlwZV8pXG4gICAgICAgICAgICAuZGVzdHJveShpZHMsIHsgYWxsb3dSZWN1cnNpdmU6IHRydWUgfSlcbiAgICAgICAgICAgIC50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB0aGlzLnN0cmVhbSgncmVjb3JkJylcbiAgICAgICAgLm9uKCdkYXRhJywgaGFuZGxlUmVjb3JkKVxuICAgICAgICAub24oJ2VuZCcsIGhhbmRsZUVuZClcbiAgICAgICAgLm9uKCdlcnJvcicsIHJlamVjdCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU3lub255bSBvZiBRdWVyeSNkZXN0cm95KClcbiAgICovXG4gIGRlbGV0ZSA9IHRoaXMuZGVzdHJveTtcblxuICAvKipcbiAgICogU3lub255bSBvZiBRdWVyeSNkZXN0cm95KClcbiAgICovXG4gIGRlbCA9IHRoaXMuZGVzdHJveTtcblxuICAvKipcbiAgICogQnVsayB1cGRhdGUgcXVlcmllZCByZWNvcmRzLCB1c2luZyBnaXZlbiBtYXBwaW5nIGZ1bmN0aW9uL29iamVjdFxuICAgKi9cbiAgdXBkYXRlPFVSIGV4dGVuZHMgU09iamVjdElucHV0UmVjb3JkPFMsIE4+PihcbiAgICBtYXBwaW5nOiAoKHJlYzogUikgPT4gVVIpIHwgVVIsXG4gICAgdHlwZTogTixcbiAgICBvcHRpb25zPzogUXVlcnlVcGRhdGVPcHRpb25zLFxuICApOiBQcm9taXNlPFNhdmVSZXN1bHRbXT47XG4gIHVwZGF0ZTxVUiBleHRlbmRzIFNPYmplY3RJbnB1dFJlY29yZDxTLCBOPj4oXG4gICAgbWFwcGluZzogKChyZWM6IFIpID0+IFVSKSB8IFVSLFxuICAgIG9wdGlvbnM/OiBRdWVyeVVwZGF0ZU9wdGlvbnMsXG4gICk6IFByb21pc2U8U2F2ZVJlc3VsdFtdPjtcbiAgdXBkYXRlPFVSIGV4dGVuZHMgU09iamVjdElucHV0UmVjb3JkPFMsIE4+PihcbiAgICBtYXBwaW5nOiAoKHJlYzogUikgPT4gVVIpIHwgVVIsXG4gICAgdHlwZT86IE4gfCBRdWVyeVVwZGF0ZU9wdGlvbnMsXG4gICAgb3B0aW9ucz86IFF1ZXJ5VXBkYXRlT3B0aW9ucyxcbiAgKSB7XG4gICAgaWYgKHR5cGVvZiB0eXBlID09PSAnb2JqZWN0JyAmJiB0eXBlICE9PSBudWxsKSB7XG4gICAgICBvcHRpb25zID0gdHlwZTtcbiAgICAgIHR5cGUgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIGNvbnN0IHR5cGVfOiBPcHRpb25hbDxOPiA9XG4gICAgICB0eXBlIHx8ICh0aGlzLl9jb25maWcgJiYgKHRoaXMuX2NvbmZpZy50YWJsZSBhcyBPcHRpb25hbDxOPikpO1xuICAgIGlmICghdHlwZV8pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ1NPUUwgYmFzZWQgcXVlcnkgbmVlZHMgU09iamVjdCB0eXBlIGluZm9ybWF0aW9uIHRvIGJ1bGsgdXBkYXRlLicsXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCB1cGRhdGVTdHJlYW0gPVxuICAgICAgdHlwZW9mIG1hcHBpbmcgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyBSZWNvcmRTdHJlYW0ubWFwKG1hcHBpbmcpXG4gICAgICAgIDogUmVjb3JkU3RyZWFtLnJlY29yZE1hcFN0cmVhbShtYXBwaW5nKTtcbiAgICAvLyBTZXQgdGhlIHRocmVzaG9sZCBudW1iZXIgdG8gcGFzcyB0byBidWxrIEFQSVxuICAgIGNvbnN0IHRocmVzaG9sZE51bSA9XG4gICAgICBvcHRpb25zLmFsbG93QnVsayA9PT0gZmFsc2VcbiAgICAgICAgPyAtMVxuICAgICAgICA6IHR5cGVvZiBvcHRpb25zLmJ1bGtUaHJlc2hvbGQgPT09ICdudW1iZXInXG4gICAgICAgID8gb3B0aW9ucy5idWxrVGhyZXNob2xkXG4gICAgICAgIDogLy8gZGV0ZXJtaW5lIHRocmVzaG9sZCBpZiB0aGUgY29ubmVjdGlvbiB2ZXJzaW9uIHN1cHBvcnRzIFNPYmplY3QgY29sbGVjdGlvbiBBUEkgb3Igbm90XG4gICAgICAgIHRoaXMuX2Nvbm4uX2Vuc3VyZVZlcnNpb24oNDIpXG4gICAgICAgID8gREVGQVVMVF9CVUxLX1RIUkVTSE9MRFxuICAgICAgICA6IHRoaXMuX2Nvbm4uX21heFJlcXVlc3QgLyAyO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBjcmVhdGVCYXRjaCA9ICgpID0+XG4gICAgICAgIHRoaXMuX2Nvbm5cbiAgICAgICAgICAuc29iamVjdCh0eXBlXylcbiAgICAgICAgICAudXBkYXRlQnVsaygpXG4gICAgICAgICAgLm9uKCdyZXNwb25zZScsIHJlc29sdmUpXG4gICAgICAgICAgLm9uKCdlcnJvcicsIHJlamVjdCk7XG4gICAgICBsZXQgcmVjb3JkczogU09iamVjdFVwZGF0ZVJlY29yZDxTLCBOPltdID0gW107XG4gICAgICBsZXQgYmF0Y2g6IFJldHVyblR5cGU8dHlwZW9mIGNyZWF0ZUJhdGNoPiB8IG51bGwgPSBudWxsO1xuICAgICAgY29uc3QgaGFuZGxlUmVjb3JkID0gKHJlY29yZDogUmVjb3JkKSA9PiB7XG4gICAgICAgIGlmIChiYXRjaCkge1xuICAgICAgICAgIGJhdGNoLndyaXRlKHJlY29yZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVjb3Jkcy5wdXNoKHJlY29yZCBhcyBTT2JqZWN0VXBkYXRlUmVjb3JkPFMsIE4+KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhyZXNob2xkTnVtID49IDAgJiYgcmVjb3Jkcy5sZW5ndGggPiB0aHJlc2hvbGROdW0pIHtcbiAgICAgICAgICAvLyBVc2UgYnVsayB1cGRhdGUgaW5zdGVhZCBvZiBTT2JqZWN0IFJFU1QgQVBJXG4gICAgICAgICAgYmF0Y2ggPSBjcmVhdGVCYXRjaCgpO1xuICAgICAgICAgIGZvciAoY29uc3QgcmVjb3JkIG9mIHJlY29yZHMpIHtcbiAgICAgICAgICAgIGJhdGNoLndyaXRlKHJlY29yZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlY29yZHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGNvbnN0IGhhbmRsZUVuZCA9ICgpID0+IHtcbiAgICAgICAgaWYgKGJhdGNoKSB7XG4gICAgICAgICAgYmF0Y2guZW5kKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fY29ublxuICAgICAgICAgICAgLnNvYmplY3QodHlwZV8pXG4gICAgICAgICAgICAudXBkYXRlKHJlY29yZHMsIHsgYWxsb3dSZWN1cnNpdmU6IHRydWUgfSlcbiAgICAgICAgICAgIC50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB0aGlzLnN0cmVhbSgncmVjb3JkJylcbiAgICAgICAgLm9uKCdlcnJvcicsIHJlamVjdClcbiAgICAgICAgLnBpcGUodXBkYXRlU3RyZWFtKVxuICAgICAgICAub24oJ2RhdGEnLCBoYW5kbGVSZWNvcmQpXG4gICAgICAgIC5vbignZW5kJywgaGFuZGxlRW5kKVxuICAgICAgICAub24oJ2Vycm9yJywgcmVqZWN0KTtcbiAgICB9KTtcbiAgfVxufVxuXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuLyoqXG4gKiBTdWJRdWVyeSBvYmplY3QgZm9yIHJlcHJlc2VudGluZyBjaGlsZCByZWxhdGlvbnNoaXAgcXVlcnlcbiAqL1xuZXhwb3J0IGNsYXNzIFN1YlF1ZXJ5PFxuICBTIGV4dGVuZHMgU2NoZW1hLFxuICBQTiBleHRlbmRzIFNPYmplY3ROYW1lczxTPixcbiAgUFIgZXh0ZW5kcyBSZWNvcmQsXG4gIFBRUlQgZXh0ZW5kcyBRdWVyeVJlc3BvbnNlVGFyZ2V0LFxuICBDUk4gZXh0ZW5kcyBDaGlsZFJlbGF0aW9uc2hpcE5hbWVzPFMsIFBOPiA9IENoaWxkUmVsYXRpb25zaGlwTmFtZXM8UywgUE4+LFxuICBDTiBleHRlbmRzIFNPYmplY3ROYW1lczxTPiA9IENoaWxkUmVsYXRpb25zaGlwU09iamVjdE5hbWU8UywgUE4sIENSTj4sXG4gIENSIGV4dGVuZHMgUmVjb3JkID0gUmVjb3JkXG4+IHtcbiAgX3JlbE5hbWU6IENSTjtcbiAgX3F1ZXJ5OiBRdWVyeTxTLCBDTiwgQ1I+O1xuICBfcGFyZW50OiBRdWVyeTxTLCBQTiwgUFIsIFBRUlQ+O1xuXG4gIC8qKlxuICAgKlxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgY29ubjogQ29ubmVjdGlvbjxTPixcbiAgICByZWxOYW1lOiBDUk4sXG4gICAgY29uZmlnOiBRdWVyeUNvbmZpZzxTLCBDTj4sXG4gICAgcGFyZW50OiBRdWVyeTxTLCBQTiwgUFIsIFBRUlQ+LFxuICApIHtcbiAgICB0aGlzLl9yZWxOYW1lID0gcmVsTmFtZTtcbiAgICB0aGlzLl9xdWVyeSA9IG5ldyBRdWVyeShjb25uLCBjb25maWcpO1xuICAgIHRoaXMuX3BhcmVudCA9IHBhcmVudDtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKi9cbiAgc2VsZWN0PFxuICAgIFIgZXh0ZW5kcyBSZWNvcmQgPSBSZWNvcmQsXG4gICAgRlAgZXh0ZW5kcyBGaWVsZFBhdGhTcGVjaWZpZXI8UywgQ04+ID0gRmllbGRQYXRoU3BlY2lmaWVyPFMsIENOPixcbiAgICBGUEMgZXh0ZW5kcyBGaWVsZFByb2plY3Rpb25Db25maWcgPSBGaWVsZFBhdGhTY29wZWRQcm9qZWN0aW9uPFMsIENOLCBGUD5cbiAgPihcbiAgICBmaWVsZHM6IFF1ZXJ5RmllbGQ8UywgQ04sIEZQPixcbiAgKTogU3ViUXVlcnk8UywgUE4sIFBSLCBQUVJULCBDUk4sIENOLCBTT2JqZWN0UmVjb3JkPFMsIENOLCBGUEMsIFI+PiB7XG4gICAgLy8gZm9yY2UgY29udmVydCBxdWVyeSByZWNvcmQgdHlwZSB3aXRob3V0IGNoYW5naW5nIGluc3RhbmNlXG4gICAgdGhpcy5fcXVlcnkgPSB0aGlzLl9xdWVyeS5zZWxlY3QoZmllbGRzKSBhcyBhbnk7XG4gICAgcmV0dXJuICh0aGlzIGFzIGFueSkgYXMgU3ViUXVlcnk8XG4gICAgICBTLFxuICAgICAgUE4sXG4gICAgICBQUixcbiAgICAgIFBRUlQsXG4gICAgICBDUk4sXG4gICAgICBDTixcbiAgICAgIFNPYmplY3RSZWNvcmQ8UywgQ04sIEZQQywgUj5cbiAgICA+O1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqL1xuICB3aGVyZShjb25kaXRpb25zOiBRdWVyeUNvbmRpdGlvbjxTLCBDTj4gfCBzdHJpbmcpOiB0aGlzIHtcbiAgICB0aGlzLl9xdWVyeSA9IHRoaXMuX3F1ZXJ5LndoZXJlKGNvbmRpdGlvbnMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIExpbWl0IHRoZSByZXR1cm5pbmcgcmVzdWx0XG4gICAqL1xuICBsaW1pdChsaW1pdDogbnVtYmVyKSB7XG4gICAgdGhpcy5fcXVlcnkgPSB0aGlzLl9xdWVyeS5saW1pdChsaW1pdCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2tpcCByZWNvcmRzXG4gICAqL1xuICBza2lwKG9mZnNldDogbnVtYmVyKSB7XG4gICAgdGhpcy5fcXVlcnkgPSB0aGlzLl9xdWVyeS5za2lwKG9mZnNldCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU3lub255bSBvZiBTdWJRdWVyeSNza2lwKClcbiAgICovXG4gIG9mZnNldCA9IHRoaXMuc2tpcDtcblxuICAvKipcbiAgICogU2V0IHF1ZXJ5IHNvcnQgd2l0aCBkaXJlY3Rpb25cbiAgICovXG4gIHNvcnQoc29ydDogUXVlcnlTb3J0PFMsIENOPik6IHRoaXM7XG4gIHNvcnQoc29ydDogc3RyaW5nKTogdGhpcztcbiAgc29ydChzb3J0OiBTT2JqZWN0RmllbGROYW1lczxTLCBDTj4sIGRpcjogU29ydERpcik6IHRoaXM7XG4gIHNvcnQoc29ydDogc3RyaW5nLCBkaXI6IFNvcnREaXIpOiB0aGlzO1xuICBzb3J0KFxuICAgIHNvcnQ6IFF1ZXJ5U29ydDxTLCBDTj4gfCBTT2JqZWN0RmllbGROYW1lczxTLCBDTj4gfCBzdHJpbmcsXG4gICAgZGlyPzogU29ydERpcixcbiAgKSB7XG4gICAgdGhpcy5fcXVlcnkgPSB0aGlzLl9xdWVyeS5zb3J0KHNvcnQgYXMgYW55LCBkaXIgYXMgU29ydERpcik7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU3lub255bSBvZiBTdWJRdWVyeSNzb3J0KClcbiAgICovXG4gIG9yZGVyYnk6IHR5cGVvZiBTdWJRdWVyeS5wcm90b3R5cGUuc29ydCA9IHRoaXMuc29ydDtcblxuICAvKipcbiAgICpcbiAgICovXG4gIGFzeW5jIF9leHBhbmRGaWVsZHMoKSB7XG4gICAgY29uc3Qgc29iamVjdCA9IGF3YWl0IHRoaXMuX3BhcmVudC5fZmluZFJlbGF0aW9uT2JqZWN0KHRoaXMuX3JlbE5hbWUpO1xuICAgIHJldHVybiB0aGlzLl9xdWVyeS5fZXhwYW5kRmllbGRzKHNvYmplY3QpO1xuICB9XG5cbiAgLyoqXG4gICAqIEJhY2sgdGhlIGNvbnRleHQgdG8gcGFyZW50IHF1ZXJ5IG9iamVjdFxuICAgKi9cbiAgZW5kPFxuICAgIENSUCBleHRlbmRzIFNPYmplY3RDaGlsZFJlbGF0aW9uc2hpcFByb3A8XG4gICAgICBDUk4sXG4gICAgICBDUlxuICAgID4gPSBTT2JqZWN0Q2hpbGRSZWxhdGlvbnNoaXBQcm9wPENSTiwgQ1I+LFxuICAgIFBSMSBleHRlbmRzIFJlY29yZCA9IFBSICYgQ1JQXG4gID4oKTogUXVlcnk8UywgUE4sIFBSMSwgUFFSVD4ge1xuICAgIHJldHVybiAodGhpcy5fcGFyZW50IGFzIGFueSkgYXMgUXVlcnk8UywgUE4sIFBSMSwgUFFSVD47XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUXVlcnk7XG4iXX0=