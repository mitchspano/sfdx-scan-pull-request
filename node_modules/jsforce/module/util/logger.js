import "core-js/modules/es.array.iterator";
import _defineProperty from "@babel/runtime-corejs3/helpers/defineProperty";

/**
 *
 */
export const LogLevels = {
  DEBUG: 1,
  INFO: 2,
  WARN: 3,
  ERROR: 4,
  FATAL: 5,
  NONE: 6
};
const LogLevelLabels = ['', 'DEBUG', 'INFO', 'WARN', 'ERROR', 'FATAL', 'NONE'];

const globalLogLevelConfig = (() => {
  const globalLogLevelStr = process.env.JSFORCE_LOG_LEVEL || global.__JSFORCE_LOG_LEVEL__ || 'NONE';

  if (/^(DEBUG|INFO|WARN|ERROR|FATAL|NONE)$/i.test(globalLogLevelStr)) {
    return {
      '*': globalLogLevelStr
    };
  }

  try {
    return JSON.parse(globalLogLevelStr);
  } catch (e) {
    return {
      '*': 'NONE'
    };
  }
})();

function getModuleLogLevel(logLevelConfig, moduleName) {
  const logLevel = logLevelConfig[moduleName] || logLevelConfig['*'];
  return typeof logLevel === 'number' ? logLevel : LogLevels[logLevel] || LogLevels.NONE;
}
/**
 *
 */


export class Logger {
  constructor(moduleName, logLevelConfig = globalLogLevelConfig) {
    _defineProperty(this, "_moduleName", void 0);

    _defineProperty(this, "_logLevel", void 0);

    this._moduleName = moduleName;
    this._logLevel = typeof logLevelConfig === 'number' ? logLevelConfig : typeof logLevelConfig === 'string' ? LogLevels[logLevelConfig] || LogLevels.NONE : getModuleLogLevel(logLevelConfig, moduleName);
  }

  createInstance(logLevelConfig = this._logLevel) {
    return new Logger(this._moduleName, logLevelConfig);
  }

  setLogLevel(logLevel) {
    if (typeof logLevel === 'string') {
      this._logLevel = LogLevels[logLevel] || LogLevels.NONE;
    } else {
      this._logLevel = logLevel;
    }
  }

  log(logLevel, ...messages) {
    if (this._logLevel <= logLevel) {
      const msgs = [`${LogLevelLabels[logLevel]}\t[${this._moduleName}] `, ...messages];

      if (logLevel < LogLevels.ERROR) {
        console.log(...msgs); // eslint-disable-line no-console
      } else {
        console.error(...msgs); // eslint-disable-line no-console
      }
    }
  }

  debug(...messages) {
    this.log(LogLevels.DEBUG, ...messages);
  }

  info(...messages) {
    this.log(LogLevels.INFO, ...messages);
  }

  warn(...messages) {
    this.log(LogLevels.WARN, ...messages);
  }

  error(...messages) {
    this.log(LogLevels.ERROR, ...messages);
  }

  fatal(...messages) {
    this.log(LogLevels.FATAL, ...messages);
  }

}
const loggers = {};
/**
 *
 */

export function getLogger(moduleName) {
  const logger = loggers[moduleName] || new Logger(moduleName);
  loggers[moduleName] = logger;
  return logger;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsL2xvZ2dlci50cyJdLCJuYW1lcyI6WyJMb2dMZXZlbHMiLCJERUJVRyIsIklORk8iLCJXQVJOIiwiRVJST1IiLCJGQVRBTCIsIk5PTkUiLCJMb2dMZXZlbExhYmVscyIsImdsb2JhbExvZ0xldmVsQ29uZmlnIiwiZ2xvYmFsTG9nTGV2ZWxTdHIiLCJwcm9jZXNzIiwiZW52IiwiSlNGT1JDRV9MT0dfTEVWRUwiLCJnbG9iYWwiLCJfX0pTRk9SQ0VfTE9HX0xFVkVMX18iLCJ0ZXN0IiwiSlNPTiIsInBhcnNlIiwiZSIsImdldE1vZHVsZUxvZ0xldmVsIiwibG9nTGV2ZWxDb25maWciLCJtb2R1bGVOYW1lIiwibG9nTGV2ZWwiLCJMb2dnZXIiLCJjb25zdHJ1Y3RvciIsIl9tb2R1bGVOYW1lIiwiX2xvZ0xldmVsIiwiY3JlYXRlSW5zdGFuY2UiLCJzZXRMb2dMZXZlbCIsImxvZyIsIm1lc3NhZ2VzIiwibXNncyIsImNvbnNvbGUiLCJlcnJvciIsImRlYnVnIiwiaW5mbyIsIndhcm4iLCJmYXRhbCIsImxvZ2dlcnMiLCJnZXRMb2dnZXIiLCJsb2dnZXIiXSwibWFwcGluZ3MiOiI7OztBQUFBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sTUFBTUEsU0FBc0MsR0FBRztBQUNwREMsRUFBQUEsS0FBSyxFQUFFLENBRDZDO0FBRXBEQyxFQUFBQSxJQUFJLEVBQUUsQ0FGOEM7QUFHcERDLEVBQUFBLElBQUksRUFBRSxDQUg4QztBQUlwREMsRUFBQUEsS0FBSyxFQUFFLENBSjZDO0FBS3BEQyxFQUFBQSxLQUFLLEVBQUUsQ0FMNkM7QUFNcERDLEVBQUFBLElBQUksRUFBRTtBQU44QyxDQUEvQztBQVNQLE1BQU1DLGNBQWMsR0FBRyxDQUFDLEVBQUQsRUFBSyxPQUFMLEVBQWMsTUFBZCxFQUFzQixNQUF0QixFQUE4QixPQUE5QixFQUF1QyxPQUF2QyxFQUFnRCxNQUFoRCxDQUF2Qjs7QUFFQSxNQUFNQyxvQkFBb0IsR0FBRyxDQUFDLE1BQU07QUFDbEMs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QUosRUFBMEI7QUFDNUIsU0FBS0QsR0FBTCxDQUFTN0IsU0FBUyxDQUFDRyxJQUFuQixFQUF5QixHQUFHMkIsUUFBNUI7QUFDRDs7QUFFREcsRUFBQUEsS0FBSyxDQUFDLEdBQUdILFFBQUosRUFBMEI7QUFDN0IsU0FBS0QsR0FBTCxDQUFTN0IsU0FBUyxDQUFDSSxLQUFuQixFQUEwQixHQUFHMEIsUUFBN0I7QUFDRDs7QUFFRE8sRUFBQUEsS0FBSyxDQUFDLEdBQUdQLFFBQUosRUFBMEI7QUFDN0IsU0FBS0QsR0FBTCxDQUFTN0IsU0FBUyxDQUFDSyxLQUFuQixFQUEwQixHQUFHeUIsUUFBN0I7QUFDRDs7QUE3RGlCO0FBZ0VwQixNQUFNUSxPQUFtQyxHQUFHLEVBQTVDO0FBRUE7QUFDQTtBQUNBOztBQUNBLE9BQU8sU0FBU0MsU0FBVCxDQUFtQmxCLFVBQW5CLEVBQXVDO0FBQzVDLFFBQU1tQixNQUFNLEdBQUdGLE9BQU8sQ0FBQ2pCLFVBQUQsQ0FBUCxJQUF1QixJQUFJRSxNQUFKLENBQVdGLFVBQVgsQ0FBdEM7QUFDQWlCLEVBQUFBLE9BQU8sQ0FBQ2pCLFVBQUQsQ0FBUCxHQUFzQm1CLE1BQXRCO0FBQ0EsU0FBT0EsTUFBUDtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKlxuICovXG5leHBvcnQgY29uc3QgTG9nTGV2ZWxzOiB7IFtsZXZlbDogc3RyaW5nXTogbnVtYmVyIH0gPSB7XG4gIERFQlVHOiAxLFxuICBJTkZPOiAyLFxuICBXQVJOOiAzLFxuICBFUlJPUjogNCxcbiAgRkFUQUw6IDUsXG4gIE5PTkU6IDYsXG59O1xuXG5jb25zdCBMb2dMZXZlbExhYmVscyA9IFsnJywgJ0RFQlVHJywgJ0lORk8nLCAnV0FSTicsICdFUlJPUicsICdGQVRBTCcsICdOT05FJ107XG5cbmNvbnN0IGdsb2JhbExvZ0xldmVsQ29uZmlnID0gKCgpID0+IHtcbiAgY29uc3QgZ2xvYmFsTG9nTGV2ZWxTdHIgPVxuICAgIHByb2Nlc3MuZW52LkpTRk9SQ0VfTE9HX0xFVkVMIHx8XG4gICAgKGdsb2JhbCBhcyBhbnkpLl9fSlNGT1JDRV9MT0dfTEVWRUxfXyB8fFxuICAgICdOT05FJztcbiAgaWYgKC9eKERFQlVHfElORk98V0FSTnxFUlJPUnxGQVRBTHxOT05FKSQvaS50ZXN0KGdsb2JhbExvZ0xldmVsU3RyKSkge1xuICAgIHJldHVybiB7ICcqJzogZ2xvYmFsTG9nTGV2ZWxTdHIgfTtcbiAgfVxuICB0cnkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKGdsb2JhbExvZ0xldmVsU3RyKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiB7ICcqJzogJ05PTkUnIH07XG4gIH1cbn0pKCk7XG5cbmV4cG9ydCB0eXBlIExvZ0xldmVsQ29uZmlnID1cbiAgfCBzdHJpbmdcbiAgfCBudW1iZXJcbiAgfCB7IFtuYW1lOiBzdHJpbmddOiBzdHJpbmcgfCBudW1iZXIgfTtcblxuZnVuY3Rpb24gZ2V0TW9kdWxlTG9nTGV2ZWwoXG4gIGxvZ0xldmVsQ29uZmlnOiB7IFtuYW1lOiBzdHJpbmddOiBzdHJpbmcgfCBudW1iZXIgfSxcbiAgbW9kdWxlTmFtZTogc3RyaW5nLFxuKSB7XG4gIGNvbnN0IGxvZ0xldmVsID0gbG9nTGV2ZWxDb25maWdbbW9kdWxlTmFtZV0gfHwgbG9nTGV2ZWxDb25maWdbJyonXTtcbiAgcmV0dXJuIHR5cGVvZiBsb2dMZXZlbCA9PT0gJ251bWJlcidcbiAgICA/IGxvZ0xldmVsXG4gICAgOiBMb2dMZXZlbHNbbG9nTGV2ZWxdIHx8IExvZ0xldmVscy5OT05FO1xufVxuXG4vKipcbiAqXG4gKi9cbmV4cG9ydCBjbGFzcyBMb2dnZXIge1xuICBfbW9kdWxlTmFtZTogc3RyaW5nO1xuICBfbG9nTGV2ZWw6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBtb2R1bGVOYW1lOiBzdHJpbmcsXG4gICAgbG9nTGV2ZWxDb25maWc6IExvZ0xldmVsQ29uZmlnID0gZ2xvYmFsTG9nTGV2ZWxDb25maWcsXG4gICkge1xuICAgIHRoaXMuX21vZHVsZU5hbWUgPSBtb2R1bGVOYW1lO1xuICAgIHRoaXMuX2xvZ0xldmVsID1cbiAgICAgIHR5cGVvZiBsb2dMZXZlbENvbmZpZyA9PT0gJ251bWJlcidcbiAgICAgICAgPyBsb2dMZXZlbENvbmZpZ1xuICAgICAgICA6IHR5cGVvZiBsb2dMZXZlbENvbmZpZyA9PT0gJ3N0cmluZydcbiAgICAgICAgPyBMb2dMZXZlbHNbbG9nTGV2ZWxDb25maWddIHx8IExvZ0xldmVscy5OT05FXG4gICAgICAgIDogZ2V0TW9kdWxlTG9nTGV2ZWwobG9nTGV2ZWxDb25maWcsIG1vZHVsZU5hbWUpO1xuICB9XG5cbiAgY3JlYXRlSW5zdGFuY2UobG9nTGV2ZWxDb25maWc6IExvZ0xldmVsQ29uZmlnID0gdGhpcy5fbG9nTGV2ZWwpIHtcbiAgICByZXR1cm4gbmV3IExvZ2dlcih0aGlzLl9tb2R1bGVOYW1lLCBsb2dMZXZlbENvbmZpZyk7XG4gIH1cblxuICBzZXRMb2dMZXZlbChsb2dMZXZlbDogc3RyaW5nIHwgbnVtYmVyKSB7XG4gICAgaWYgKHR5cGVvZiBsb2dMZXZlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuX2xvZ0xldmVsID0gTG9nTGV2ZWxzW2xvZ0xldmVsXSB8fCBMb2dMZXZlbHMuTk9ORTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbG9nTGV2ZWwgPSBsb2dMZXZlbDtcbiAgICB9XG4gIH1cblxuICBsb2cobG9nTGV2ZWw6IG51bWJlciwgLi4ubWVzc2FnZXM6IEFycmF5PGFueT4pIHtcbiAgICBpZiAodGhpcy5fbG9nTGV2ZWwgPD0gbG9nTGV2ZWwpIHtcbiAgICAgIGNvbnN0IG1zZ3MgPSBbXG4gICAgICAgIGAke0xvZ0xldmVsTGFiZWxzW2xvZ0xldmVsXX1cXHRbJHt0aGlzLl9tb2R1bGVOYW1lfV0gYCxcbiAgICAgICAgLi4ubWVzc2FnZXMsXG4gICAgICBdO1xuICAgICAgaWYgKGxvZ0xldmVsIDwgTG9nTGV2ZWxzLkVSUk9SKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKC4uLm1zZ3MpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoLi4ubXNncyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGRlYnVnKC4uLm1lc3NhZ2VzOiBBcnJheTxhbnk+KSB7XG4gICAgdGhpcy5sb2coTG9nTGV2ZWxzLkRFQlVHLCAuLi5tZXNzYWdlcyk7XG4gIH1cblxuICBpbmZvKC4uLm1lc3NhZ2VzOiBBcnJheTxhbnk+KSB7XG4gICAgdGhpcy5sb2coTG9nTGV2ZWxzLklORk8sIC4uLm1lc3NhZ2VzKTtcbiAgfVxuXG4gIHdhcm4oLi4ubWVzc2FnZXM6IEFycmF5PGFueT4pIHtcbiAgICB0aGlzLmxvZyhMb2dMZXZlbHMuV0FSTiwgLi4ubWVzc2FnZXMpO1xuICB9XG5cbiAgZXJyb3IoLi4ubWVzc2FnZXM6IEFycmF5PGFueT4pIHtcbiAgICB0aGlzLmxvZyhMb2dMZXZlbHMuRVJST1IsIC4uLm1lc3NhZ2VzKTtcbiAgfVxuXG4gIGZhdGFsKC4uLm1lc3NhZ2VzOiBBcnJheTxhbnk+KSB7XG4gICAgdGhpcy5sb2coTG9nTGV2ZWxzLkZBVEFMLCAuLi5tZXNzYWdlcyk7XG4gIH1cbn1cblxuY29uc3QgbG9nZ2VyczogeyBbbmFtZTogc3RyaW5nXTogTG9nZ2VyIH0gPSB7fTtcblxuLyoqXG4gKlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TG9nZ2VyKG1vZHVsZU5hbWU6IHN0cmluZykge1xuICBjb25zdCBsb2dnZXIgPSBsb2dnZXJzW21vZHVsZU5hbWVdIHx8IG5ldyBMb2dnZXIobW9kdWxlTmFtZSk7XG4gIGxvZ2dlcnNbbW9kdWxlTmFtZV0gPSBsb2dnZXI7XG4gIHJldHVybiBsb2dnZXI7XG59XG4iXX0=